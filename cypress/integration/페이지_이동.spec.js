import {port} from './config';

describe('í˜ì´ì§€ë¥¼ ì´ë™í•˜ë©´ ëª©ë¡ì´ ê°±ì‹ ëœë‹¤', () => {
  const ì²«ë²ˆì§¸_ì¹´ë“œ_ì œëª©_of_page = {
    1: '21/3/15_ê·¸ë˜ë„',
    2: 'ì•¨ë²” êµ¬ê²½ ì¬ë°Œë‹¹ğŸ˜†ğŸ’–',
    3: 'ğŸ’',
    4: 'â¤ï¸'
  }
  function í˜„ì¬_í˜ì´ì§€ëŠ”(n){
    cy.get("#NowPageInput").should('have.value', n);
    cy.url().should('include', `nowPage=${n}`);
    ì²«ë²ˆì§¸_ì¹´ë“œì˜_ì œëª©ì€(ì²«ë²ˆì§¸_ì¹´ë“œ_ì œëª©_of_page[n]);
  }
  function ë‹¤ìŒ_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(){
    cy.get("#NextPageButton").click();
  }
  function ì´ì „_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(){
    cy.get("#BackPageButton").click();
  }
  function ë°°ê²½ì€_ë¹¨ê°„ìƒ‰ì´ë‹¤(){
    cy.get("#NowPageSpan").should('have.class', 'bg-red-300');
  }
  function ë°°ê²½ì€_ë¹¨ê°„ìƒ‰ì´_ì•„ë‹ˆë‹¤(){
    cy.get("#NowPageSpan").should('not.have.class', 'bg-red-300');
  }
  function ì²«ë²ˆì§¸_ì¹´ë“œì˜_ì œëª©ì€(title){
    cy.get("#MailCard-0 div h4").should('have.text', title);
  }
  it("ì´ˆê¸°í™”", ()=>{
    cy.visit(`http://localhost:${port}/?dateString=2021-03-15&nowPage=1&showList=true&now_pm=m20731`);
    cy.get("#MailCard-0")
    
    // ë©”ì¼ì´ ë³´ì´ë©´
  })

  it('ë‹¤ìŒ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‹¤ìŒ í˜ì´ì§€ë¡œ ê°„ë‹¤.', () => {
    í˜„ì¬_í˜ì´ì§€ëŠ”(1);

    ë‹¤ìŒ_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(); í˜„ì¬_í˜ì´ì§€ëŠ”(2);
  });
  it('ë§ˆì§€ë§‰ í˜ì´ì§€ì— ë„ì°©í•˜ë©´ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€í•œë‹¤.', ()=>{
    ë‹¤ìŒ_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(); í˜„ì¬_í˜ì´ì§€ëŠ”(3);
    ë°°ê²½ì€_ë¹¨ê°„ìƒ‰ì´_ì•„ë‹ˆë‹¤();

    ë‹¤ìŒ_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(); í˜„ì¬_í˜ì´ì§€ëŠ”(4);
    ë°°ê²½ì€_ë¹¨ê°„ìƒ‰ì´ë‹¤();
  });
  it('ë§ˆì§€ë§‰ í˜ì´ì§€ì—ì„œ ë‹¤ìŒì„ ëˆ„ë¥´ë©´ ê²½ê³  ì°½ì´ ëœ¬ë‹¤', ()=>{
    ë‹¤ìŒ_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(); // alert!
    cy.on('window:alert', (str) => {
      expect(str).to.include(`ë§ˆì§€ë§‰ í˜ì´ì§€ì…ë‹ˆë‹¤.`)
    });
  });
  it('ì´ì „ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°„ë‹¤.', ()=>{
    ì´ì „_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(); í˜„ì¬_í˜ì´ì§€ëŠ”(3);
    ì´ì „_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(); í˜„ì¬_í˜ì´ì§€ëŠ”(2);
  });
  it('ì‹œì‘ í˜ì´ì§€ì—ì„œ ì´ì „ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ê²½ê³ ì°½ì´ ëœ¬ë‹¤', ()=>{
    ì´ì „_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤(); í˜„ì¬_í˜ì´ì§€ëŠ”(1);

    ì´ì „_ë²„íŠ¼ì„_ëˆ„ë¥¸ë‹¤();
    cy.on('window:alert', (str) => {
      expect(str).to.include(`ì‹œì‘ í˜ì´ì§€ì…ë‹ˆë‹¤.`)
    });
  })
})