import{w as t,h as e,S as n,i as r,s,e as i,t as c,j as o,b as l,c as a,d as u,l as d,k as h,f,a as m,m as p,n as g,g as $,o as x,p as y,r as w,q as v,v as b,x as M,y as k,z as _,A as S,B as L,C,D as I,E,F as j,G as A,H as z,I as O,J as N,K as R,L as F,M as P,N as D}from"./main.js";const J={value:null,color:null},B={value:"💖",color:"#fff"},T=[{value:"권은비",color:"#bbb0dc"},{value:"미야와키 사쿠라",color:"#f1d2e7"},{value:"강혜원",color:"#db706c"},{value:"최예나",color:"#fcf695"},{value:"이채연",color:"#a7e0e1"},{value:"김채원",color:"#cee5d5"},{value:"야부키 나코",color:"#b7d3e9"},{value:"혼다 히토미",color:"#f1c3aa"},{value:"김민주",color:"#fff"},{value:"조유리",color:"#f3aa51"},{value:"안유진",color:"#567ace"},{value:"장원영",color:"#d9598c"},{value:"운영팀",color:"gray"}];let V,H=t(function(){let t=T.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",B]]));const e=localStorage.getItem("all_tag_dict");return e&&(console.log("all tag backup loaded"),t=[...t].reduce(((t,e)=>(t.set(e[0],e[1]),t)),new Map(JSON.parse(e)))),t}());H.subscribe((t=>{var e;localStorage.setItem("all_tag_dict",(e=t,JSON.stringify([...e])))})),H.subscribe((t=>{V=e=>{const n=e.map((e=>[e[0],new Set(e[1].map((e=>t.get(e))))]));return new Map(n)}}));let K=t((()=>{const t=localStorage.getItem("mail_to_tag_dict");let e=new Map([["m0",new Set([B])]]);if(t){const n=JSON.parse(t);e=V(n)}return e})());function W(t){return[...t].map((t=>[t[0],[...t[1]].map((t=>t.value))]))}K.subscribe((t=>{if(!t)return null;[...t].forEach((t=>{0==t[1].size&&K.update((e=>(e.delete(t[0]),e)))}));const e=W(t);localStorage.setItem("mail_to_tag_dict",JSON.stringify(e))}));let q=t([{id:"",member:"",time:"",subject:"",preview:"",n:1}]),Z=t({id:"m20731",member:"광배",time:"2021/03/09 19:23",subject:"사탕",preview:"위즈원 사탕 푸딩 맛 있는거 알았어?? 맛있어보여서 사서 언제먹을지 고민중이야 ."});let G=t(""),Q=e(G,(t=>"https://papago.naver.com/?sk=ja&tk=ko&hn=1&st="+t.replace(/\&nbsp;<\/div>/g,"\n").replace(/<\/div>/g,"\n").replace(/&nbsp;/g,"").replace(/<(\/)?([a-zA-Z]*)(\s[a-zA-Z]*=[^>]*)?(\s)*(\/)?>/gi,"").replace(/\n\n/g,"\n").replace(/\n/g,"%0A"))),U=t(1),X=t(!0),Y=t(!0),tt=e(Y,(t=>!t)),et=t(""),nt=t(Math.floor(12*Math.random())),rt=t({color:null,value:null});const st=t=>()=>{rt.set(t),U.set(1)};let it;H.subscribe((t=>{it=e=>new Map(e.map((e=>[t.get(e[0]),new Set(e[1])])))}));let ct=t((()=>{let t=T.reduce(((t,e)=>(t.set(e,new Set),t)),new Map([[B,new Set]]));const e=localStorage.getItem("tag_to_mail_dict");if(e){const n=JSON.parse(e);t=[...it(n)].reduce(((t,e)=>(t.set(e[0],e[1]),t)),t)}return t})());function ot(t){return[...t].map((t=>[t[0].value,[...t[1]]]))}function lt(t){let e,n=t[0].value+"";return{c(){e=c(n)},m(t,n){a(t,e,n)},p(t,r){1&r&&n!==(n=t[0].value+"")&&x(e,n)},d(t){t&&f(e)}}}function at(t){let e,n,r;return{c(){e=i("img"),l(e,"class",n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none"),e.src!==(r="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","파파고 번역하기")},m(t,n){a(t,e,n)},p(t,r){4&r&&n!==(n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none")&&l(e,"class",n)},d(t){t&&f(e)}}}function ut(t){let e,n,r,s,m;return{c(){e=i("span"),n=c("X"),o(e,"background-color",t[0].color),l(e,"class",r="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])},m(r,i){a(r,e,i),u(e,n),s||(m=d(e,"click",(function(){h(t[3]?t[3]:t[5])&&(t[3]?t[3]:t[5]).apply(this,arguments)})),s=!0)},p(n,s){t=n,1&s&&o(e,"background-color",t[0].color),5&s&&r!==(r="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])&&l(e,"class",r)},d(t){t&&f(e),s=!1,m()}}}function dt(t){let e,n,r,s,c,u;function $(t,e){return"💖"==t[0].value?at:lt}let x=$(t),y=x(t),w=(t[3]||t[1]&&"생일"!=t[0].value)&&ut(t);return{c(){e=i("span"),y.c(),r=m(),w&&w.c(),s=p(),o(e,"background-color",t[0].color),l(e,"class",n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\n"+(t[1]?"mt-1 ml-1 mb-1 rounded-l border-r-0 pr-2":"m-1 rounded")+"\r\ntext-"+t[2]+" text-"+t[4])},m(n,i){a(n,e,i),y.m(e,null),a(n,r,i),w&&w.m(n,i),a(n,s,i),c||(u=d(e,"click",(function(){h(t[3]?t[3]:st(t[0]))&&(t[3]?t[3]:st(t[0])).apply(this,arguments)})),c=!0)},p(r,[i]){x===(x=$(t=r))&&y?y.p(t,i):(y.d(1),y=x(t),y&&(y.c(),y.m(e,null))),1&i&&o(e,"background-color",t[0].color),23&i&&n!==(n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\n"+(t[1]?"mt-1 ml-1 mb-1 rounded-l border-r-0 pr-2":"m-1 rounded")+"\r\ntext-"+t[2]+" text-"+t[4])&&l(e,"class",n),t[3]||t[1]&&"생일"!=t[0].value?w?w.p(t,i):(w=ut(t),w.c(),w.m(s.parentNode,s)):w&&(w.d(1),w=null)},i:g,o:g,d(t){t&&f(e),y.d(),t&&f(r),w&&w.d(t),t&&f(s),c=!1,u()}}}function ht(t,e,n){let r,s,i,c,o,l;$(t,H,(t=>n(6,i=t))),$(t,Z,(t=>n(7,c=t))),$(t,ct,(t=>n(8,o=t))),$(t,K,(t=>n(9,l=t)));var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function c(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}l((r=r.apply(t,e||[])).next())}))};let{tag:u}=e,{canDelete:d=!1}=e,{size:h="xs"}=e,{onRemove:f}=e;return t.$$set=t=>{"tag"in t&&n(0,u=t.tag),"canDelete"in t&&n(1,d=t.canDelete),"size"in t&&n(2,h=t.size),"onRemove"in t&&n(3,f=t.onRemove)},t.$$.update=()=>{1&t.$$.dirty&&n(4,r="강혜원"==u.value||"장원영"==u.value||"안유진"==u.value||"운영팀"==u.value?"black":"gray-700"),961&t.$$.dirty&&n(5,s=()=>a(void 0,void 0,void 0,(function*(){const t=i.get(u.value);yield fetch(`/mail-tag-dict/mail/${c.id}/tag/${t.value}`,{method:"DELETE"}),o.get(t).delete(c.id),ct.set(o),l.get(c.id).delete(t),K.set(l)})))},[u,d,h,f,r,s,i,c,o,l]}ct.subscribe((t=>{if([...t].forEach((([t,e])=>{if(0==e.size&&"💖"!=t.value&&!T.includes(t)){const e=t.value;ct.update((e=>(e.delete(t),e))),H.update((t=>(t.delete(e),fetch(`/all-tag-dict/tag/${e}`,{method:"DELETE"}).then((t=>{console.log("서버에서 태그 삭제 완료")})),t))),rt.update((e=>e==t?{color:null,value:null}:e))}})),!t)return null;const e=ot(t);localStorage.setItem("tag_to_mail_dict",JSON.stringify(e))}));class ft extends n{constructor(t){super(),r(this,t,ht,dt,s,{tag:0,canDelete:1,size:2,onRemove:3})}}function mt(t){let e,n,r;return{c(){e=i("span"),n=c(t[0]),o(e,"background-color","pink"),l(e,"class",r="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])},m(t,r){a(t,e,r),u(e,n)},p(t,[s]){1&s&&x(n,t[0]),2&s&&r!==(r="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])&&l(e,"class",r)},i:g,o:g,d(t){t&&f(e)}}}function pt(t,e,n){let{time:r}=e,{size:s="xs"}=e;return t.$$set=t=>{"time"in t&&n(0,r=t.time),"size"in t&&n(1,s=t.size)},[r,s]}class gt extends n{constructor(t){super(),r(this,t,pt,mt,s,{time:0,size:1})}}const $t={0:"#d9598c",1:"#f1d2e7",2:"#f3aa51",3:"#fcf695",4:"#567ace",5:"#b7d3e9",6:"#bbb0dc",7:"#db706c",8:"#f1c3aa",9:"#cee5d5",10:"#fff",11:"#a7e0e1",12:"gray"};let xt=t({});e(xt,(t=>Object.keys(t).reduce(((t,e)=>({...t,[xt[e]]:e})),{0:"장원영"})));const yt={0:"장원영",1:"미야와키 사쿠라",2:"조유리",3:"최예나",4:"안유진",5:"야부키 나코",6:"권은비",7:"강혜원",8:"혼다 히토미",9:"김채원",10:"김민주",11:"이채연",12:"운영팀"};function wt(t){let e,n,r;return{c(){e=i("button"),e.textContent="추가",l(e,"class","text-xs shadow rounded bg-red-400 p-1 m-1")},m(s,i){a(s,e,i),n||(r=d(e,"click",t[2]),n=!0)},p:g,d(t){t&&f(e),n=!1,r()}}}function vt(t){let e,n,r,s,c,o=t[1]&&wt(t);return{c(){e=i("input"),n=m(),o&&o.c(),r=p(),l(e,"type","text"),l(e,"class","\r\nborder-2 border-gray\r\nm-1 p-1\r\nrounded w-16\r\ntext-xs"),l(e,"placeholder","새 태그")},m(i,l){a(i,e,l),y(e,t[0]),a(i,n,l),o&&o.m(i,l),a(i,r,l),s||(c=[d(e,"input",t[5]),d(e,"keypress",t[3])],s=!0)},p(t,[n]){1&n&&e.value!==t[0]&&y(e,t[0]),t[1]?o?o.p(t,n):(o=wt(t),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i:g,o:g,d(t){t&&f(e),t&&f(n),o&&o.d(t),t&&f(r),s=!1,w(c)}}}function bt(t,e,n){let r,s,i,c,o,l,a,u;$(t,et,(t=>n(0,s=t))),$(t,nt,(t=>n(4,i=t))),$(t,H,(t=>n(7,c=t))),$(t,ct,(t=>n(8,o=t))),$(t,Z,(t=>n(9,l=t))),$(t,K,(t=>n(10,a=t))),$(t,tt,(t=>n(1,u=t)));var d=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function c(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}l((r=r.apply(t,e||[])).next())}))};const h=()=>d(void 0,void 0,void 0,(function*(){let t=r;c.has(s)?(t=c.get(s),o.get(t).add(l.id)):(o.set(r,new Set([l.id])),c.set(s,r),H.set(c),yield fetch("/all-tag-dict/tag",{method:"POST",body:JSON.stringify(r)})),ct.set(o),a.has(l.id)?a.get(l.id).add(t):a.set(l.id,new Set([t])),K.set(a),fetch(`/mail-tag-dict/mail/${l.id}/tag/${r.value}`,{method:"POST"}).then((t=>{console.log("서버에 태그 추가 완료.")})),v(et,s="",s),v(nt,i=(i+1)%12,i)}));return t.$$.update=()=>{17&t.$$.dirty&&(r={value:s,color:$t[i]})},[s,u,h,t=>{"Enter"===t.code&&h()},i,function(){s=this.value,et.set(s)}]}class Mt extends n{constructor(t){super(),r(this,t,bt,vt,s,{})}}function kt(t){let e,n;return{c(){e=i("img"),l(e,"class","w-6 h-6 float-left"),e.src!==(n="./img/empty-star.png")&&l(e,"src","./img/empty-star.png"),l(e,"alt","좋아요 하실래요?")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function _t(t){let e,n;return{c(){e=i("img"),l(e,"class","w-6 h-6 float-left"),e.src!==(n="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","좋아요 했어요")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function St(t){let e,n,r,s,c,o;function u(t,e){return(null==n||3&e)&&(n=!!t[1](t[0])),n?_t:kt}let p=u(t,-1),$=p(t);return{c(){e=i("label"),$.c(),r=m(),s=i("input"),l(e,"class","text-xl"),l(e,"for","favorite"),l(s,"type","checkbox"),l(s,"class","hidden"),l(s,"id","favorite")},m(n,i){a(n,e,i),$.m(e,null),a(n,r,i),a(n,s,i),c||(o=d(e,"click",(function(){h(t[2](t[0]))&&t[2](t[0]).apply(this,arguments)})),c=!0)},p(n,[r]){p!==(p=u(t=n,r))&&($.d(1),$=p(t),$&&($.c(),$.m(e,null)))},i:g,o:g,d(t){t&&f(e),$.d(),t&&f(r),t&&f(s),c=!1,o()}}}function Lt(t,e,n){let r,s,i,c,o;$(t,H,(t=>n(4,c=t))),$(t,ct,(t=>n(5,o=t)));let{pm:l}=e;return t.$$set=t=>{"pm"in t&&n(0,l=t.pm)},t.$$.update=()=>{16&t.$$.dirty&&n(3,r=c.get("💖")),40&t.$$.dirty&&n(2,i=t=>()=>{const e=o.get(r);e.has(t.id)?e.delete(t.id):e.add(t.id),ct.set(o)}),40&t.$$.dirty&&n(1,s=t=>o.get(r).has(t.id))},[l,s,i,r,c,o]}class Ct extends n{constructor(t){super(),r(this,t,Lt,St,s,{pm:0})}}function It(t){let e,n;return e=new ft({props:{tag:t[1],size:t[0]}}),{c(){b(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.tag=t[1]),1&n&&(r.size=t[0]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Et(t,e,n){let r,s;$(t,H,(t=>n(3,s=t)));let{pm:i}=e,{size:c="xs"}=e;return t.$$set=t=>{"pm"in t&&n(2,i=t.pm),"size"in t&&n(0,c=t.size)},t.$$.update=()=>{12&t.$$.dirty&&n(1,r=s.get(i.member))},[c,r,i,s]}class jt extends n{constructor(t){super(),r(this,t,Et,It,s,{pm:2,size:0})}}let At=t("latest");function zt(t){let e,n;return{c(){e=i("img"),e.src!==(n="./img/"+t[0])&&l(e,"src",n),l(e,"class","w-10 h-10 ml-1 mt-1 mr-2 rounded-full float-left border-gray-200 border-1"),l(e,"alt","")},m(t,n){a(t,e,n)},p(t,[r]){1&r&&e.src!==(n="./img/"+t[0])&&l(e,"src",n)},i:g,o:g,d(t){t&&f(e)}}}function Ot(t,e,n){let r,s;$(t,At,(t=>n(2,s=t)));let{pm:i}=e;return t.$$set=t=>{"pm"in t&&n(1,i=t.pm)},t.$$.update=()=>{6&t.$$.dirty&&n(0,r="운영팀"==i.member?"izone-logo.png":`profile/${s}/${i.member}.jpg`)},[r,i,s]}class Nt extends n{constructor(t){super(),r(this,t,Ot,zt,s,{pm:1})}}function Rt(t){const e=t-1;return e*e*e+1}function Ft(t,{delay:e=0,duration:n=400,easing:r=L}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:t=>"opacity: "+t*s}}function Pt(t,{delay:e=0,duration:n=400,easing:r=Rt,x:s=0,y:i=0,opacity:c=0}={}){const o=getComputedStyle(t),l=+o.opacity,a="none"===o.transform?"":o.transform,u=l*(1-c);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*s}px, ${(1-t)*i}px);\n\t\t\topacity: ${l-u*e}`}}function Dt(t,e,n){const r=t.slice();return r[14]=e[n],r}function Jt(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Bt(t){let e,n;return e=new ft({props:{tag:t[14],canDelete:!0,size:"sm"}}),{c(){b(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.tag=t[14]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Tt(t){let e,n,r,s,c,o,h,p=t[7]&&Vt(t);return{c(){e=i("div"),n=i("div"),s=m(),p&&p.c(),l(n,"contenteditable","false"),void 0===t[4]&&C((()=>t[12].call(n))),l(e,"class","h-5/6 overflow-scroll p-1")},m(r,i){a(r,e,i),u(e,n),void 0!==t[4]&&(n.innerHTML=t[4]),u(e,s),p&&p.m(e,null),c=!0,o||(h=d(n,"input",t[12]),o=!0)},p(t,r){16&r&&t[4]!==n.innerHTML&&(n.innerHTML=t[4]),t[7]?p?p.p(t,r):(p=Vt(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(t){c||(C((()=>{r||(r=I(n,Ft,{duration:200},!0)),r.run(1)})),c=!0)},o(t){r||(r=I(n,Ft,{duration:200},!1)),r.run(0),c=!1},d(t){t&&f(e),t&&r&&r.end(),p&&p.d(),o=!1,h()}}}function Vt(t){let e,n,r;return{c(){e=i("button"),e.textContent="목록으로 돌아가기🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mt-2")},m(s,i){a(s,e,i),n||(r=d(e,"click",t[13]),n=!0)},p:g,d(t){t&&f(e),n=!1,r()}}}function Ht(t){let e,n,r,s,d,h,p,g,$,y,w,v,L,I,O,N,R,F,P,D,J,B,T=t[2].subject+"";s=new Nt({props:{pm:t[2]}});let V=t[5]&&Jt();v=new Ct({props:{pm:t[2]}}),O=new jt({props:{pm:t[2],size:"sm"}}),R=new gt({props:{time:t[2].time,size:"sm"}});let H=t[3],K=[];for(let e=0;e<H.length;e+=1)K[e]=Bt(Dt(t,H,e));const W=t=>_(K[t],1,1,(()=>{K[t]=null}));D=new Mt({});let q=t[4]&&Tt(t);return{c(){e=i("div"),n=i("div"),r=i("div"),b(s.$$.fragment),d=m(),h=i("h4"),p=c(T),$=m(),V&&V.c(),y=m(),w=i("div"),b(v.$$.fragment),L=m(),I=i("div"),b(O.$$.fragment),N=m(),b(R.$$.fragment),F=m();for(let t=0;t<K.length;t+=1)K[t].c();P=m(),b(D.$$.fragment),J=m(),q&&q.c(),l(h,"class","text-xl m-1 w-4/5"),l(r,"class","relative"),C((()=>t[11].call(r))),l(w,"class","absolute inset-y-0 right-0 m-1 h-8"),l(I,"class","flex flex-wrap"),l(n,"class","relative w-full"),o(e,"max-height",t[6]&&t[0]?"70%":"90%"),l(e,"class","\r\nshadow-2xl rounded-md bg-white \r\nw-full mt-2 p-2\r\nflex flex-col")},m(i,c){a(i,e,c),u(e,n),u(n,r),M(s,r,null),u(r,d),u(r,h),u(h,p),g=E(r,t[11].bind(r)),u(n,$),V&&V.m(n,null),u(n,y),u(n,w),M(v,w,null),u(n,L),u(n,I),M(O,I,null),u(I,N),M(R,I,null),u(I,F);for(let t=0;t<K.length;t+=1)K[t].m(I,null);u(I,P),M(D,I,null),u(e,J),q&&q.m(e,null),B=!0},p(t,[r]){const i={};4&r&&(i.pm=t[2]),s.$set(i),(!B||4&r)&&T!==(T=t[2].subject+"")&&x(p,T),t[5]?V||(V=Jt(),V.c(),V.m(n,y)):V&&(V.d(1),V=null);const c={};4&r&&(c.pm=t[2]),v.$set(c);const l={};4&r&&(l.pm=t[2]),O.$set(l);const a={};if(4&r&&(a.time=t[2].time),R.$set(a),8&r){let e;for(H=t[3],e=0;e<H.length;e+=1){const n=Dt(t,H,e);K[e]?(K[e].p(n,r),k(K[e],1)):(K[e]=Bt(n),K[e].c(),k(K[e],1),K[e].m(I,P))}for(j(),e=H.length;e<K.length;e+=1)W(e);A()}t[4]?q?(q.p(t,r),16&r&&k(q,1)):(q=Tt(t),q.c(),k(q,1),q.m(e,null)):q&&(j(),_(q,1,1,(()=>{q=null})),A()),(!B||65&r)&&o(e,"max-height",t[6]&&t[0]?"70%":"90%")},i(t){if(!B){k(s.$$.fragment,t),k(v.$$.fragment,t),k(O.$$.fragment,t),k(R.$$.fragment,t);for(let t=0;t<H.length;t+=1)k(K[t]);k(D.$$.fragment,t),k(q),B=!0}},o(t){_(s.$$.fragment,t),_(v.$$.fragment,t),_(O.$$.fragment,t),_(R.$$.fragment,t),K=K.filter(Boolean);for(let t=0;t<K.length;t+=1)_(K[t]);_(D.$$.fragment,t),_(q),B=!1},d(t){t&&f(e),S(s),g(),V&&V.d(),S(v),S(O),S(R),z(K,t),S(D),q&&q.d()}}}function Kt(t,e,n){let r,s,i,c,o,l,a,u,d;$(t,K,(t=>n(9,c=t))),$(t,Z,(t=>n(2,o=t))),$(t,G,(t=>n(4,l=t))),$(t,Y,(t=>n(6,a=t))),$(t,tt,(t=>n(7,u=t))),$(t,X,(t=>n(8,d=t)));let h,{show:f}=e;return t.$$set=t=>{"show"in t&&n(0,f=t.show)},t.$$.update=()=>{516&t.$$.dirty&&n(3,r=c.has(o.id)?Array.from(c.get(o.id)):[]),4&t.$$.dirty&&n(10,s=()=>{v(G,l="",l),async function(t){const e=await fetch(`./mail/${t}.html`).then((t=>t.text())),n=e.search('<div class="main-contents" id="mail-detail"><html><head></head><body>')+69,r=e.search("</body></html></div>");return e.slice(n,r)}(o.id).then((t=>{setTimeout((()=>{v(G,l=t,l)}),100)}))}),1024&t.$$.dirty&&s(),2&t.$$.dirty&&n(5,i=h<40)},[f,h,o,r,l,i,a,u,d,c,s,function(){h=this.clientHeight,n(1,h)},function(){l=this.innerHTML,G.set(l)},()=>{v(X,d=!0,d)}]}class Wt extends n{constructor(t){super(),r(this,t,Kt,Ht,s,{show:0})}}function qt(t,e,n){const r=t.slice();return r[5]=e[n],r}function Zt(t){let e,n;return e=new ft({props:{tag:t[5],size:t[1]?"xs":"sm"}}),{c(){b(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.tag=t[5]),2&n&&(r.size=t[1]?"xs":"sm"),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Gt(t){let e,n,r=t[0],s=[];for(let e=0;e<r.length;e+=1)s[e]=Zt(qt(t,r,e));const c=t=>_(s[t],1,1,(()=>{s[t]=null}));return{c(){e=i("div");for(let t=0;t<s.length;t+=1)s[t].c();l(e,"class","flex flex-wrap")},m(t,r){a(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(3&n){let i;for(r=t[0],i=0;i<r.length;i+=1){const c=qt(t,r,i);s[i]?(s[i].p(c,n),k(s[i],1)):(s[i]=Zt(c),s[i].c(),k(s[i],1),s[i].m(e,null))}for(j(),i=r.length;i<s.length;i+=1)c(i);A()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)k(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)_(s[t]);n=!1},d(t){t&&f(e),z(s,t)}}}function Qt(t,e,n){let r,s,i,c;return $(t,H,(t=>n(2,s=t))),$(t,rt,(t=>n(3,i=t))),$(t,Y,(t=>n(1,c=t))),t.$$.update=()=>{4&t.$$.dirty&&n(0,r=Array.from(s.values()))},s.has(i.value)&&v(rt,i=J,i),[r,c,s]}class Ut extends n{constructor(t){super(),r(this,t,Qt,Gt,s,{})}}function Xt(t){let e,n,r,s;const c=t[3].default,o=O(c,t,t[2],null);return{c(){e=i("button"),o&&o.c(),l(e,"id",t[1]),l(e,"class","rounded bg-red-100 m-2 pl-1 pr-1")},m(i,c){a(i,e,c),o&&o.m(e,null),n=!0,r||(s=d(e,"click",(function(){h(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(r,[s]){t=r,o&&o.p&&4&s&&N(o,c,t,t[2],s,null,null),(!n||2&s)&&l(e,"id",t[1])},i(t){n||(k(o,t),n=!0)},o(t){_(o,t),n=!1},d(t){t&&f(e),o&&o.d(t),r=!1,s()}}}function Yt(t,e,n){let{$$slots:r={},$$scope:s}=e,{onClick:i}=e,{id:c}=e;return t.$$set=t=>{"onClick"in t&&n(0,i=t.onClick),"id"in t&&n(1,c=t.id),"$$scope"in t&&n(2,s=t.$$scope)},[i,c,s,r]}class te extends n{constructor(t){super(),r(this,t,Yt,Xt,s,{onClick:0,id:1})}}function ee(t){let e,n,r;return{c(){e=i("button"),e.textContent="목록🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mr-1")},m(s,i){a(s,e,i),n||(r=d(e,"click",t[8]),n=!0)},p:g,d(t){t&&f(e),n=!1,r()}}}function ne(t){let e,n,r,s,o;return{c(){e=i("label"),n=c("태그 목록 "),r=i("input"),l(r,"id","isListView"),l(r,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,c){a(i,e,c),u(e,n),u(e,r),r.checked=t[1],s||(o=d(r,"change",t[9]),s=!0)},p(t,e){2&e&&(r.checked=t[1])},d(t){t&&f(e),s=!1,o()}}}function re(t){let e,n,r,s;return r=new ft({props:{tag:t[2],canDelete:!0,onRemove:t[7]}}),{c(){e=i("span"),e.textContent="현재 :",n=m(),b(r.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),M(r,t,i),s=!0},p(t,e){const n={};4&e&&(n.tag=t[2]),r.$set(n)},i(t){s||(k(r.$$.fragment,t),s=!0)},o(t){_(r.$$.fragment,t),s=!1},d(t){t&&f(e),t&&f(n),S(r,t)}}}function se(t){let e,n,r,s,d,h,p,g,$,x,y,w,v,L,z,O,N,F,P,D=t[3]&&ee(t),J=650>=t[0]&&t[5]&&ne(t),B=t[2].value&&re(t);return v=new Ut({}),z=new Wt({props:{show:650<t[0]||t[1]}}),{c(){e=i("section"),n=i("div"),D&&D.c(),r=m(),s=i("div"),d=i("a"),h=c("번역"),p=i("img"),$=m(),J&&J.c(),x=m(),B&&B.c(),y=m(),w=i("div"),b(v.$$.fragment),L=m(),b(z.$$.fragment),l(p,"class","w-5 h-5 float-right"),p.src!==(g="./img/papago.png")&&l(p,"src","./img/papago.png"),l(p,"alt","파파고 번역하기"),l(d,"href",t[6]),l(d,"target","_blank"),l(s,"class","w-16 p-1 shadow rounded bg-red-100 mr-1"),l(n,"class","flex flex-row"),o(w,"min-height","43px"),l(w,"class","\r\n    h-36 mt-3 mb-3 p-2\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),R(w,"hidden",!((650<t[0]||t[1])&&t[5])),l(e,"class",O="h-full p-3 "+(t[5]?"w-4/12":"w-full")+" flex flex-col"),C((()=>t[10].call(e))),R(e,"hidden",t[3]&&t[4])},m(i,c){a(i,e,c),u(e,n),D&&D.m(n,null),u(n,r),u(n,s),u(s,d),u(d,h),u(d,p),u(n,$),J&&J.m(n,null),u(n,x),B&&B.m(n,null),u(e,y),u(e,w),M(v,w,null),u(e,L),M(z,e,null),N=E(e,t[10].bind(e)),P=!0},p(t,[s]){t[3]?D?D.p(t,s):(D=ee(t),D.c(),D.m(n,r)):D&&(D.d(1),D=null),(!P||64&s)&&l(d,"href",t[6]),650>=t[0]&&t[5]?J?J.p(t,s):(J=ne(t),J.c(),J.m(n,x)):J&&(J.d(1),J=null),t[2].value?B?(B.p(t,s),4&s&&k(B,1)):(B=re(t),B.c(),k(B,1),B.m(n,null)):B&&(j(),_(B,1,1,(()=>{B=null})),A()),35&s&&R(w,"hidden",!((650<t[0]||t[1])&&t[5]));const i={};3&s&&(i.show=650<t[0]||t[1]),z.$set(i),(!P||32&s&&O!==(O="h-full p-3 "+(t[5]?"w-4/12":"w-full")+" flex flex-col"))&&l(e,"class",O),56&s&&R(e,"hidden",t[3]&&t[4])},i(t){P||(k(B),k(v.$$.fragment,t),k(z.$$.fragment,t),C((()=>{F||(F=I(e,Pt,{x:-400,duration:400},!0)),F.run(1)})),P=!0)},o(t){_(B),_(v.$$.fragment,t),_(z.$$.fragment,t),F||(F=I(e,Pt,{x:-400,duration:400},!1)),F.run(0),P=!1},d(t){t&&f(e),D&&D.d(),J&&J.d(),B&&B.d(),S(v),S(z),N(),t&&F&&F.end()}}}function ie(t,e,n){let r,s,i,c,o,l;$(t,rt,(t=>n(2,r=t))),$(t,U,(t=>n(11,s=t))),$(t,tt,(t=>n(3,i=t))),$(t,X,(t=>n(4,c=t))),$(t,Y,(t=>n(5,o=t))),$(t,Q,(t=>n(6,l=t)));let a,u;return[a,u,r,i,c,o,l,()=>{v(rt,r=J,r),v(U,s=1,s)},()=>{v(X,c=!0,c)},function(){u=this.checked,n(1,u)},function(){a=this.clientHeight,n(0,a)}]}class ce extends n{constructor(t){super(),r(this,t,ie,se,s,{})}}let oe=t(le(new Date(2021,2,14)));function le(t){let e=""+(t.getMonth()+1),n=""+t.getDate();const r=t.getFullYear();return e.length<2&&(e="0"+e),n.length<2&&(n="0"+n),[r,e,n].join("-")}function ae(t){const[e,n,r]=t.split("-").map((t=>parseInt(t)));return new Date(e,n-1,r)}const ue=t=>t.split(" ")[0].replace(/\//g,"-");function de(t){let e;return{c(){e=c("이전")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function he(t){let e;return{c(){e=c("다음")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function fe(t){let e;return{c(){e=c("어제")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function me(t){let e;return{c(){e=c("내일")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function pe(t){let e,n,r,s,o,h,p,g,$,v,L,C,I,E,j,A,z,O,N,P,D;return e=new te({props:{id:"BackPageButton",onClick:t[6],$$slots:{default:[de]},$$scope:{ctx:t}}}),v=new te({props:{id:"NextPageButton",onClick:t[5],$$slots:{default:[he]},$$scope:{ctx:t}}}),E=new te({props:{onClick:t[3],$$slots:{default:[fe]},$$scope:{ctx:t}}}),O=new te({props:{onClick:t[4],$$slots:{default:[me]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment),n=m(),r=i("span"),s=i("input"),o=m(),h=i("span"),p=c("/ "),g=c(t[0]),$=m(),b(v.$$.fragment),L=m(),C=i("br"),I=m(),b(E.$$.fragment),j=m(),A=i("input"),z=m(),b(O.$$.fragment),l(s,"id","NowPageInput"),l(s,"type","number"),l(s,"class","w-9"),l(s,"min","1"),l(s,"max",t[0]),R(s,"bg-red-300",t[0]<=t[1]),l(r,"id","NowPageSpan"),l(r,"class","bg-white border-2 border-gray-400 rounded w-24 p-1"),R(r,"bg-red-300",t[0]<=t[1]),R(r,"border-red-300",t[0]<=t[1]),l(A,"type","date"),l(A,"class","border-1 w-36 border-gray-400 rounded")},m(i,c){M(e,i,c),a(i,n,c),a(i,r,c),u(r,s),y(s,t[1]),u(r,o),u(r,h),u(h,p),u(h,g),a(i,$,c),M(v,i,c),a(i,L,c),a(i,C,c),a(i,I,c),M(E,i,c),a(i,j,c),a(i,A,c),y(A,t[2]),a(i,z,c),M(O,i,c),N=!0,P||(D=[d(s,"input",t[7]),d(A,"input",t[8])],P=!0)},p(t,[n]){const i={};1024&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i),(!N||1&n)&&l(s,"max",t[0]),2&n&&F(s.value)!==t[1]&&y(s,t[1]),3&n&&R(s,"bg-red-300",t[0]<=t[1]),(!N||1&n)&&x(g,t[0]),3&n&&R(r,"bg-red-300",t[0]<=t[1]),3&n&&R(r,"border-red-300",t[0]<=t[1]);const c={};1024&n&&(c.$$scope={dirty:n,ctx:t}),v.$set(c);const o={};1024&n&&(o.$$scope={dirty:n,ctx:t}),E.$set(o),4&n&&y(A,t[2]);const a={};1024&n&&(a.$$scope={dirty:n,ctx:t}),O.$set(a)},i(t){N||(k(e.$$.fragment,t),k(v.$$.fragment,t),k(E.$$.fragment,t),k(O.$$.fragment,t),N=!0)},o(t){_(e.$$.fragment,t),_(v.$$.fragment,t),_(E.$$.fragment,t),_(O.$$.fragment,t),N=!1},d(t){S(e,t),t&&f(n),t&&f(r),t&&f($),S(v,t),t&&f(L),t&&f(C),t&&f(I),S(E,t),t&&f(j),t&&f(A),t&&f(z),S(O,t),P=!1,w(D)}}}function ge(t,e,n){let r,s,i;$(t,rt,(t=>n(9,r=t))),$(t,U,(t=>n(1,s=t))),$(t,oe,(t=>n(2,i=t)));let{maxPage:c}=e;return t.$$set=t=>{"maxPage"in t&&n(0,c=t.maxPage)},[c,s,i,function(){if(r.value)return s<c&&v(U,s+=1,s),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),o=new Date(t,e-1,n-1);v(oe,i=le(o),i),v(U,s=1,s)},function(){if(r.value)return s>1&&v(U,s-=1,s),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),c=new Date(t,e-1,n+1);v(oe,i=le(c),i),v(U,s=1,s)},function(){s<c?v(U,s+=1,s):alert("마지막 페이지입니다.")},function(){s>1?v(U,s-=1,s):alert("시작 페이지입니다.")},function(){s=F(this.value),U.set(s)},function(){i=this.value,oe.set(i)}]}class $e extends n{constructor(t){super(),r(this,t,ge,pe,s,{maxPage:0})}}function xe(t,e,n){const r=t.slice();return r[10]=e[n],r}function ye(t){let e;return{c(){e=i("span"),l(e,"class","\r\n        border-1 text-lg\r\n        rounded bg-white text-white")},m(t,n){a(t,e,n)},p:g,i:g,o:g,d(t){t&&f(e)}}}function we(t){let e,n,r,s,o,p,g,$,y,w,v,L,C,I,E,O,N,R,F=t[0].subject+"",P=(t[0].preview||"...")+"";e=new Nt({props:{pm:t[0]}}),s=new Ct({props:{pm:t[0]}}),p=new jt({props:{pm:t[0]}}),$=new gt({props:{time:t[0].time}});let D=t[6]&&ve(),J=t[4](t[0]),B=[];for(let e=0;e<J.length;e+=1)B[e]=be(xe(t,J,e));const T=t=>_(B[t],1,1,(()=>{B[t]=null}));return{c(){b(e.$$.fragment),n=m(),r=i("p"),b(s.$$.fragment),o=m(),b(p.$$.fragment),g=m(),b($.$$.fragment),y=m(),D&&D.c(),w=m(),v=c(F),L=m(),C=i("p");for(let t=0;t<B.length;t+=1)B[t].c();I=m(),E=c(P),l(r,"class","truncate"),l(C,"class","ml-1 mt-1 text-sm truncate")},m(i,c){M(e,i,c),a(i,n,c),a(i,r,c),M(s,r,null),u(r,o),M(p,r,null),u(r,g),M($,r,null),u(r,y),D&&D.m(r,null),u(r,w),u(r,v),a(i,L,c),a(i,C,c);for(let t=0;t<B.length;t+=1)B[t].m(C,null);u(C,I),u(C,E),O=!0,N||(R=d(C,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),N=!0)},p(n,i){t=n;const c={};1&i&&(c.pm=t[0]),e.$set(c);const o={};1&i&&(o.pm=t[0]),s.$set(o);const l={};1&i&&(l.pm=t[0]),p.$set(l);const a={};if(1&i&&(a.time=t[0].time),$.$set(a),t[6]?D||(D=ve(),D.c(),D.m(r,w)):D&&(D.d(1),D=null),(!O||1&i)&&F!==(F=t[0].subject+"")&&x(v,F),17&i){let e;for(J=t[4](t[0]),e=0;e<J.length;e+=1){const n=xe(t,J,e);B[e]?(B[e].p(n,i),k(B[e],1)):(B[e]=be(n),B[e].c(),k(B[e],1),B[e].m(C,I))}for(j(),e=J.length;e<B.length;e+=1)T(e);A()}(!O||1&i)&&P!==(P=(t[0].preview||"...")+"")&&x(E,P)},i(t){if(!O){k(e.$$.fragment,t),k(s.$$.fragment,t),k(p.$$.fragment,t),k($.$$.fragment,t);for(let t=0;t<J.length;t+=1)k(B[t]);O=!0}},o(t){_(e.$$.fragment,t),_(s.$$.fragment,t),_(p.$$.fragment,t),_($.$$.fragment,t),B=B.filter(Boolean);for(let t=0;t<B.length;t+=1)_(B[t]);O=!1},d(t){S(e,t),t&&f(n),t&&f(r),S(s),S(p),S($),D&&D.d(),t&&f(L),t&&f(C),z(B,t),N=!1,R()}}}function ve(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function be(t){let e,n;return e=new ft({props:{tag:t[10]}}),{c(){b(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};17&n&&(r.tag=t[10]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Me(t){let e,n,r=t[0].member&&ke(t);return{c(){e=i("li"),r&&r.c(),l(e,"class","border-b-2 rounded w-full text-gray-500 truncate"),o(e,"font-size","10px"),o(e,"height","20px")},m(t,s){a(t,e,s),r&&r.m(e,null),n=!0},p(t,n){t[0].member?r?(r.p(t,n),1&n&&k(r,1)):(r=ke(t),r.c(),k(r,1),r.m(e,null)):r&&(j(),_(r,1,1,(()=>{r=null})),A())},i(t){n||(k(r),n=!0)},o(t){_(r),n=!1},d(t){t&&f(e),r&&r.d()}}}function ke(t){let e,n,r,s,o,l,d,h,p=t[0].subject+"",g=" "+t[0].preview;return e=new jt({props:{pm:t[0],size:""}}),r=new gt({props:{time:t[0].time,size:""}}),{c(){b(e.$$.fragment),n=m(),b(r.$$.fragment),s=m(),o=i("strong"),l=c(p),d=c(g)},m(t,i){M(e,t,i),a(t,n,i),M(r,t,i),a(t,s,i),a(t,o,i),u(o,l),a(t,d,i),h=!0},p(t,n){const s={};1&n&&(s.pm=t[0]),e.$set(s);const i={};1&n&&(i.time=t[0].time),r.$set(i),(!h||1&n)&&p!==(p=t[0].subject+"")&&x(l,p),(!h||1&n)&&g!==(g=" "+t[0].preview)&&x(d,g)},i(t){h||(k(e.$$.fragment,t),k(r.$$.fragment,t),h=!0)},o(t){_(e.$$.fragment,t),_(r.$$.fragment,t),h=!1},d(t){S(e,t),t&&f(n),S(r,t),t&&f(s),t&&f(o),t&&f(d)}}}function _e(t){let e,n,r,s,c,d,h,g;const $=[we,ye],x=[];function y(t,e){return t[0].member?0:1}r=y(t),s=x[r]=$[r](t);let w=t[1]&&Me(t);return{c(){e=i("li"),n=i("div"),s.c(),d=m(),w&&w.c(),h=p(),l(e,"id",c="MailItem-"+t[2]),o(e,"height",t[5]?"62px":"84px"),l(e,"class","border-b-2 rounded p-1 w-full"),R(e,"hidden",t[1])},m(t,s){a(t,e,s),u(e,n),x[r].m(n,null),a(t,d,s),w&&w.m(t,s),a(t,h,s),g=!0},p(t,[i]){let a=r;r=y(t),r===a?x[r].p(t,i):(j(),_(x[a],1,1,(()=>{x[a]=null})),A(),s=x[r],s?s.p(t,i):(s=x[r]=$[r](t),s.c()),k(s,1),s.m(n,null)),(!g||4&i&&c!==(c="MailItem-"+t[2]))&&l(e,"id",c),(!g||32&i)&&o(e,"height",t[5]?"62px":"84px"),2&i&&R(e,"hidden",t[1]),t[1]?w?(w.p(t,i),2&i&&k(w,1)):(w=Me(t),w.c(),k(w,1),w.m(h.parentNode,h)):w&&(j(),_(w,1,1,(()=>{w=null})),A())},i(t){g||(k(s),k(w),g=!0)},o(t){_(s),_(w),g=!1},d(t){t&&f(e),x[r].d(),t&&f(d),w&&w.d(t),t&&f(h)}}}function Se(t,e,n){let r,s,i,c,o,l,a;$(t,Z,(t=>n(8,i=t))),$(t,X,(t=>n(9,c=t))),$(t,K,(t=>n(7,o=t))),$(t,Y,(t=>n(5,l=t))),$(t,tt,(t=>n(6,a=t)));let{pm:u}=e,{hidden:d}=e,{index:h}=e;return t.$$set=t=>{"pm"in t&&n(0,u=t.pm),"hidden"in t&&n(1,d=t.hidden),"index"in t&&n(2,h=t.index)},t.$$.update=()=>{1&t.$$.dirty&&n(3,r=()=>{u&&v(Z,i=u,i),v(X,c=!1,c)}),128&t.$$.dirty&&n(4,s=t=>o.has(t.id)?Array.from(o.get(t.id)):[])},[u,d,h,r,s,l,a,o]}class Le extends n{constructor(t){super(),r(this,t,Se,_e,s,{pm:0,hidden:1,index:2})}}function Ce(t,e,n){const r=t.slice();return r[7]=e[n],r}function Ie(t){let e,n;return{c(){e=i("img"),l(e,"class","ml-5 m-3 w-10/12"),l(e,"alt","no mail"),e.src!==(n="./img/izone-logo-card.png")&&l(e,"src","./img/izone-logo-card.png")},m(t,n){a(t,e,n)},p:g,i:g,o:g,d(t){t&&f(e)}}}function Ee(t){let e,n,r,s,o,p,g,$,y,v,L,C,I,E,O,N,R,F,P,D,J=t[0].subject+"",B=t[0].preview+"";n=new Nt({props:{pm:t[0]}}),$=new Ct({props:{pm:t[0]}}),L=new jt({props:{pm:t[0]}}),I=new gt({props:{time:t[0].time}});let T=t[2](t[0]),V=[];for(let e=0;e<T.length;e+=1)V[e]=je(Ce(t,T,e));const H=t=>_(V[t],1,1,(()=>{V[t]=null}));return{c(){e=i("div"),b(n.$$.fragment),r=m(),s=i("h4"),o=c(J),p=m(),g=i("div"),b($.$$.fragment),y=m(),v=i("div"),b(L.$$.fragment),C=m(),b(I.$$.fragment),E=m();for(let t=0;t<V.length;t+=1)V[t].c();O=m(),N=i("p"),R=c(B),l(s,"class","w-10/12 h-12"),l(g,"class","absolute inset-y-0 right-0 m-2"),l(v,"class","flex flex-wrap"),l(N,"class","m-1 text-sm")},m(i,c){a(i,e,c),M(n,e,null),u(e,r),u(e,s),u(s,o),a(i,p,c),a(i,g,c),M($,g,null),a(i,y,c),a(i,v,c),M(L,v,null),u(v,C),M(I,v,null),u(v,E);for(let t=0;t<V.length;t+=1)V[t].m(v,null);a(i,O,c),a(i,N,c),u(N,R),F=!0,P||(D=[d(e,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),d(N,"click",(function(){h(t[3])&&t[3].apply(this,arguments)}))],P=!0)},p(e,r){t=e;const s={};1&r&&(s.pm=t[0]),n.$set(s),(!F||1&r)&&J!==(J=t[0].subject+"")&&x(o,J);const i={};1&r&&(i.pm=t[0]),$.$set(i);const c={};1&r&&(c.pm=t[0]),L.$set(c);const l={};if(1&r&&(l.time=t[0].time),I.$set(l),5&r){let e;for(T=t[2](t[0]),e=0;e<T.length;e+=1){const n=Ce(t,T,e);V[e]?(V[e].p(n,r),k(V[e],1)):(V[e]=je(n),V[e].c(),k(V[e],1),V[e].m(v,null))}for(j(),e=T.length;e<V.length;e+=1)H(e);A()}(!F||1&r)&&B!==(B=t[0].preview+"")&&x(R,B)},i(t){if(!F){k(n.$$.fragment,t),k($.$$.fragment,t),k(L.$$.fragment,t),k(I.$$.fragment,t);for(let t=0;t<T.length;t+=1)k(V[t]);F=!0}},o(t){_(n.$$.fragment,t),_($.$$.fragment,t),_(L.$$.fragment,t),_(I.$$.fragment,t),V=V.filter(Boolean);for(let t=0;t<V.length;t+=1)_(V[t]);F=!1},d(t){t&&f(e),S(n),t&&f(p),t&&f(g),S($),t&&f(y),t&&f(v),S(L),S(I),z(V,t),t&&f(O),t&&f(N),P=!1,w(D)}}}function je(t){let e,n;return e=new ft({props:{tag:t[7]}}),{c(){b(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};5&n&&(r.tag=t[7]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Ae(t){let e,n,r,s,c;const u=[Ee,Ie],d=[];function h(t,e){return t[0].member?0:1}return n=h(t),r=d[n]=u[n](t),{c(){e=i("div"),r.c(),l(e,"id",s="MailCard-"+t[1]),o(e,"height","156px"),l(e,"class","\r\nw-64 m-3 p-1\r\nrelative overflow-y-scroll\r\nbg-white shadow-md rounded-md")},m(t,r){a(t,e,r),d[n].m(e,null),c=!0},p(t,[i]){let o=n;n=h(t),n===o?d[n].p(t,i):(j(),_(d[o],1,1,(()=>{d[o]=null})),A(),r=d[n],r?r.p(t,i):(r=d[n]=u[n](t),r.c()),k(r,1),r.m(e,null)),(!c||2&i&&s!==(s="MailCard-"+t[1]))&&l(e,"id",s)},i(t){c||(k(r),c=!0)},o(t){_(r),c=!1},d(t){t&&f(e),d[n].d()}}}function ze(t,e,n){let r,s,i,c,o;$(t,K,(t=>n(4,i=t))),$(t,Z,(t=>n(5,c=t))),$(t,X,(t=>n(6,o=t)));let{pm:l}=e,{index:a}=e;return t.$$set=t=>{"pm"in t&&n(0,l=t.pm),"index"in t&&n(1,a=t.index)},t.$$.update=()=>{16&t.$$.dirty&&n(2,r=t=>i.has(t.id)?Array.from(i.get(t.id)):[]),1&t.$$.dirty&&n(3,s=()=>{l&&(v(Z,c=l,c),v(X,o=!1,o))})},[l,a,r,s,i]}class Oe extends n{constructor(t){super(),r(this,t,ze,Ae,s,{pm:0,index:1})}}function Ne(t){return Array.isArray?Array.isArray(t):"[object Array]"===Te(t)}function Re(t){return"string"==typeof t}function Fe(t){return"number"==typeof t}function Pe(t){return!0===t||!1===t||function(t){return De(t)&&null!==t}(t)&&"[object Boolean]"==Te(t)}function De(t){return"object"==typeof t}function Je(t){return null!=t}function Be(t){return!t.trim().length}function Te(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Ve=Object.prototype.hasOwnProperty;class He{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=Ke(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ke(t){let e=null,n=null,r=null,s=1;if(Re(t)||Ne(t))r=t,e=We(t),n=qe(t);else{if(!Ve.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(r=i,Ve.call(t,"weight")&&(s=t.weight,s<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=We(i),n=qe(i)}return{path:e,id:n,weight:s,src:r}}function We(t){return Ne(t)?t:t.split(".")}function qe(t){return Ne(t)?t.join("."):t}var Ze={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const s=(t,e,i)=>{if(Je(t))if(e[i]){const c=t[e[i]];if(!Je(c))return;if(i===e.length-1&&(Re(c)||Fe(c)||Pe(c)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(c));else if(Ne(c)){r=!0;for(let t=0,n=c.length;t<n;t+=1)s(c[t],e,i+1)}else e.length&&s(c,e,i+1)}else n.push(t)};return s(t,Re(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const Ge=/[^ ]+/g;class Qe{constructor({getFn:t=Ze.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(Ge).length;if(e.has(r))return e.get(r);const s=1/Math.sqrt(r),i=parseFloat(Math.round(s*n)/n);return e.set(r,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Re(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();Re(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!Je(t)||Be(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let s=this.getFn(t,e.path);if(Je(s))if(Ne(s)){let t=[];const e=[{nestedArrIndex:-1,value:s}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(Je(r))if(Re(r)&&!Be(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else Ne(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!Be(s)){let t={v:s,n:this.norm.get(s)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ue(t,e,{getFn:n=Ze.getFn}={}){const r=new Qe({getFn:n});return r.setKeys(t.map(Ke)),r.setSources(e),r.create(),r}function Xe(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=Ze.distance,ignoreLocation:i=Ze.ignoreLocation}={}){const c=e/t.length;if(i)return c;const o=Math.abs(r-n);return s?c+o/s:o?1:c}function Ye(t,e,n,{location:r=Ze.location,distance:s=Ze.distance,threshold:i=Ze.threshold,findAllMatches:c=Ze.findAllMatches,minMatchCharLength:o=Ze.minMatchCharLength,includeMatches:l=Ze.includeMatches,ignoreLocation:a=Ze.ignoreLocation}={}){if(e.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const u=e.length,d=t.length,h=Math.max(0,Math.min(r,d));let f=i,m=h;const p=o>1||l,g=p?Array(d):[];let $;for(;($=t.indexOf(e,m))>-1;){let t=Xe(e,{currentLocation:$,expectedLocation:h,distance:s,ignoreLocation:a});if(f=Math.min(t,f),m=$+u,p){let t=0;for(;t<u;)g[$+t]=1,t+=1}}m=-1;let x=[],y=1,w=u+d;const v=1<<u-1;for(let r=0;r<u;r+=1){let i=0,o=w;for(;i<o;){Xe(e,{errors:r,currentLocation:h+o,expectedLocation:h,distance:s,ignoreLocation:a})<=f?i=o:w=o,o=Math.floor((w-i)/2+i)}w=o;let l=Math.max(1,h-o+1),$=c?d:Math.min(h+o,d)+u,b=Array($+2);b[$+1]=(1<<r)-1;for(let i=$;i>=l;i-=1){let c=i-1,o=n[t.charAt(c)];if(p&&(g[c]=+!!o),b[i]=(b[i+1]<<1|1)&o,r&&(b[i]|=(x[i+1]|x[i])<<1|1|x[i+1]),b[i]&v&&(y=Xe(e,{errors:r,currentLocation:c,expectedLocation:h,distance:s,ignoreLocation:a}),y<=f)){if(f=y,m=c,m<=h)break;l=Math.max(1,2*h-m)}}if(Xe(e,{errors:r+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:a})>f)break;x=b}const b={isMatch:m>=0,score:Math.max(.001,y)};if(p){const t=function(t=[],e=Ze.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let c=t.length;i<c;i+=1){let c=t[i];c&&-1===r?r=i:c||-1===r||(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}(g,o);t.length?l&&(b.indices=t):b.isMatch=!1}return b}function tn(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class en{constructor(t,{location:e=Ze.location,threshold:n=Ze.threshold,distance:r=Ze.distance,includeMatches:s=Ze.includeMatches,findAllMatches:i=Ze.findAllMatches,minMatchCharLength:c=Ze.minMatchCharLength,isCaseSensitive:o=Ze.isCaseSensitive,ignoreLocation:l=Ze.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:o,ignoreLocation:l},this.pattern=o?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(t,e)=>{this.chunks.push({pattern:t,alphabet:tn(t),startIndex:e})},u=this.pattern.length;if(u>32){let t=0;const e=u%32,n=u-e;for(;t<n;)a(this.pattern.substr(t,32),t),t+=32;if(e){const t=u-32;a(this.pattern.substr(t),t)}}else a(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:s,threshold:i,findAllMatches:c,minMatchCharLength:o,ignoreLocation:l}=this.options;let a=[],u=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:h,startIndex:f})=>{const{isMatch:m,score:p,indices:g}=Ye(t,e,h,{location:r+f,distance:s,threshold:i,findAllMatches:c,minMatchCharLength:o,includeMatches:n,ignoreLocation:l});m&&(d=!0),u+=p,m&&g&&(a=[...a,...g])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=a),h}}class nn{constructor(t){this.pattern=t}static isMultiMatch(t){return rn(t,this.multiRegex)}static isSingleMatch(t){return rn(t,this.singleRegex)}search(){}}function rn(t,e){const n=t.match(e);return n?n[1]:null}class sn extends nn{constructor(t,{location:e=Ze.location,threshold:n=Ze.threshold,distance:r=Ze.distance,includeMatches:s=Ze.includeMatches,findAllMatches:i=Ze.findAllMatches,minMatchCharLength:c=Ze.minMatchCharLength,isCaseSensitive:o=Ze.isCaseSensitive,ignoreLocation:l=Ze.ignoreLocation}={}){super(t),this._bitapSearch=new en(t,{location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:c,isCaseSensitive:o,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class cn extends nn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],s=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+s,r.push([e,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const on=[class extends nn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},cn,class extends nn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends nn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends nn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends nn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends nn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},sn],ln=on.length,an=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const un=new Set([sn.type,cn.type]);class dn{constructor(t,{isCaseSensitive:e=Ze.isCaseSensitive,includeMatches:n=Ze.includeMatches,minMatchCharLength:r=Ze.minMatchCharLength,ignoreLocation:s=Ze.ignoreLocation,findAllMatches:i=Ze.findAllMatches,location:c=Ze.location,threshold:o=Ze.threshold,distance:l=Ze.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:s,location:c,threshold:o,distance:l},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(an).filter((t=>t&&!!t.trim())),r=[];for(let t=0,s=n.length;t<s;t+=1){const s=n[t];let i=!1,c=-1;for(;!i&&++c<ln;){const t=on[c];let n=t.isMultiMatch(s);n&&(r.push(new t(n,e)),i=!0)}if(!i)for(c=-1;++c<ln;){const t=on[c];let n=t.isSingleMatch(s);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let s=0,i=[],c=0;for(let r=0,o=e.length;r<o;r+=1){const o=e[r];i.length=0,s=0;for(let e=0,r=o.length;e<r;e+=1){const r=o[e],{isMatch:l,indices:a,score:u}=r.search(t);if(!l){c=0,s=0,i.length=0;break}if(s+=1,c+=u,n){const t=r.constructor.type;un.has(t)?i=[...i,...a]:i.push(a)}}if(s){let t={isMatch:!0,score:c/s};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const hn=[];function fn(t,e){for(let n=0,r=hn.length;n<r;n+=1){let r=hn[n];if(r.condition(t,e))return new r(t,e)}return new en(t,e)}const mn="$and",pn="$or",gn="$path",$n="$val",xn=t=>!(!t[mn]&&!t[pn]),yn=t=>({[mn]:Object.keys(t).map((e=>({[e]:t[e]})))});function wn(t,e,{auto:n=!0}={}){const r=t=>{let s=Object.keys(t);const i=(t=>!!t[gn])(t);if(!i&&s.length>1&&!xn(t))return r(yn(t));if((t=>!Ne(t)&&De(t)&&!xn(t))(t)){const r=i?t[gn]:s[0],c=i?t[$n]:t[r];if(!Re(c))throw new Error((t=>`Invalid value for key ${t}`)(r));const o={keyId:qe(r),pattern:c};return n&&(o.searcher=fn(c,e)),o}let c={children:[],operator:s[0]};return s.forEach((e=>{const n=t[e];Ne(n)&&n.forEach((t=>{c.children.push(r(t))}))})),c};return xn(t)||(t=yn(t)),r(t)}function vn(t,e){const n=t.matches;e.matches=[],Je(n)&&n.forEach((t=>{if(!Je(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let s={indices:n,value:r};t.key&&(s.key=t.key.src),t.idx>-1&&(s.refIndex=t.idx),e.matches.push(s)}))}function bn(t,e){e.score=t.score}class Mn{constructor(t,e={},n){this.options={...Ze,...e},this.options.useExtendedSearch,this._keyStore=new He(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof Qe))throw new Error("Incorrect 'index' type");this._myIndex=e||Ue(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){Je(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,r-=1,e.push(s))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:s,sortFn:i,ignoreFieldNorm:c}=this.options;let o=Re(t)?Re(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=Ze.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:s})=>{const i=t?t.weight:null;n*=Math.pow(0===s&&i?Number.EPSILON:s,(i||1)*(e?1:r))})),t.score=n}))}(o,{ignoreFieldNorm:c}),s&&o.sort(i),Fe(e)&&e>-1&&(o=o.slice(0,e)),function(t,e,{includeMatches:n=Ze.includeMatches,includeScore:r=Ze.includeScore}={}){const s=[];return n&&s.push(vn),r&&s.push(bn),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return s.length&&s.forEach((e=>{e(t,r)})),r}))}(o,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=fn(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:s})=>{if(!Je(t))return;const{isMatch:i,score:c,indices:o}=e.searchIn(t);i&&r.push({item:t,idx:n,matches:[{score:c,value:t,norm:s,indices:o}]})})),r}_searchLogical(t){const e=wn(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:s}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:s});return i&&i.length?[{idx:r,item:e,matches:i}]:[]}switch(t.operator){case mn:{const s=[];for(let i=0,c=t.children.length;i<c;i+=1){const c=t.children[i],o=n(c,e,r);if(!o.length)return[];s.push(...o)}return s}case pn:{const s=[];for(let i=0,c=t.children.length;i<c;i+=1){const c=t.children[i],o=n(c,e,r);if(o.length){s.push(...o);break}}return s}}},r=this._myIndex.records,s={},i=[];return r.forEach((({$:t,i:r})=>{if(Je(t)){let c=n(e,t,r);c.length&&(s[r]||(s[r]={idx:r,item:t,matches:[]},i.push(s[r])),c.forEach((({matches:t})=>{s[r].matches.push(...t)})))}})),i}_searchObjectList(t){const e=fn(t,this.options),{keys:n,records:r}=this._myIndex,s=[];return r.forEach((({$:t,i:r})=>{if(!Je(t))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),i.length&&s.push({idx:r,item:t,matches:i})})),s}_findMatches({key:t,value:e,searcher:n}){if(!Je(e))return[];let r=[];if(Ne(e))e.forEach((({v:e,i:s,n:i})=>{if(!Je(e))return;const{isMatch:c,score:o,indices:l}=n.searchIn(e);c&&r.push({score:o,key:t,value:e,idx:s,norm:i,indices:l})}));else{const{v:s,n:i}=e,{isMatch:c,score:o,indices:l}=n.searchIn(s);c&&r.push({score:o,key:t,value:s,norm:i,indices:l})}return r}}Mn.version="6.4.6",Mn.createIndex=Ue,Mn.parseIndex=function(t,{getFn:e=Ze.getFn}={}){const{keys:n,records:r}=t,s=new Qe({getFn:e});return s.setKeys(n),s.setIndexRecords(r),s},Mn.config=Ze,Mn.parseQuery=wn,function(...t){hn.push(...t)}(dn);const kn={useExtendedSearch:!0,keys:["subject","preview"]};let _n=e(q,(t=>new Mn(t,kn))),Sn=t(""),Ln=t(!1),Cn=e([q,_n,Sn,Ln],(([t,e,n,r])=>n?e.search((r?"":"'")+n).map((t=>t.item)):t));function In(t){let e,n,r;return{c(){e=i("span"),n=c(t[0]),r=c("건"),l(e,"class","bg-red-100 rounded pr-1")},m(t,s){a(t,e,s),u(e,n),u(e,r)},p(t,e){1&e&&x(n,t[0])},d(t){t&&f(e)}}}function En(t){let e,n,r,s,c,o,h,$,x,v,b=t[3]&&In(t);return{c(){e=i("span"),n=i("label"),n.textContent="부분 일치",r=m(),s=i("input"),c=m(),o=i("input"),h=m(),b&&b.c(),$=p(),l(n,"for","fuzzy"),l(s,"id","fuzzy"),l(s,"type","checkbox"),l(e,"class","bg-red-100 rounded p-0.5 m-1"),l(o,"class","m-1 border-1 border-gray-400 rounded w-28"),l(o,"type","text"),l(o,"placeholder","검색")},m(i,l){a(i,e,l),u(e,n),u(e,r),u(e,s),s.checked=t[1],a(i,c,l),a(i,o,l),y(o,t[3]),a(i,h,l),b&&b.m(i,l),a(i,$,l),x||(v=[d(s,"change",t[4]),d(o,"change",t[5]),d(o,"input",t[6])],x=!0)},p(t,[e]){2&e&&(s.checked=t[1]),8&e&&o.value!==t[3]&&y(o,t[3]),t[3]?b?b.p(t,e):(b=In(t),b.c(),b.m($.parentNode,$)):b&&(b.d(1),b=null)},i:g,o:g,d(t){t&&f(e),t&&f(c),t&&f(o),t&&f(h),b&&b.d(t),t&&f($),x=!1,w(v)}}}function jn(t,e,n){let r,s,i;$(t,Ln,(t=>n(1,r=t))),$(t,U,(t=>n(2,s=t))),$(t,Sn,(t=>n(3,i=t)));let{search_length:c}=e;return t.$$set=t=>{"search_length"in t&&n(0,c=t.search_length)},[c,r,s,i,function(){r=this.checked,Ln.set(r)},()=>{v(U,s=1,s)},function(){i=this.value,Sn.set(i)}]}class An extends n{constructor(t){super(),r(this,t,jn,En,s,{search_length:0})}}function zn(t,e,n){const r=t.slice();return r[40]=e[n],r[42]=n,r}function On(t,e,n){const r=t.slice();return r[40]=e[n],r[42]=n,r}function Nn(t){let e,n,r,s,o,h,p,$=t[2]?"on":"off";return{c(){e=i("label"),n=c("리스트뷰 "),r=c($),s=m(),o=i("input"),l(o,"id","isListView"),l(o,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,c){a(i,e,c),u(e,n),u(e,r),u(e,s),u(e,o),o.checked=t[2],h||(p=d(o,"change",t[28]),h=!0)},p(t,e){4&e[0]&&$!==($=t[2]?"on":"off")&&x(r,$),4&e[0]&&(o.checked=t[2])},i:g,o:g,d(t){t&&f(e),h=!1,p()}}}function Rn(t){let e,n,r,s,o,h,g,$,x=t[4].value&&Fn(t);return{c(){e=i("label"),n=c("태그 목록 "),r=i("input"),s=m(),x&&x.c(),o=p(),l(r,"id","isListView"),l(r,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,c){a(i,e,c),u(e,n),u(e,r),r.checked=t[6],a(i,s,c),x&&x.m(i,c),a(i,o,c),h=!0,g||($=d(r,"change",t[27]),g=!0)},p(t,e){64&e[0]&&(r.checked=t[6]),t[4].value?x?(x.p(t,e),16&e[0]&&k(x,1)):(x=Fn(t),x.c(),k(x,1),x.m(o.parentNode,o)):x&&(j(),_(x,1,1,(()=>{x=null})),A())},i(t){h||(k(x),h=!0)},o(t){_(x),h=!1},d(t){t&&f(e),t&&f(s),x&&x.d(t),t&&f(o),g=!1,$()}}}function Fn(t){let e,n,r,s;return r=new ft({props:{tag:t[4],canDelete:!0,onRemove:t[11]}}),{c(){e=i("span"),e.textContent="현재 :",n=m(),b(r.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),M(r,t,i),s=!0},p(t,e){const n={};16&e[0]&&(n.tag=t[4]),r.$set(n)},i(t){s||(k(r.$$.fragment,t),s=!0)},o(t){_(r.$$.fragment,t),s=!1},d(t){t&&f(e),t&&f(n),S(r,t)}}}function Pn(t){let e,n,r,s,c;return n=new te({props:{id:"backup",onClick:t[13],$$slots:{default:[Dn]},$$scope:{ctx:t}}}),s=new te({props:{id:"backup",onClick:t[12],$$slots:{default:[Jn]},$$scope:{ctx:t}}}),{c(){e=i("div"),b(n.$$.fragment),r=m(),b(s.$$.fragment),l(e,"class","mb-1 flex flex-row")},m(t,i){a(t,e,i),M(n,e,null),u(e,r),M(s,e,null),c=!0},p(t,e){const r={};8192&e[1]&&(r.$$scope={dirty:e,ctx:t}),n.$set(r);const i={};8192&e[1]&&(i.$$scope={dirty:e,ctx:t}),s.$set(i)},i(t){c||(k(n.$$.fragment,t),k(s.$$.fragment,t),c=!0)},o(t){_(n.$$.fragment,t),_(s.$$.fragment,t),c=!1},d(t){t&&f(e),S(n),S(s)}}}function Dn(t){let e;return{c(){e=c("태그 불러오기⬇️")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Jn(t){let e;return{c(){e=c("태그 올리기⬆️")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Bn(t){let e,n,r=t[7],s=[];for(let e=0;e<r.length;e+=1)s[e]=Vn(zn(t,r,e));const c=t=>_(s[t],1,1,(()=>{s[t]=null}));return{c(){e=i("ul");for(let t=0;t<s.length;t+=1)s[t].c();l(e,"id","MailItemList"),o(e,"max-width","728px"),l(e,"class","bg-white rounded shadow-xl mb-3")},m(t,r){a(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,n){if(226&n[0]){let i;for(r=t[7],i=0;i<r.length;i+=1){const c=zn(t,r,i);s[i]?(s[i].p(c,n),k(s[i],1)):(s[i]=Vn(c),s[i].c(),k(s[i],1),s[i].m(e,null))}for(j(),i=r.length;i<s.length;i+=1)c(i);A()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)k(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)_(s[t]);n=!1},d(t){t&&f(e),z(s,t)}}}function Tn(t){let e,n,r=t[7],s=[];for(let e=0;e<r.length;e+=1)s[e]=Hn(On(t,r,e));const c=t=>_(s[t],1,1,(()=>{s[t]=null}));return{c(){e=i("div");for(let t=0;t<s.length;t+=1)s[t].c();l(e,"id","MailCardView"),l(e,"class","\r\n        mb-3 flex flex-wrap")},m(t,r){a(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,n){if(128&n[0]){let i;for(r=t[7],i=0;i<r.length;i+=1){const c=On(t,r,i);s[i]?(s[i].p(c,n),k(s[i],1)):(s[i]=Hn(c),s[i].c(),k(s[i],1),s[i].m(e,null))}for(j(),i=r.length;i<s.length;i+=1)c(i);A()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)k(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)_(s[t]);n=!1},d(t){t&&f(e),z(s,t)}}}function Vn(t){let e,n;return e=new Le({props:{index:t[42],pm:t[40],hidden:t[5]&&(t[1]<400||t[6])&&t[42]>0}}),{c(){b(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};128&n[0]&&(r.pm=t[40]),98&n[0]&&(r.hidden=t[5]&&(t[1]<400||t[6])&&t[42]>0),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Hn(t){let e,n;return e=new Oe({props:{pm:t[40],index:t[42]}}),{c(){b(e.$$.fragment)},m(t,r){M(e,t,r),n=!0},p(t,n){const r={};128&n[0]&&(r.pm=t[40]),e.$set(r)},i(t){n||(k(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Kn(t){let e,n,r,s,c,d,h,p,g,$,x,y,w,v,L,z,O,N,F,P,D;const J=[Rn,Nn],B=[];function T(t,e){return t[5]?0:1}r=T(t),s=B[r]=J[r](t);let V=t[5]&&Pn(t);p=new Ut({});const H=[Tn,Bn],K=[];function W(t,e){return!t[2]&&t[10]?0:1}return $=W(t),x=K[$]=H[$](t),w=new $e({props:{maxPage:t[8]}}),O=new An({props:{search_length:t[3].length}}),{c(){e=i("section"),n=i("div"),s.c(),c=m(),V&&V.c(),d=m(),h=i("div"),b(p.$$.fragment),g=m(),x.c(),y=m(),b(w.$$.fragment),v=m(),L=i("br"),z=m(),b(O.$$.fragment),l(n,"class","mb-1 flex flex-row"),l(h,"class","\r\n    h-36 p-2 mb-3\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),R(h,"hidden",!(t[5]&&t[6])),l(e,"id","MailListSection"),o(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),l(e,"class",N="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2"),C((()=>t[29].call(e))),R(e,"hidden",t[5]&&!t[9])},m(s,i){a(s,e,i),u(e,n),B[r].m(n,null),u(e,c),V&&V.m(e,null),u(e,d),u(e,h),M(p,h,null),u(e,g),K[$].m(e,null),u(e,y),M(w,e,null),u(e,v),u(e,L),u(e,z),M(O,e,null),F=E(e,t[29].bind(e)),D=!0},p(t,i){let c=r;r=T(t),r===c?B[r].p(t,i):(j(),_(B[c],1,1,(()=>{B[c]=null})),A(),s=B[r],s?s.p(t,i):(s=B[r]=J[r](t),s.c()),k(s,1),s.m(n,null)),t[5]?V?(V.p(t,i),32&i[0]&&k(V,1)):(V=Pn(t),V.c(),k(V,1),V.m(e,d)):V&&(j(),_(V,1,1,(()=>{V=null})),A()),96&i[0]&&R(h,"hidden",!(t[5]&&t[6]));let a=$;$=W(t),$===a?K[$].p(t,i):(j(),_(K[a],1,1,(()=>{K[a]=null})),A(),x=K[$],x?x.p(t,i):(x=K[$]=H[$](t),x.c()),k(x,1),x.m(e,y));const u={};256&i[0]&&(u.maxPage=t[8]),w.$set(u);const f={};8&i[0]&&(f.search_length=t[3].length),O.$set(f),(!D||100&i[0])&&o(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),(!D||1024&i[0]&&N!==(N="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2"))&&l(e,"class",N),1568&i[0]&&R(e,"hidden",t[5]&&!t[9])},i(t){D||(k(s),k(V),k(p.$$.fragment,t),k(x),k(w.$$.fragment,t),k(O.$$.fragment,t),C((()=>{P||(P=I(e,Pt,{x:200,duration:200},!0)),P.run(1)})),D=!0)},o(t){_(s),_(V),_(p.$$.fragment,t),_(x),_(w.$$.fragment,t),_(O.$$.fragment,t),P||(P=I(e,Pt,{x:200,duration:200},!1)),P.run(0),D=!1},d(t){t&&f(e),B[r].d(),V&&V.d(),S(p),K[$].d(),S(w),S(O),F(),t&&P&&P.end()}}}function Wn(t,e){fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>{console.log(e)})).catch((e=>{console.log(t+" 백업에 실패했습니다. 서버가 응답이 없습니다.")}))}function qn(t,e,n){let r,s,i,c,o,l,a,u,d,h,f,m,p,g,x,y,w,b,M,k,_,S,L;$(t,oe,(t=>n(14,p=t))),$(t,U,(t=>n(15,g=t))),$(t,rt,(t=>n(4,x=t))),$(t,ct,(t=>n(18,y=t))),$(t,Sn,(t=>n(21,w=t))),$(t,Cn,(t=>n(22,b=t))),$(t,tt,(t=>n(5,M=t))),$(t,H,(t=>n(35,k=t))),$(t,K,(t=>n(36,_=t))),$(t,X,(t=>n(9,S=t))),$(t,Y,(t=>n(10,L=t)));var C=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function c(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}l((r=r.apply(t,e||[])).next())}))};let I,E,j=1,A=3;P((()=>{const t=m[0];if((j!=g||I!=p&&t)&&(E=t,j=g),A!=u&&E){let t=0;return o.forEach(((t,e)=>{})),v(U,g=Math.ceil((t+1)/u),g),j=g,A=u,null}if(r>new Date)return v(oe,p=le(new Date),p),alert("미래로 갈 수는 없습니다."),null;if(!x.value||0==m.length)return null;if(I!=p){let t=!1;if(o.forEach(((e,n)=>{if(t)return null;const s=ue(e.time);ae(s)<=r&&(v(U,g=Math.ceil((n+1)/u),g),v(oe,p=s,p),t=!0)})),0==t){v(U,g=d,g);const t=o[o.length-1];v(oe,p=ue(t.time),p)}return I=p,null}const e=ue(m[0].time);v(oe,p=e,p),I=e}));const z=t=>{const e=t.time.split(" ")[0];"string"!=typeof e&&console.log(e);try{return e.replace(/\//g,"-")==p}catch(t){console.error(t),console.log(e)}return!0},O=t=>!0;let N,R,F=!1,D=!1;return t.$$.update=()=>{16384&t.$$.dirty[0]&&(r=ae(p)),262160&t.$$.dirty[0]&&n(17,s=y.get(x)),131072&t.$$.dirty[0]&&n(19,i=t=>s.has(t.id)),2637840&t.$$.dirty[0]&&n(20,c=x.value&&i||w&&O||p&&z||O),5242880&t.$$.dirty[0]&&n(3,o=b.filter(c)),1&t.$$.dirty[0]&&n(23,l=Math.floor((N-33)/280)),2&t.$$.dirty[0]&&n(24,a=Math.floor((R-220)/164)),25165862&t.$$.dirty[0]&&n(16,u=M?5:F?Math.floor((R-200)/62):l*a),65544&t.$$.dirty[0]&&n(8,d=Math.ceil(o.length/u)),98304&t.$$.dirty[0]&&n(25,h=(g-1)*u),33619976&t.$$.dirty[0]&&n(26,f=()=>{const t=o.slice(h,h+u);return t.length<u?t.concat(Array(u-t.length).fill({id:"",member:"",time:"",subject:"",preview:""})):t}),67108872&t.$$.dirty[0]&&n(7,m=o&&f())},[N,R,F,o,x,M,D,m,d,S,L,()=>{v(rt,x=J,x),v(U,g=1,g)},()=>{Wn("/all-tag-dict/",{tag_list:[...k].map((t=>t[1]))}),Wn("/mail-tag-dict/",{mail_to_tag_dict:W(_),tag_to_mail_dict:ot(y)})},()=>C(void 0,void 0,void 0,(function*(){const t=yield fetch("/all-tag-dict/").then((t=>t.json())).then((t=>t.tag_list)),e=yield fetch("/mail-tag-dict/").then((t=>t.json())),n=e.tag_to_mail_dict,r=e.mail_to_tag_dict;v(rt,x=J,x),v(H,k=t.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",B]])),k),console.log("all_tag_dict 백업 다운로드 완료"),v(ct,y=it(n),y),v(K,_=V(r),_),console.log("mail_tag_dict 백업 다운로드 완료")})),p,g,u,s,y,i,c,w,b,l,a,h,f,function(){D=this.checked,n(6,D)},function(){F=this.checked,n(2,F)},function(){N=this.clientWidth,R=this.clientHeight,n(0,N),n(1,R)}]}class Zn extends n{constructor(t){super(),r(this,t,qn,Kn,s,{},[-1,-1])}}function Gn(t){let e,n,r,s;return e=new ce({}),r=new Zn({}),{c(){b(e.$$.fragment),n=m(),b(r.$$.fragment)},m(t,i){M(e,t,i),a(t,n,i),M(r,t,i),s=!0},i(t){s||(k(e.$$.fragment,t),k(r.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),_(r.$$.fragment,t),s=!1},d(t){S(e,t),t&&f(n),S(r,t)}}}function Qn(t){let e,n,r,s=t[1]&&Gn();return{c(){e=i("div"),s&&s.c(),l(e,"class","flex w-screen h-screen relative"),C((()=>t[4].call(e)))},m(i,c){a(i,e,c),s&&s.m(e,null),n=E(e,t[4].bind(e)),r=!0},p(t,[n]){t[1]?s?2&n&&k(s,1):(s=Gn(),s.c(),k(s,1),s.m(e,null)):s&&(j(),_(s,1,1,(()=>{s=null})),A())},i(t){r||(k(s),r=!0)},o(t){_(s),r=!1},d(t){t&&f(e),s&&s.d(),n()}}}function Un(t,e,n){let r,s,i,c,o,l,a;$(t,ct,(t=>n(2,s=t))),$(t,K,(t=>n(3,i=t))),$(t,xt,(t=>n(7,c=t))),$(t,q,(t=>n(8,o=t))),$(t,Z,(t=>n(9,l=t))),$(t,H,(t=>n(10,a=t)));var u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function c(t){try{l(r.next(t))}catch(t){i(t)}}function o(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,o)}l((r=r.apply(t,e||[])).next())}))};D.title="IZ*ONE Private Mail Viewer";let d=!1;const h=(t,e)=>{try{console.log(`${e}차 시도`),console.log(t.slice(0,10));const n=[];for(let e=0;e<t.length;e+=2)n.push(t[e]);return JSON.parse(n.join(""))}catch(n){if(e<4)return t=t.slice(1),h(t,e+1);throw n}},f=t=>u(void 0,void 0,void 0,(function*(){try{const e=yield fetch(t);return yield e.json()}catch(e){console.log("json 로드 실패");const n=yield fetch(t),r=yield n.text();return h(r,0)}}));let m;return function(){return u(this,void 0,void 0,(function*(){console.log("메일 리스트 로딩 시작");const t=yield f("./pm_list.json");console.log("메일 리스트 로딩 완료"),console.log("이름 dict 로딩 시작"),v(xt,c=yield f("./member_name.json"),c),console.log("이름 dict 로딩 끝"),console.log(c);const e=yield fetch("./mail_to_num_dict.json"),n=yield e.json();v(q,o=t.map(((t,e)=>{"m20731"==t.id&&v(Z,l=t,l),t.nick=t.member;const r=c[t.member];if(t.member=yt[r],!t.member&&e<5700){const e=n[t.id];v(xt,c[t.nick]=e,c),t.member=yt[e],console.log(t.nick,t.member)}return t})),o),console.log("all_tag_dict",a);let u=0;const d=a.get("혼다 히토미");if(s.has(d)&&(o.forEach((t=>{const e=a.get(t.member),n=s.get(e);n?n.add(t.id):(console.log(t.id,t.nick),u+=1)})),ct.set(s)),console.log("누락",u),!a.has("생일")){const t={value:"생일",color:"LightPink"};a.set(t.value,t),H.set(a),s.set(t,new Set),o.map((e=>{"b"==e.id.slice(0,1)&&r(t,e)})),ct.set(s),K.set(i)}}))}().then((()=>{n(1,d=!0)})),t.$$.update=()=>{12&t.$$.dirty&&(r=(t,e)=>{s.get(t).add(e.id),i.has(e.id)?i.get(e.id).add(t):i.set(e.id,new Set([t]))}),1&t.$$.dirty&&Y.set(m>800)},[m,d,s,i,function(){m=this.clientWidth,n(0,m)}]}export default class extends n{constructor(t){super(),r(this,t,Un,Qn,s,{})}}
//# sourceMappingURL=index-747f61d5.js.map
