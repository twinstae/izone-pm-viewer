import{w as t,h as e,S as n,i as r,s,e as i,t as o,j as c,b as l,c as a,d as u,l as d,k as h,f,a as p,m,n as g,g as $,o as y,p as w,r as x,q as v,v as b,x as k,y as M,z as _,A as C,B as S,C as L,D as O,E as I,F as E,G as j,H as B,I as A,J as z,K as P,L as W,M as N,N as R,O as F,P as D,Q as T,R as J}from"./main.js";const V={value:null,color:null},H={value:"💖",color:"#fff"},K=[{value:"권은비",color:"#bbb0dc"},{value:"미야와키 사쿠라",color:"#f1d2e7"},{value:"강혜원",color:"#db706c"},{value:"최예나",color:"#fcf695"},{value:"이채연",color:"#a7e0e1"},{value:"김채원",color:"#cee5d5"},{value:"야부키 나코",color:"#b7d3e9"},{value:"혼다 히토미",color:"#f1c3aa"},{value:"김민주",color:"#fff"},{value:"조유리",color:"#f3aa51"},{value:"안유진",color:"#567ace"},{value:"장원영",color:"#d9598c"},{value:"운영팀",color:"gray"}];let q,Z=t(function(){let t=K.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",H]]));const e=localStorage.getItem("all_tag_dict");return e&&(console.log("all tag backup loaded"),t=[...t].reduce(((t,e)=>(t.set(e[0],e[1]),t)),new Map(JSON.parse(e)))),t}());Z.subscribe((t=>{var e;localStorage.setItem("all_tag_dict",(e=t,JSON.stringify([...e])))})),Z.subscribe((t=>{q=e=>{const n=e.map((e=>[e[0],new Set(e[1].map((e=>t.get(e))))]));return new Map(n)}}));let Q=t((()=>{const t=localStorage.getItem("mail_to_tag_dict");let e=new Map([["m0",new Set([H])]]);if(t){const n=JSON.parse(t);e=q(n)}return e})());function G(t){return[...t].map((t=>[t[0],[...t[1]].map((t=>t.value))]))}Q.subscribe((t=>{if(!t)return null;[...t].forEach((t=>{0==t[1].size&&Q.update((e=>(e.delete(t[0]),e)))}));const e=G(t);localStorage.setItem("mail_to_tag_dict",JSON.stringify(e))}));let U=t([{id:"",member:"",time:"",subject:"",preview:"",n:1}]),X=t({id:"m20731",member:"광배",time:"2021/03/09 19:23",subject:"사탕",preview:"위즈원 사탕 푸딩 맛 있는거 알았어?? 맛있어보여서 사서 언제먹을지 고민중이야 ."});let Y=t(""),tt=e(Y,(t=>"https://papago.naver.com/?sk=ja&tk=ko&hn=1&st="+t.replace(/\&nbsp;<\/div>/g,"\n").replace(/<\/div>/g,"\n").replace(/&nbsp;/g,"").replace(/<(\/)?([a-zA-Z]*)(\s[a-zA-Z]*=[^>]*)?(\s)*(\/)?>/gi,"").replace(/\n\n/g,"\n").replace(/\n/g,"%0A"))),et=t(1),nt=t(!0),rt=t(!0),st=e(rt,(t=>!t)),it=t(""),ot=t(Math.floor(12*Math.random())),ct=t({color:null,value:null});const lt=t=>()=>{ct.set(t),et.set(1)};let at;Z.subscribe((t=>{at=e=>new Map(e.map((e=>[t.get(e[0]),new Set(e[1])])))}));let ut=t((()=>{let t=K.reduce(((t,e)=>(t.set(e,new Set),t)),new Map([[H,new Set]]));const e=localStorage.getItem("tag_to_mail_dict");if(e){const n=JSON.parse(e);t=[...at(n)].reduce(((t,e)=>(t.set(e[0],e[1]),t)),t)}return t})());function dt(t){return[...t].map((t=>[t[0].value,[...t[1]]]))}function ht(t){let e,n=t[0].value+"";return{c(){e=o(n)},m(t,n){a(t,e,n)},p(t,r){1&r&&n!==(n=t[0].value+"")&&y(e,n)},d(t){t&&f(e)}}}function ft(t){let e,n,r;return{c(){e=i("img"),l(e,"class",n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none"),e.src!==(r="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","파파고 번역하기")},m(t,n){a(t,e,n)},p(t,r){4&r&&n!==(n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none")&&l(e,"class",n)},d(t){t&&f(e)}}}function pt(t){let e,n,r,s,p;return{c(){e=i("span"),n=o("X"),c(e,"background-color",t[0].color),l(e,"class",r="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])},m(r,i){a(r,e,i),u(e,n),s||(p=d(e,"click",(function(){h(t[3]?t[3]:t[5])&&(t[3]?t[3]:t[5]).apply(this,arguments)})),s=!0)},p(n,s){t=n,1&s&&c(e,"background-color",t[0].color),5&s&&r!==(r="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])&&l(e,"class",r)},d(t){t&&f(e),s=!1,p()}}}function mt(t){let e,n,r,s,o,u;function $(t,e){return"💖"==t[0].value?ft:ht}let y=$(t),w=y(t),x=(t[3]||t[1]&&"생일"!=t[0].value)&&pt(t);return{c(){e=i("span"),w.c(),r=p(),x&&x.c(),s=m(),c(e,"background-color",t[0].color),l(e,"class",n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\n"+(t[1]?"mt-1 ml-1 mb-1 rounded-l border-r-0 pr-2":"m-1 rounded")+"\r\ntext-"+t[2]+" text-"+t[4])},m(n,i){a(n,e,i),w.m(e,null),a(n,r,i),x&&x.m(n,i),a(n,s,i),o||(u=d(e,"click",(function(){h(t[3]?t[3]:lt(t[0]))&&(t[3]?t[3]:lt(t[0])).apply(this,arguments)})),o=!0)},p(r,[i]){y===(y=$(t=r))&&w?w.p(t,i):(w.d(1),w=y(t),w&&(w.c(),w.m(e,null))),1&i&&c(e,"background-color",t[0].color),23&i&&n!==(n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\n"+(t[1]?"mt-1 ml-1 mb-1 rounded-l border-r-0 pr-2":"m-1 rounded")+"\r\ntext-"+t[2]+" text-"+t[4])&&l(e,"class",n),t[3]||t[1]&&"생일"!=t[0].value?x?x.p(t,i):(x=pt(t),x.c(),x.m(s.parentNode,s)):x&&(x.d(1),x=null)},i:g,o:g,d(t){t&&f(e),w.d(),t&&f(r),x&&x.d(t),t&&f(s),o=!1,u()}}}function gt(t,e,n){let r,s,i,o,c,l;$(t,Z,(t=>n(6,i=t))),$(t,X,(t=>n(7,o=t))),$(t,ut,(t=>n(8,c=t))),$(t,Q,(t=>n(9,l=t)));var a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function c(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((r=r.apply(t,e||[])).next())}))};let{tag:u}=e,{canDelete:d=!1}=e,{size:h="xs"}=e,{onRemove:f}=e;return t.$$set=t=>{"tag"in t&&n(0,u=t.tag),"canDelete"in t&&n(1,d=t.canDelete),"size"in t&&n(2,h=t.size),"onRemove"in t&&n(3,f=t.onRemove)},t.$$.update=()=>{1&t.$$.dirty&&n(4,r="강혜원"==u.value||"장원영"==u.value||"안유진"==u.value||"운영팀"==u.value?"black":"gray-700"),961&t.$$.dirty&&n(5,s=()=>a(void 0,void 0,void 0,(function*(){const t=i.get(u.value);yield fetch(`/mail-tag-dict/mail/${o.id}/tag/${t.value}`,{method:"DELETE"}),c.get(t).delete(o.id),ut.set(c),l.get(o.id).delete(t),Q.set(l)})))},[u,d,h,f,r,s,i,o,c,l]}ut.subscribe((t=>{if([...t].forEach((([t,e])=>{if(0==e.size&&"💖"!=t.value&&!K.includes(t)){const e=t.value;ut.update((e=>(e.delete(t),e))),Z.update((t=>(t.delete(e),fetch(`/all-tag-dict/tag/${e}`,{method:"DELETE"}).then((t=>{console.log("서버에서 태그 삭제 완료")})),t))),ct.update((e=>e==t?{color:null,value:null}:e))}})),!t)return null;const e=dt(t);localStorage.setItem("tag_to_mail_dict",JSON.stringify(e))}));class $t extends n{constructor(t){super(),r(this,t,gt,mt,s,{tag:0,canDelete:1,size:2,onRemove:3})}}function yt(t){let e,n,r;return{c(){e=i("span"),n=o(t[0]),c(e,"background-color","pink"),l(e,"class",r="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])},m(t,r){a(t,e,r),u(e,n)},p(t,[s]){1&s&&y(n,t[0]),2&s&&r!==(r="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])&&l(e,"class",r)},i:g,o:g,d(t){t&&f(e)}}}function wt(t,e,n){let{time:r}=e,{size:s="xs"}=e;return t.$$set=t=>{"time"in t&&n(0,r=t.time),"size"in t&&n(1,s=t.size)},[r,s]}class xt extends n{constructor(t){super(),r(this,t,wt,yt,s,{time:0,size:1})}}const vt={0:"#d9598c",1:"#f1d2e7",2:"#f3aa51",3:"#fcf695",4:"#567ace",5:"#b7d3e9",6:"#bbb0dc",7:"#db706c",8:"#f1c3aa",9:"#cee5d5",10:"#fff",11:"#a7e0e1",12:"gray"};let bt=t({});e(bt,(t=>Object.keys(t).reduce(((t,e)=>({...t,[bt[e]]:e})),{0:"장원영"})));const kt={0:"장원영",1:"미야와키 사쿠라",2:"조유리",3:"최예나",4:"안유진",5:"야부키 나코",6:"권은비",7:"강혜원",8:"혼다 히토미",9:"김채원",10:"김민주",11:"이채연",12:"운영팀"};function Mt(t){let e,n,r;return{c(){e=i("button"),e.textContent="추가",l(e,"class","text-xs shadow rounded bg-red-400 p-1 m-1")},m(s,i){a(s,e,i),n||(r=d(e,"click",t[2]),n=!0)},p:g,d(t){t&&f(e),n=!1,r()}}}function _t(t){let e,n,r,s,o,c=t[1]&&Mt(t);return{c(){e=i("input"),n=p(),c&&c.c(),r=m(),l(e,"type","text"),l(e,"class","\r\nborder-2 border-gray\r\nm-1 p-1\r\nrounded w-16\r\ntext-xs"),l(e,"placeholder","새 태그")},m(i,l){a(i,e,l),w(e,t[0]),a(i,n,l),c&&c.m(i,l),a(i,r,l),s||(o=[d(e,"input",t[5]),d(e,"keypress",t[3])],s=!0)},p(t,[n]){1&n&&e.value!==t[0]&&w(e,t[0]),t[1]?c?c.p(t,n):(c=Mt(t),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},i:g,o:g,d(t){t&&f(e),t&&f(n),c&&c.d(t),t&&f(r),s=!1,x(o)}}}function Ct(t,e,n){let r,s,i,o,c,l,a,u;$(t,it,(t=>n(0,s=t))),$(t,ot,(t=>n(4,i=t))),$(t,Z,(t=>n(7,o=t))),$(t,ut,(t=>n(8,c=t))),$(t,X,(t=>n(9,l=t))),$(t,Q,(t=>n(10,a=t))),$(t,st,(t=>n(1,u=t)));var d=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function c(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((r=r.apply(t,e||[])).next())}))};const h=()=>d(void 0,void 0,void 0,(function*(){let t=r;o.has(s)?(t=o.get(s),c.get(t).add(l.id)):(c.set(r,new Set([l.id])),o.set(s,r),Z.set(o),yield fetch("/all-tag-dict/tag",{method:"POST",body:JSON.stringify(r)})),ut.set(c),a.has(l.id)?a.get(l.id).add(t):a.set(l.id,new Set([t])),Q.set(a),fetch(`/mail-tag-dict/mail/${l.id}/tag/${r.value}`,{method:"POST"}).then((t=>{console.log("서버에 태그 추가 완료.")})),v(it,s="",s),v(ot,i=(i+1)%12,i)}));return t.$$.update=()=>{17&t.$$.dirty&&(r={value:s,color:vt[i]})},[s,u,h,t=>{"Enter"===t.code&&h()},i,function(){s=this.value,it.set(s)}]}class St extends n{constructor(t){super(),r(this,t,Ct,_t,s,{})}}function Lt(t){let e,n;return{c(){e=i("img"),l(e,"class","w-6 h-6 float-left"),e.src!==(n="./img/empty-star.png")&&l(e,"src","./img/empty-star.png"),l(e,"alt","좋아요 하실래요?")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Ot(t){let e,n;return{c(){e=i("img"),l(e,"class","w-6 h-6 float-left"),e.src!==(n="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","좋아요 했어요")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function It(t){let e,n,r,s,o,c;function u(t,e){return(null==n||3&e)&&(n=!!t[1](t[0])),n?Ot:Lt}let m=u(t,-1),$=m(t);return{c(){e=i("label"),$.c(),r=p(),s=i("input"),l(e,"class","text-xl"),l(e,"for","favorite"),l(s,"type","checkbox"),l(s,"class","hidden"),l(s,"id","favorite")},m(n,i){a(n,e,i),$.m(e,null),a(n,r,i),a(n,s,i),o||(c=d(e,"click",(function(){h(t[2](t[0]))&&t[2](t[0]).apply(this,arguments)})),o=!0)},p(n,[r]){m!==(m=u(t=n,r))&&($.d(1),$=m(t),$&&($.c(),$.m(e,null)))},i:g,o:g,d(t){t&&f(e),$.d(),t&&f(r),t&&f(s),o=!1,c()}}}function Et(t,e,n){let r,s,i,o,c;$(t,Z,(t=>n(4,o=t))),$(t,ut,(t=>n(5,c=t)));let{pm:l}=e;return t.$$set=t=>{"pm"in t&&n(0,l=t.pm)},t.$$.update=()=>{16&t.$$.dirty&&n(3,r=o.get("💖")),40&t.$$.dirty&&n(2,i=t=>()=>{const e=c.get(r);e.has(t.id)?e.delete(t.id):e.add(t.id),ut.set(c)}),40&t.$$.dirty&&n(1,s=t=>c.get(r).has(t.id))},[l,s,i,r,o,c]}class jt extends n{constructor(t){super(),r(this,t,Et,It,s,{pm:0})}}function Bt(t){let e,n;return e=new $t({props:{tag:t[1],size:t[0]}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[n]){const r={};2&n&&(r.tag=t[1]),1&n&&(r.size=t[0]),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function At(t,e,n){let r,s;$(t,Z,(t=>n(3,s=t)));let{pm:i}=e,{size:o="xs"}=e;return t.$$set=t=>{"pm"in t&&n(2,i=t.pm),"size"in t&&n(0,o=t.size)},t.$$.update=()=>{12&t.$$.dirty&&n(1,r=s.get(i.member))},[o,r,i,s]}class zt extends n{constructor(t){super(),r(this,t,At,Bt,s,{pm:2,size:0})}}let Pt=t(function(){const t=localStorage.getItem("preferences-profile");return t||"latest"}());function Wt(t,e,n){const r=t.slice();return r[4]=e[n],r}function Nt(t){let e,n,r,s,c,h,m,g=t[4].name+"";return{c(){e=i("label"),n=i("input"),r=p(),s=o(g),c=p(),l(n,"type","radio"),n.__value=t[4].path,n.value=n.__value,t[3][0].push(n)},m(i,o){a(i,e,o),u(e,n),n.checked=n.__value===t[0],u(e,r),u(e,s),u(e,c),h||(m=d(n,"change",t[2]),h=!0)},p(t,e){1&e&&(n.checked=n.__value===t[0])},d(r){r&&f(e),t[3][0].splice(t[3][0].indexOf(n),1),h=!1,m()}}}function Rt(t){let e,n,r,s=t[1],o=[];for(let e=0;e<s.length;e+=1)o[e]=Nt(Wt(t,s,e));return{c(){e=i("h3"),e.textContent="프로필 사진을 변경합니다.",n=p(),r=i("div");for(let t=0;t<o.length;t+=1)o[t].c();l(e,"class","svelte-qli48t"),l(r,"class","flex flex-col p-4")},m(t,s){a(t,e,s),a(t,n,s),a(t,r,s);for(let t=0;t<o.length;t+=1)o[t].m(r,null)},p(t,[e]){if(3&e){let n;for(s=t[1],n=0;n<s.length;n+=1){const i=Wt(t,s,n);o[n]?o[n].p(i,e):(o[n]=Nt(i),o[n].c(),o[n].m(r,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=s.length}},i:g,o:g,d(t){t&&f(e),t&&f(n),t&&f(r),S(o,t)}}}function Ft(t,e,n){let r;$(t,Pt,(t=>n(0,r=t)));return[r,[{path:"la-vie-en-rose",name:"라비앙 로즈"},{path:"one-the-story",name:"One The Story 포스터"},{path:"latest",name:"최신 프메"}],function(){r=this.__value,Pt.set(r)},[[]]]}Pt.subscribe((t=>{localStorage.setItem("preferences-profile",t)}));class Dt extends n{constructor(t){super(),r(this,t,Ft,Rt,s,{})}}function Tt(t){let e,n,r,s;return{c(){e=i("img"),e.src!==(n="./img/"+t[1])&&l(e,"src",n),l(e,"class","w-10 h-10 ml-1 mt-1 mr-2 rounded-full float-left border-gray-200 border-1"),l(e,"alt","")},m(n,i){a(n,e,i),r||(s=[d(e,"mousedown",t[5]),d(e,"mouseup",t[6])],r=!0)},p(t,[r]){2&r&&e.src!==(n="./img/"+t[1])&&l(e,"src",n)},i:g,o:g,d(t){t&&f(e),r=!1,x(s)}}}function Jt(t,e,n){let r,s;$(t,Pt,(t=>n(4,s=t)));let{pm:i}=e;const{open:o}=L("simple-modal"),c=()=>{o(Dt,{})};let l;return t.$$set=t=>{"pm"in t&&n(3,i=t.pm)},t.$$.update=()=>{24&t.$$.dirty&&n(1,r="운영팀"==i.member?"izone-logo.png":`profile/${s}/${i.member}.jpg`)},[l,r,c,i,s,()=>{n(0,l=setTimeout(c,500))},t=>{clearTimeout(l)}]}class Vt extends n{constructor(t){super(),r(this,t,Jt,Tt,s,{pm:3})}}function Ht(t){const e=t-1;return e*e*e+1}function Kt(t,{delay:e=0,duration:n=400,easing:r=O}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:t=>"opacity: "+t*s}}function qt(t,{delay:e=0,duration:n=400,easing:r=Ht,x:s=0,y:i=0,opacity:o=0}={}){const c=getComputedStyle(t),l=+c.opacity,a="none"===c.transform?"":c.transform,u=l*(1-o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*s}px, ${(1-t)*i}px);\n\t\t\topacity: ${l-u*e}`}}function Zt(t,e,n){const r=t.slice();return r[14]=e[n],r}function Qt(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Gt(t){let e,n;return e=new $t({props:{tag:t[14],canDelete:!0,size:"sm"}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.tag=t[14]),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Ut(t){let e,n,r,s,o,c,h,m=t[7]&&Xt(t);return{c(){e=i("div"),n=i("div"),s=p(),m&&m.c(),l(n,"contenteditable","false"),void 0===t[4]&&I((()=>t[12].call(n))),l(e,"class","h-5/6 overflow-scroll p-1")},m(r,i){a(r,e,i),u(e,n),void 0!==t[4]&&(n.innerHTML=t[4]),u(e,s),m&&m.m(e,null),o=!0,c||(h=d(n,"input",t[12]),c=!0)},p(t,r){16&r&&t[4]!==n.innerHTML&&(n.innerHTML=t[4]),t[7]?m?m.p(t,r):(m=Xt(t),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i(t){o||(I((()=>{r||(r=E(n,Kt,{duration:200},!0)),r.run(1)})),o=!0)},o(t){r||(r=E(n,Kt,{duration:200},!1)),r.run(0),o=!1},d(t){t&&f(e),t&&r&&r.end(),m&&m.d(),c=!1,h()}}}function Xt(t){let e,n,r;return{c(){e=i("button"),e.textContent="목록으로 돌아가기🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mt-2")},m(s,i){a(s,e,i),n||(r=d(e,"click",t[13]),n=!0)},p:g,d(t){t&&f(e),n=!1,r()}}}function Yt(t){let e,n,r,s,d,h,m,g,$,w,x,v,L,O,E,z,P,W,N,R,F,D,T=t[2].subject+"";s=new Vt({props:{pm:t[2]}});let J=t[5]&&Qt();v=new jt({props:{pm:t[2]}}),E=new zt({props:{pm:t[2],size:"sm"}}),P=new xt({props:{time:t[2].time,size:"sm"}});let V=t[3],H=[];for(let e=0;e<V.length;e+=1)H[e]=Gt(Zt(t,V,e));const K=t=>_(H[t],1,1,(()=>{H[t]=null}));R=new St({});let q=t[4]&&Ut(t);return{c(){e=i("div"),n=i("div"),r=i("div"),b(s.$$.fragment),d=p(),h=i("h4"),m=o(T),$=p(),J&&J.c(),w=p(),x=i("div"),b(v.$$.fragment),L=p(),O=i("div"),b(E.$$.fragment),z=p(),b(P.$$.fragment),W=p();for(let t=0;t<H.length;t+=1)H[t].c();N=p(),b(R.$$.fragment),F=p(),q&&q.c(),l(h,"class","text-xl m-1 w-4/5"),l(r,"class","relative"),I((()=>t[11].call(r))),l(x,"class","absolute inset-y-0 right-0 m-1 h-8"),l(O,"class","flex flex-wrap"),l(n,"class","relative w-full"),c(e,"max-height",t[6]&&t[0]?"70%":"90%"),l(e,"class","\r\nshadow-2xl rounded-md bg-white \r\nw-full mt-2 p-2\r\nflex flex-col")},m(i,o){a(i,e,o),u(e,n),u(n,r),k(s,r,null),u(r,d),u(r,h),u(h,m),g=j(r,t[11].bind(r)),u(n,$),J&&J.m(n,null),u(n,w),u(n,x),k(v,x,null),u(n,L),u(n,O),k(E,O,null),u(O,z),k(P,O,null),u(O,W);for(let t=0;t<H.length;t+=1)H[t].m(O,null);u(O,N),k(R,O,null),u(e,F),q&&q.m(e,null),D=!0},p(t,[r]){const i={};4&r&&(i.pm=t[2]),s.$set(i),(!D||4&r)&&T!==(T=t[2].subject+"")&&y(m,T),t[5]?J||(J=Qt(),J.c(),J.m(n,w)):J&&(J.d(1),J=null);const o={};4&r&&(o.pm=t[2]),v.$set(o);const l={};4&r&&(l.pm=t[2]),E.$set(l);const a={};if(4&r&&(a.time=t[2].time),P.$set(a),8&r){let e;for(V=t[3],e=0;e<V.length;e+=1){const n=Zt(t,V,e);H[e]?(H[e].p(n,r),M(H[e],1)):(H[e]=Gt(n),H[e].c(),M(H[e],1),H[e].m(O,N))}for(B(),e=V.length;e<H.length;e+=1)K(e);A()}t[4]?q?(q.p(t,r),16&r&&M(q,1)):(q=Ut(t),q.c(),M(q,1),q.m(e,null)):q&&(B(),_(q,1,1,(()=>{q=null})),A()),(!D||65&r)&&c(e,"max-height",t[6]&&t[0]?"70%":"90%")},i(t){if(!D){M(s.$$.fragment,t),M(v.$$.fragment,t),M(E.$$.fragment,t),M(P.$$.fragment,t);for(let t=0;t<V.length;t+=1)M(H[t]);M(R.$$.fragment,t),M(q),D=!0}},o(t){_(s.$$.fragment,t),_(v.$$.fragment,t),_(E.$$.fragment,t),_(P.$$.fragment,t),H=H.filter(Boolean);for(let t=0;t<H.length;t+=1)_(H[t]);_(R.$$.fragment,t),_(q),D=!1},d(t){t&&f(e),C(s),g(),J&&J.d(),C(v),C(E),C(P),S(H,t),C(R),q&&q.d()}}}function te(t,e,n){let r,s,i,o,c,l,a,u,d;$(t,Q,(t=>n(9,o=t))),$(t,X,(t=>n(2,c=t))),$(t,Y,(t=>n(4,l=t))),$(t,rt,(t=>n(6,a=t))),$(t,st,(t=>n(7,u=t))),$(t,nt,(t=>n(8,d=t)));let h,{show:f}=e;return t.$$set=t=>{"show"in t&&n(0,f=t.show)},t.$$.update=()=>{516&t.$$.dirty&&n(3,r=o.has(c.id)?Array.from(o.get(c.id)):[]),4&t.$$.dirty&&n(10,s=()=>{v(Y,l="",l),async function(t){const e=await fetch(`./mail/${t}.html`).then((t=>t.text())),n=e.search('<div class="main-contents" id="mail-detail"><html><head></head><body>')+69,r=e.search("</body></html></div>");return e.slice(n,r)}(c.id).then((t=>{setTimeout((()=>{v(Y,l=t,l)}),100)}))}),1024&t.$$.dirty&&s(),2&t.$$.dirty&&n(5,i=h<40)},[f,h,c,r,l,i,a,u,d,o,s,function(){h=this.clientHeight,n(1,h)},function(){l=this.innerHTML,Y.set(l)},()=>{v(nt,d=!0,d)}]}class ee extends n{constructor(t){super(),r(this,t,te,Yt,s,{show:0})}}function ne(t,e,n){const r=t.slice();return r[5]=e[n],r}function re(t){let e,n;return e=new $t({props:{tag:t[5],size:t[1]?"xs":"sm"}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.tag=t[5]),2&n&&(r.size=t[1]?"xs":"sm"),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function se(t){let e,n,r=t[0],s=[];for(let e=0;e<r.length;e+=1)s[e]=re(ne(t,r,e));const o=t=>_(s[t],1,1,(()=>{s[t]=null}));return{c(){e=i("div");for(let t=0;t<s.length;t+=1)s[t].c();l(e,"class","flex flex-wrap")},m(t,r){a(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){if(3&n){let i;for(r=t[0],i=0;i<r.length;i+=1){const o=ne(t,r,i);s[i]?(s[i].p(o,n),M(s[i],1)):(s[i]=re(o),s[i].c(),M(s[i],1),s[i].m(e,null))}for(B(),i=r.length;i<s.length;i+=1)o(i);A()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)M(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)_(s[t]);n=!1},d(t){t&&f(e),S(s,t)}}}function ie(t,e,n){let r,s,i,o;return $(t,Z,(t=>n(2,s=t))),$(t,ct,(t=>n(3,i=t))),$(t,rt,(t=>n(1,o=t))),t.$$.update=()=>{4&t.$$.dirty&&n(0,r=Array.from(s.values()))},s.has(i.value)&&v(ct,i=V,i),[r,o,s]}class oe extends n{constructor(t){super(),r(this,t,ie,se,s,{})}}function ce(t){let e,n,r,s;const o=t[3].default,c=z(o,t,t[2],null);return{c(){e=i("button"),c&&c.c(),l(e,"id",t[1]),l(e,"class","rounded bg-red-100 m-2 pl-1 pr-1")},m(i,o){a(i,e,o),c&&c.m(e,null),n=!0,r||(s=d(e,"click",(function(){h(t[0])&&t[0].apply(this,arguments)})),r=!0)},p(r,[s]){t=r,c&&c.p&&4&s&&P(c,o,t,t[2],s,null,null),(!n||2&s)&&l(e,"id",t[1])},i(t){n||(M(c,t),n=!0)},o(t){_(c,t),n=!1},d(t){t&&f(e),c&&c.d(t),r=!1,s()}}}function le(t,e,n){let{$$slots:r={},$$scope:s}=e,{onClick:i}=e,{id:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,i=t.onClick),"id"in t&&n(1,o=t.id),"$$scope"in t&&n(2,s=t.$$scope)},[i,o,s,r]}class ae extends n{constructor(t){super(),r(this,t,le,ce,s,{onClick:0,id:1})}}function ue(t){let e,n,r;return{c(){e=i("button"),e.textContent="목록🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mr-1")},m(s,i){a(s,e,i),n||(r=d(e,"click",t[8]),n=!0)},p:g,d(t){t&&f(e),n=!1,r()}}}function de(t){let e,n,r,s,c;return{c(){e=i("label"),n=o("태그 목록 "),r=i("input"),l(r,"id","isListView"),l(r,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,r),r.checked=t[1],s||(c=d(r,"change",t[9]),s=!0)},p(t,e){2&e&&(r.checked=t[1])},d(t){t&&f(e),s=!1,c()}}}function he(t){let e,n,r,s;return r=new $t({props:{tag:t[2],canDelete:!0,onRemove:t[7]}}),{c(){e=i("span"),e.textContent="현재 :",n=p(),b(r.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),k(r,t,i),s=!0},p(t,e){const n={};4&e&&(n.tag=t[2]),r.$set(n)},i(t){s||(M(r.$$.fragment,t),s=!0)},o(t){_(r.$$.fragment,t),s=!1},d(t){t&&f(e),t&&f(n),C(r,t)}}}function fe(t){let e,n,r,s,d,h,m,g,$,y,w,x,v,S,L,O,z,P,N,R=t[3]&&ue(t),F=650>=t[0]&&t[5]&&de(t),D=t[2].value&&he(t);return v=new oe({}),L=new ee({props:{show:650<t[0]||t[1]}}),{c(){e=i("section"),n=i("div"),R&&R.c(),r=p(),s=i("div"),d=i("a"),h=o("번역"),m=i("img"),$=p(),F&&F.c(),y=p(),D&&D.c(),w=p(),x=i("div"),b(v.$$.fragment),S=p(),b(L.$$.fragment),l(m,"class","w-5 h-5 float-right"),m.src!==(g="./img/papago.png")&&l(m,"src","./img/papago.png"),l(m,"alt","파파고 번역하기"),l(d,"href",t[6]),l(d,"target","_blank"),l(s,"class","w-16 p-1 shadow rounded bg-red-100 mr-1"),l(n,"class","flex flex-row"),c(x,"min-height","43px"),l(x,"class","\r\n    h-36 mt-3 mb-3 p-2\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),W(x,"hidden",!((650<t[0]||t[1])&&t[5])),l(e,"class",O="h-full p-3 "+(t[5]?"w-4/12":"w-full")+" flex flex-col"),I((()=>t[10].call(e))),W(e,"hidden",t[3]&&t[4])},m(i,o){a(i,e,o),u(e,n),R&&R.m(n,null),u(n,r),u(n,s),u(s,d),u(d,h),u(d,m),u(n,$),F&&F.m(n,null),u(n,y),D&&D.m(n,null),u(e,w),u(e,x),k(v,x,null),u(e,S),k(L,e,null),z=j(e,t[10].bind(e)),N=!0},p(t,[s]){t[3]?R?R.p(t,s):(R=ue(t),R.c(),R.m(n,r)):R&&(R.d(1),R=null),(!N||64&s)&&l(d,"href",t[6]),650>=t[0]&&t[5]?F?F.p(t,s):(F=de(t),F.c(),F.m(n,y)):F&&(F.d(1),F=null),t[2].value?D?(D.p(t,s),4&s&&M(D,1)):(D=he(t),D.c(),M(D,1),D.m(n,null)):D&&(B(),_(D,1,1,(()=>{D=null})),A()),35&s&&W(x,"hidden",!((650<t[0]||t[1])&&t[5]));const i={};3&s&&(i.show=650<t[0]||t[1]),L.$set(i),(!N||32&s&&O!==(O="h-full p-3 "+(t[5]?"w-4/12":"w-full")+" flex flex-col"))&&l(e,"class",O),56&s&&W(e,"hidden",t[3]&&t[4])},i(t){N||(M(D),M(v.$$.fragment,t),M(L.$$.fragment,t),I((()=>{P||(P=E(e,qt,{x:-400,duration:400},!0)),P.run(1)})),N=!0)},o(t){_(D),_(v.$$.fragment,t),_(L.$$.fragment,t),P||(P=E(e,qt,{x:-400,duration:400},!1)),P.run(0),N=!1},d(t){t&&f(e),R&&R.d(),F&&F.d(),D&&D.d(),C(v),C(L),z(),t&&P&&P.end()}}}function pe(t,e,n){let r,s,i,o,c,l;$(t,ct,(t=>n(2,r=t))),$(t,et,(t=>n(11,s=t))),$(t,st,(t=>n(3,i=t))),$(t,nt,(t=>n(4,o=t))),$(t,rt,(t=>n(5,c=t))),$(t,tt,(t=>n(6,l=t)));let a,u;return[a,u,r,i,o,c,l,()=>{v(ct,r=V,r),v(et,s=1,s)},()=>{v(nt,o=!0,o)},function(){u=this.checked,n(1,u)},function(){a=this.clientHeight,n(0,a)}]}class me extends n{constructor(t){super(),r(this,t,pe,fe,s,{})}}let ge=t($e(new Date(2021,2,14)));function $e(t){let e=""+(t.getMonth()+1),n=""+t.getDate();const r=t.getFullYear();return e.length<2&&(e="0"+e),n.length<2&&(n="0"+n),[r,e,n].join("-")}function ye(t){const[e,n,r]=t.split("-").map((t=>parseInt(t)));return new Date(e,n-1,r)}const we=t=>t.split(" ")[0].replace(/\//g,"-");function xe(t){let e;return{c(){e=o("이전")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function ve(t){let e;return{c(){e=o("다음")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function be(t){let e;return{c(){e=o("어제")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function ke(t){let e;return{c(){e=o("내일")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Me(t){let e,n,r,s,c,h,m,g,$,v,S,L,O,I,E,j,B,A,z,P,R;return e=new ae({props:{id:"BackPageButton",onClick:t[6],$$slots:{default:[xe]},$$scope:{ctx:t}}}),v=new ae({props:{id:"NextPageButton",onClick:t[5],$$slots:{default:[ve]},$$scope:{ctx:t}}}),I=new ae({props:{onClick:t[3],$$slots:{default:[be]},$$scope:{ctx:t}}}),A=new ae({props:{onClick:t[4],$$slots:{default:[ke]},$$scope:{ctx:t}}}),{c(){b(e.$$.fragment),n=p(),r=i("span"),s=i("input"),c=p(),h=i("span"),m=o("/ "),g=o(t[0]),$=p(),b(v.$$.fragment),S=p(),L=i("br"),O=p(),b(I.$$.fragment),E=p(),j=i("input"),B=p(),b(A.$$.fragment),l(s,"id","NowPageInput"),l(s,"type","number"),l(s,"class","w-9"),l(s,"min","1"),l(s,"max",t[0]),W(s,"bg-red-300",t[0]<=t[1]),l(r,"id","NowPageSpan"),l(r,"class","bg-white border-2 border-gray-400 rounded w-24 p-1"),W(r,"bg-red-300",t[0]<=t[1]),W(r,"border-red-300",t[0]<=t[1]),l(j,"type","date"),l(j,"class","border-1 w-36 border-gray-400 rounded")},m(i,o){k(e,i,o),a(i,n,o),a(i,r,o),u(r,s),w(s,t[1]),u(r,c),u(r,h),u(h,m),u(h,g),a(i,$,o),k(v,i,o),a(i,S,o),a(i,L,o),a(i,O,o),k(I,i,o),a(i,E,o),a(i,j,o),w(j,t[2]),a(i,B,o),k(A,i,o),z=!0,P||(R=[d(s,"input",t[7]),d(j,"input",t[8])],P=!0)},p(t,[n]){const i={};1024&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i),(!z||1&n)&&l(s,"max",t[0]),2&n&&N(s.value)!==t[1]&&w(s,t[1]),3&n&&W(s,"bg-red-300",t[0]<=t[1]),(!z||1&n)&&y(g,t[0]),3&n&&W(r,"bg-red-300",t[0]<=t[1]),3&n&&W(r,"border-red-300",t[0]<=t[1]);const o={};1024&n&&(o.$$scope={dirty:n,ctx:t}),v.$set(o);const c={};1024&n&&(c.$$scope={dirty:n,ctx:t}),I.$set(c),4&n&&w(j,t[2]);const a={};1024&n&&(a.$$scope={dirty:n,ctx:t}),A.$set(a)},i(t){z||(M(e.$$.fragment,t),M(v.$$.fragment,t),M(I.$$.fragment,t),M(A.$$.fragment,t),z=!0)},o(t){_(e.$$.fragment,t),_(v.$$.fragment,t),_(I.$$.fragment,t),_(A.$$.fragment,t),z=!1},d(t){C(e,t),t&&f(n),t&&f(r),t&&f($),C(v,t),t&&f(S),t&&f(L),t&&f(O),C(I,t),t&&f(E),t&&f(j),t&&f(B),C(A,t),P=!1,x(R)}}}function _e(t,e,n){let r,s,i;$(t,ct,(t=>n(9,r=t))),$(t,et,(t=>n(1,s=t))),$(t,ge,(t=>n(2,i=t)));let{maxPage:o}=e;return t.$$set=t=>{"maxPage"in t&&n(0,o=t.maxPage)},[o,s,i,function(){if(r.value)return s<o&&v(et,s+=1,s),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),c=new Date(t,e-1,n-1);v(ge,i=$e(c),i),v(et,s=1,s)},function(){if(r.value)return s>1&&v(et,s-=1,s),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),o=new Date(t,e-1,n+1);v(ge,i=$e(o),i),v(et,s=1,s)},function(){s<o?v(et,s+=1,s):alert("마지막 페이지입니다.")},function(){s>1?v(et,s-=1,s):alert("시작 페이지입니다.")},function(){s=N(this.value),et.set(s)},function(){i=this.value,ge.set(i)}]}class Ce extends n{constructor(t){super(),r(this,t,_e,Me,s,{maxPage:0})}}function Se(t,e,n){const r=t.slice();return r[10]=e[n],r}function Le(t){let e;return{c(){e=i("span"),l(e,"class","\r\n        border-1 text-lg\r\n        rounded bg-white text-white")},m(t,n){a(t,e,n)},p:g,i:g,o:g,d(t){t&&f(e)}}}function Oe(t){let e,n,r,s,c,m,g,$,w,x,v,L,O,I,E,j,z,P,W=t[0].subject+"",N=(t[0].preview||"...")+"";e=new Vt({props:{pm:t[0]}}),s=new jt({props:{pm:t[0]}}),m=new zt({props:{pm:t[0]}}),$=new xt({props:{time:t[0].time}});let R=t[6]&&Ie(),F=t[4](t[0]),D=[];for(let e=0;e<F.length;e+=1)D[e]=Ee(Se(t,F,e));const T=t=>_(D[t],1,1,(()=>{D[t]=null}));return{c(){b(e.$$.fragment),n=p(),r=i("p"),b(s.$$.fragment),c=p(),b(m.$$.fragment),g=p(),b($.$$.fragment),w=p(),R&&R.c(),x=p(),v=o(W),L=p(),O=i("p");for(let t=0;t<D.length;t+=1)D[t].c();I=p(),E=o(N),l(r,"class","truncate"),l(O,"class","ml-1 mt-1 text-sm truncate")},m(i,o){k(e,i,o),a(i,n,o),a(i,r,o),k(s,r,null),u(r,c),k(m,r,null),u(r,g),k($,r,null),u(r,w),R&&R.m(r,null),u(r,x),u(r,v),a(i,L,o),a(i,O,o);for(let t=0;t<D.length;t+=1)D[t].m(O,null);u(O,I),u(O,E),j=!0,z||(P=d(O,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),z=!0)},p(n,i){t=n;const o={};1&i&&(o.pm=t[0]),e.$set(o);const c={};1&i&&(c.pm=t[0]),s.$set(c);const l={};1&i&&(l.pm=t[0]),m.$set(l);const a={};if(1&i&&(a.time=t[0].time),$.$set(a),t[6]?R||(R=Ie(),R.c(),R.m(r,x)):R&&(R.d(1),R=null),(!j||1&i)&&W!==(W=t[0].subject+"")&&y(v,W),17&i){let e;for(F=t[4](t[0]),e=0;e<F.length;e+=1){const n=Se(t,F,e);D[e]?(D[e].p(n,i),M(D[e],1)):(D[e]=Ee(n),D[e].c(),M(D[e],1),D[e].m(O,I))}for(B(),e=F.length;e<D.length;e+=1)T(e);A()}(!j||1&i)&&N!==(N=(t[0].preview||"...")+"")&&y(E,N)},i(t){if(!j){M(e.$$.fragment,t),M(s.$$.fragment,t),M(m.$$.fragment,t),M($.$$.fragment,t);for(let t=0;t<F.length;t+=1)M(D[t]);j=!0}},o(t){_(e.$$.fragment,t),_(s.$$.fragment,t),_(m.$$.fragment,t),_($.$$.fragment,t),D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)_(D[t]);j=!1},d(t){C(e,t),t&&f(n),t&&f(r),C(s),C(m),C($),R&&R.d(),t&&f(L),t&&f(O),S(D,t),z=!1,P()}}}function Ie(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Ee(t){let e,n;return e=new $t({props:{tag:t[10]}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,n){const r={};17&n&&(r.tag=t[10]),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function je(t){let e,n,r=t[0].member&&Be(t);return{c(){e=i("li"),r&&r.c(),l(e,"class","border-b-2 rounded w-full text-gray-500 truncate"),c(e,"font-size","10px"),c(e,"height","20px")},m(t,s){a(t,e,s),r&&r.m(e,null),n=!0},p(t,n){t[0].member?r?(r.p(t,n),1&n&&M(r,1)):(r=Be(t),r.c(),M(r,1),r.m(e,null)):r&&(B(),_(r,1,1,(()=>{r=null})),A())},i(t){n||(M(r),n=!0)},o(t){_(r),n=!1},d(t){t&&f(e),r&&r.d()}}}function Be(t){let e,n,r,s,c,l,d,h,m=t[0].subject+"",g=" "+t[0].preview;return e=new zt({props:{pm:t[0],size:""}}),r=new xt({props:{time:t[0].time,size:""}}),{c(){b(e.$$.fragment),n=p(),b(r.$$.fragment),s=p(),c=i("strong"),l=o(m),d=o(g)},m(t,i){k(e,t,i),a(t,n,i),k(r,t,i),a(t,s,i),a(t,c,i),u(c,l),a(t,d,i),h=!0},p(t,n){const s={};1&n&&(s.pm=t[0]),e.$set(s);const i={};1&n&&(i.time=t[0].time),r.$set(i),(!h||1&n)&&m!==(m=t[0].subject+"")&&y(l,m),(!h||1&n)&&g!==(g=" "+t[0].preview)&&y(d,g)},i(t){h||(M(e.$$.fragment,t),M(r.$$.fragment,t),h=!0)},o(t){_(e.$$.fragment,t),_(r.$$.fragment,t),h=!1},d(t){C(e,t),t&&f(n),C(r,t),t&&f(s),t&&f(c),t&&f(d)}}}function Ae(t){let e,n,r,s,o,d,h,g;const $=[Oe,Le],y=[];function w(t,e){return t[0].member?0:1}r=w(t),s=y[r]=$[r](t);let x=t[1]&&je(t);return{c(){e=i("li"),n=i("div"),s.c(),d=p(),x&&x.c(),h=m(),l(e,"id",o="MailItem-"+t[2]),c(e,"height",t[5]?"62px":"84px"),l(e,"class","border-b-2 rounded p-1 w-full"),W(e,"hidden",t[1])},m(t,s){a(t,e,s),u(e,n),y[r].m(n,null),a(t,d,s),x&&x.m(t,s),a(t,h,s),g=!0},p(t,[i]){let a=r;r=w(t),r===a?y[r].p(t,i):(B(),_(y[a],1,1,(()=>{y[a]=null})),A(),s=y[r],s?s.p(t,i):(s=y[r]=$[r](t),s.c()),M(s,1),s.m(n,null)),(!g||4&i&&o!==(o="MailItem-"+t[2]))&&l(e,"id",o),(!g||32&i)&&c(e,"height",t[5]?"62px":"84px"),2&i&&W(e,"hidden",t[1]),t[1]?x?(x.p(t,i),2&i&&M(x,1)):(x=je(t),x.c(),M(x,1),x.m(h.parentNode,h)):x&&(B(),_(x,1,1,(()=>{x=null})),A())},i(t){g||(M(s),M(x),g=!0)},o(t){_(s),_(x),g=!1},d(t){t&&f(e),y[r].d(),t&&f(d),x&&x.d(t),t&&f(h)}}}function ze(t,e,n){let r,s,i,o,c,l,a;$(t,X,(t=>n(8,i=t))),$(t,nt,(t=>n(9,o=t))),$(t,Q,(t=>n(7,c=t))),$(t,rt,(t=>n(5,l=t))),$(t,st,(t=>n(6,a=t)));let{pm:u}=e,{hidden:d}=e,{index:h}=e;return t.$$set=t=>{"pm"in t&&n(0,u=t.pm),"hidden"in t&&n(1,d=t.hidden),"index"in t&&n(2,h=t.index)},t.$$.update=()=>{1&t.$$.dirty&&n(3,r=()=>{u&&v(X,i=u,i),v(nt,o=!1,o)}),128&t.$$.dirty&&n(4,s=t=>c.has(t.id)?Array.from(c.get(t.id)):[])},[u,d,h,r,s,l,a,c]}class Pe extends n{constructor(t){super(),r(this,t,ze,Ae,s,{pm:0,hidden:1,index:2})}}function We(t,e,n){const r=t.slice();return r[7]=e[n],r}function Ne(t){let e,n;return{c(){e=i("img"),l(e,"class","ml-5 m-3 w-10/12"),l(e,"alt","no mail"),e.src!==(n="./img/izone-logo-card.png")&&l(e,"src","./img/izone-logo-card.png")},m(t,n){a(t,e,n)},p:g,i:g,o:g,d(t){t&&f(e)}}}function Re(t){let e,n,r,s,c,m,g,$,w,v,L,O,I,E,j,z,P,W,N,R,F=t[0].subject+"",D=t[0].preview+"";n=new Vt({props:{pm:t[0]}}),$=new jt({props:{pm:t[0]}}),L=new zt({props:{pm:t[0]}}),I=new xt({props:{time:t[0].time}});let T=t[2](t[0]),J=[];for(let e=0;e<T.length;e+=1)J[e]=Fe(We(t,T,e));const V=t=>_(J[t],1,1,(()=>{J[t]=null}));return{c(){e=i("div"),b(n.$$.fragment),r=p(),s=i("h4"),c=o(F),m=p(),g=i("div"),b($.$$.fragment),w=p(),v=i("div"),b(L.$$.fragment),O=p(),b(I.$$.fragment),E=p();for(let t=0;t<J.length;t+=1)J[t].c();j=p(),z=i("p"),P=o(D),l(s,"class","w-10/12 h-12"),l(g,"class","absolute inset-y-0 right-0 m-2"),l(v,"class","flex flex-wrap"),l(z,"class","m-1 text-sm")},m(i,o){a(i,e,o),k(n,e,null),u(e,r),u(e,s),u(s,c),a(i,m,o),a(i,g,o),k($,g,null),a(i,w,o),a(i,v,o),k(L,v,null),u(v,O),k(I,v,null),u(v,E);for(let t=0;t<J.length;t+=1)J[t].m(v,null);a(i,j,o),a(i,z,o),u(z,P),W=!0,N||(R=[d(e,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),d(z,"click",(function(){h(t[3])&&t[3].apply(this,arguments)}))],N=!0)},p(e,r){t=e;const s={};1&r&&(s.pm=t[0]),n.$set(s),(!W||1&r)&&F!==(F=t[0].subject+"")&&y(c,F);const i={};1&r&&(i.pm=t[0]),$.$set(i);const o={};1&r&&(o.pm=t[0]),L.$set(o);const l={};if(1&r&&(l.time=t[0].time),I.$set(l),5&r){let e;for(T=t[2](t[0]),e=0;e<T.length;e+=1){const n=We(t,T,e);J[e]?(J[e].p(n,r),M(J[e],1)):(J[e]=Fe(n),J[e].c(),M(J[e],1),J[e].m(v,null))}for(B(),e=T.length;e<J.length;e+=1)V(e);A()}(!W||1&r)&&D!==(D=t[0].preview+"")&&y(P,D)},i(t){if(!W){M(n.$$.fragment,t),M($.$$.fragment,t),M(L.$$.fragment,t),M(I.$$.fragment,t);for(let t=0;t<T.length;t+=1)M(J[t]);W=!0}},o(t){_(n.$$.fragment,t),_($.$$.fragment,t),_(L.$$.fragment,t),_(I.$$.fragment,t),J=J.filter(Boolean);for(let t=0;t<J.length;t+=1)_(J[t]);W=!1},d(t){t&&f(e),C(n),t&&f(m),t&&f(g),C($),t&&f(w),t&&f(v),C(L),C(I),S(J,t),t&&f(j),t&&f(z),N=!1,x(R)}}}function Fe(t){let e,n;return e=new $t({props:{tag:t[7]}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,n){const r={};5&n&&(r.tag=t[7]),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function De(t){let e,n,r,s,o;const u=[Re,Ne],d=[];function h(t,e){return t[0].member?0:1}return n=h(t),r=d[n]=u[n](t),{c(){e=i("div"),r.c(),l(e,"id",s="MailCard-"+t[1]),c(e,"height","156px"),l(e,"class","\r\nw-64 m-3 p-1\r\nrelative overflow-y-scroll\r\nbg-white shadow-md rounded-md")},m(t,r){a(t,e,r),d[n].m(e,null),o=!0},p(t,[i]){let c=n;n=h(t),n===c?d[n].p(t,i):(B(),_(d[c],1,1,(()=>{d[c]=null})),A(),r=d[n],r?r.p(t,i):(r=d[n]=u[n](t),r.c()),M(r,1),r.m(e,null)),(!o||2&i&&s!==(s="MailCard-"+t[1]))&&l(e,"id",s)},i(t){o||(M(r),o=!0)},o(t){_(r),o=!1},d(t){t&&f(e),d[n].d()}}}function Te(t,e,n){let r,s,i,o,c;$(t,Q,(t=>n(4,i=t))),$(t,X,(t=>n(5,o=t))),$(t,nt,(t=>n(6,c=t)));let{pm:l}=e,{index:a}=e;return t.$$set=t=>{"pm"in t&&n(0,l=t.pm),"index"in t&&n(1,a=t.index)},t.$$.update=()=>{16&t.$$.dirty&&n(2,r=t=>i.has(t.id)?Array.from(i.get(t.id)):[]),1&t.$$.dirty&&n(3,s=()=>{l&&(v(X,o=l,o),v(nt,c=!1,c))})},[l,a,r,s,i]}class Je extends n{constructor(t){super(),r(this,t,Te,De,s,{pm:0,index:1})}}function Ve(t){return Array.isArray?Array.isArray(t):"[object Array]"===Ue(t)}function He(t){return"string"==typeof t}function Ke(t){return"number"==typeof t}function qe(t){return!0===t||!1===t||function(t){return Ze(t)&&null!==t}(t)&&"[object Boolean]"==Ue(t)}function Ze(t){return"object"==typeof t}function Qe(t){return null!=t}function Ge(t){return!t.trim().length}function Ue(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Xe=Object.prototype.hasOwnProperty;class Ye{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=tn(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function tn(t){let e=null,n=null,r=null,s=1;if(He(t)||Ve(t))r=t,e=en(t),n=nn(t);else{if(!Xe.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(r=i,Xe.call(t,"weight")&&(s=t.weight,s<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=en(i),n=nn(i)}return{path:e,id:n,weight:s,src:r}}function en(t){return Ve(t)?t:t.split(".")}function nn(t){return Ve(t)?t.join("."):t}var rn={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],r=!1;const s=(t,e,i)=>{if(Qe(t))if(e[i]){const o=t[e[i]];if(!Qe(o))return;if(i===e.length-1&&(He(o)||Ke(o)||qe(o)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(o));else if(Ve(o)){r=!0;for(let t=0,n=o.length;t<n;t+=1)s(o[t],e,i+1)}else e.length&&s(o,e,i+1)}else n.push(t)};return s(t,He(e)?e.split("."):e,0),r?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const sn=/[^ ]+/g;class on{constructor({getFn:t=rn.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const r=t.match(sn).length;if(e.has(r))return e.get(r);const s=1/Math.sqrt(r),i=parseFloat(Math.round(s*n)/n);return e.set(r,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,He(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();He(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!Qe(t)||Ge(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,r)=>{let s=this.getFn(t,e.path);if(Qe(s))if(Ve(s)){let t=[];const e=[{nestedArrIndex:-1,value:s}];for(;e.length;){const{nestedArrIndex:n,value:r}=e.pop();if(Qe(r))if(He(r)&&!Ge(r)){let e={v:r,i:n,n:this.norm.get(r)};t.push(e)}else Ve(r)&&r.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[r]=t}else if(!Ge(s)){let t={v:s,n:this.norm.get(s)};n.$[r]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function cn(t,e,{getFn:n=rn.getFn}={}){const r=new on({getFn:n});return r.setKeys(t.map(tn)),r.setSources(e),r.create(),r}function ln(t,{errors:e=0,currentLocation:n=0,expectedLocation:r=0,distance:s=rn.distance,ignoreLocation:i=rn.ignoreLocation}={}){const o=e/t.length;if(i)return o;const c=Math.abs(r-n);return s?o+c/s:c?1:o}function an(t,e,n,{location:r=rn.location,distance:s=rn.distance,threshold:i=rn.threshold,findAllMatches:o=rn.findAllMatches,minMatchCharLength:c=rn.minMatchCharLength,includeMatches:l=rn.includeMatches,ignoreLocation:a=rn.ignoreLocation}={}){if(e.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const u=e.length,d=t.length,h=Math.max(0,Math.min(r,d));let f=i,p=h;const m=c>1||l,g=m?Array(d):[];let $;for(;($=t.indexOf(e,p))>-1;){let t=ln(e,{currentLocation:$,expectedLocation:h,distance:s,ignoreLocation:a});if(f=Math.min(t,f),p=$+u,m){let t=0;for(;t<u;)g[$+t]=1,t+=1}}p=-1;let y=[],w=1,x=u+d;const v=1<<u-1;for(let r=0;r<u;r+=1){let i=0,c=x;for(;i<c;){ln(e,{errors:r,currentLocation:h+c,expectedLocation:h,distance:s,ignoreLocation:a})<=f?i=c:x=c,c=Math.floor((x-i)/2+i)}x=c;let l=Math.max(1,h-c+1),$=o?d:Math.min(h+c,d)+u,b=Array($+2);b[$+1]=(1<<r)-1;for(let i=$;i>=l;i-=1){let o=i-1,c=n[t.charAt(o)];if(m&&(g[o]=+!!c),b[i]=(b[i+1]<<1|1)&c,r&&(b[i]|=(y[i+1]|y[i])<<1|1|y[i+1]),b[i]&v&&(w=ln(e,{errors:r,currentLocation:o,expectedLocation:h,distance:s,ignoreLocation:a}),w<=f)){if(f=w,p=o,p<=h)break;l=Math.max(1,2*h-p)}}if(ln(e,{errors:r+1,currentLocation:h,expectedLocation:h,distance:s,ignoreLocation:a})>f)break;y=b}const b={isMatch:p>=0,score:Math.max(.001,w)};if(m){const t=function(t=[],e=rn.minMatchCharLength){let n=[],r=-1,s=-1,i=0;for(let o=t.length;i<o;i+=1){let o=t[i];o&&-1===r?r=i:o||-1===r||(s=i-1,s-r+1>=e&&n.push([r,s]),r=-1)}return t[i-1]&&i-r>=e&&n.push([r,i-1]),n}(g,c);t.length?l&&(b.indices=t):b.isMatch=!1}return b}function un(t){let e={};for(let n=0,r=t.length;n<r;n+=1){const s=t.charAt(n);e[s]=(e[s]||0)|1<<r-n-1}return e}class dn{constructor(t,{location:e=rn.location,threshold:n=rn.threshold,distance:r=rn.distance,includeMatches:s=rn.includeMatches,findAllMatches:i=rn.findAllMatches,minMatchCharLength:o=rn.minMatchCharLength,isCaseSensitive:c=rn.isCaseSensitive,ignoreLocation:l=rn.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(t,e)=>{this.chunks.push({pattern:t,alphabet:un(t),startIndex:e})},u=this.pattern.length;if(u>32){let t=0;const e=u%32,n=u-e;for(;t<n;)a(this.pattern.substr(t,32),t),t+=32;if(e){const t=u-32;a(this.pattern.substr(t),t)}}else a(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:r,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:c,ignoreLocation:l}=this.options;let a=[],u=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:h,startIndex:f})=>{const{isMatch:p,score:m,indices:g}=an(t,e,h,{location:r+f,distance:s,threshold:i,findAllMatches:o,minMatchCharLength:c,includeMatches:n,ignoreLocation:l});p&&(d=!0),u+=m,p&&g&&(a=[...a,...g])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=a),h}}class hn{constructor(t){this.pattern=t}static isMultiMatch(t){return fn(t,this.multiRegex)}static isSingleMatch(t){return fn(t,this.singleRegex)}search(){}}function fn(t,e){const n=t.match(e);return n?n[1]:null}class pn extends hn{constructor(t,{location:e=rn.location,threshold:n=rn.threshold,distance:r=rn.distance,includeMatches:s=rn.includeMatches,findAllMatches:i=rn.findAllMatches,minMatchCharLength:o=rn.minMatchCharLength,isCaseSensitive:c=rn.isCaseSensitive,ignoreLocation:l=rn.ignoreLocation}={}){super(t),this._bitapSearch=new dn(t,{location:e,threshold:n,distance:r,includeMatches:s,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class mn extends hn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const r=[],s=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+s,r.push([e,n-1]);const i=!!r.length;return{isMatch:i,score:i?0:1,indices:r}}}const gn=[class extends hn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},mn,class extends hn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends hn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends hn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends hn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends hn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},pn],$n=gn.length,yn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const wn=new Set([pn.type,mn.type]);class xn{constructor(t,{isCaseSensitive:e=rn.isCaseSensitive,includeMatches:n=rn.includeMatches,minMatchCharLength:r=rn.minMatchCharLength,ignoreLocation:s=rn.ignoreLocation,findAllMatches:i=rn.findAllMatches,location:o=rn.location,threshold:c=rn.threshold,distance:l=rn.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:r,findAllMatches:i,ignoreLocation:s,location:o,threshold:c,distance:l},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(yn).filter((t=>t&&!!t.trim())),r=[];for(let t=0,s=n.length;t<s;t+=1){const s=n[t];let i=!1,o=-1;for(;!i&&++o<$n;){const t=gn[o];let n=t.isMultiMatch(s);n&&(r.push(new t(n,e)),i=!0)}if(!i)for(o=-1;++o<$n;){const t=gn[o];let n=t.isSingleMatch(s);if(n){r.push(new t(n,e));break}}}return r}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;t=r?t:t.toLowerCase();let s=0,i=[],o=0;for(let r=0,c=e.length;r<c;r+=1){const c=e[r];i.length=0,s=0;for(let e=0,r=c.length;e<r;e+=1){const r=c[e],{isMatch:l,indices:a,score:u}=r.search(t);if(!l){o=0,s=0,i.length=0;break}if(s+=1,o+=u,n){const t=r.constructor.type;wn.has(t)?i=[...i,...a]:i.push(a)}}if(s){let t={isMatch:!0,score:o/s};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const vn=[];function bn(t,e){for(let n=0,r=vn.length;n<r;n+=1){let r=vn[n];if(r.condition(t,e))return new r(t,e)}return new dn(t,e)}const kn="$and",Mn="$or",_n="$path",Cn="$val",Sn=t=>!(!t[kn]&&!t[Mn]),Ln=t=>({[kn]:Object.keys(t).map((e=>({[e]:t[e]})))});function On(t,e,{auto:n=!0}={}){const r=t=>{let s=Object.keys(t);const i=(t=>!!t[_n])(t);if(!i&&s.length>1&&!Sn(t))return r(Ln(t));if((t=>!Ve(t)&&Ze(t)&&!Sn(t))(t)){const r=i?t[_n]:s[0],o=i?t[Cn]:t[r];if(!He(o))throw new Error((t=>`Invalid value for key ${t}`)(r));const c={keyId:nn(r),pattern:o};return n&&(c.searcher=bn(o,e)),c}let o={children:[],operator:s[0]};return s.forEach((e=>{const n=t[e];Ve(n)&&n.forEach((t=>{o.children.push(r(t))}))})),o};return Sn(t)||(t=Ln(t)),r(t)}function In(t,e){const n=t.matches;e.matches=[],Qe(n)&&n.forEach((t=>{if(!Qe(t.indices)||!t.indices.length)return;const{indices:n,value:r}=t;let s={indices:n,value:r};t.key&&(s.key=t.key.src),t.idx>-1&&(s.refIndex=t.idx),e.matches.push(s)}))}function En(t,e){e.score=t.score}class jn{constructor(t,e={},n){this.options={...rn,...e},this.options.useExtendedSearch,this._keyStore=new Ye(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof on))throw new Error("Incorrect 'index' type");this._myIndex=e||cn(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){Qe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,r=this._docs.length;n<r;n+=1){const s=this._docs[n];t(s,n)&&(this.removeAt(n),n-=1,r-=1,e.push(s))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:s,sortFn:i,ignoreFieldNorm:o}=this.options;let c=He(t)?He(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=rn.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:r,score:s})=>{const i=t?t.weight:null;n*=Math.pow(0===s&&i?Number.EPSILON:s,(i||1)*(e?1:r))})),t.score=n}))}(c,{ignoreFieldNorm:o}),s&&c.sort(i),Ke(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=rn.includeMatches,includeScore:r=rn.includeScore}={}){const s=[];return n&&s.push(In),r&&s.push(En),t.map((t=>{const{idx:n}=t,r={item:e[n],refIndex:n};return s.length&&s.forEach((e=>{e(t,r)})),r}))}(c,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(t){const e=bn(t,this.options),{records:n}=this._myIndex,r=[];return n.forEach((({v:t,i:n,n:s})=>{if(!Qe(t))return;const{isMatch:i,score:o,indices:c}=e.searchIn(t);i&&r.push({item:t,idx:n,matches:[{score:o,value:t,norm:s,indices:c}]})})),r}_searchLogical(t){const e=On(t,this.options),n=(t,e,r)=>{if(!t.children){const{keyId:n,searcher:s}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:s});return i&&i.length?[{idx:r,item:e,matches:i}]:[]}switch(t.operator){case kn:{const s=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,r);if(!c.length)return[];s.push(...c)}return s}case Mn:{const s=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,r);if(c.length){s.push(...c);break}}return s}}},r=this._myIndex.records,s={},i=[];return r.forEach((({$:t,i:r})=>{if(Qe(t)){let o=n(e,t,r);o.length&&(s[r]||(s[r]={idx:r,item:t,matches:[]},i.push(s[r])),o.forEach((({matches:t})=>{s[r].matches.push(...t)})))}})),i}_searchObjectList(t){const e=bn(t,this.options),{keys:n,records:r}=this._myIndex,s=[];return r.forEach((({$:t,i:r})=>{if(!Qe(t))return;let i=[];n.forEach(((n,r)=>{i.push(...this._findMatches({key:n,value:t[r],searcher:e}))})),i.length&&s.push({idx:r,item:t,matches:i})})),s}_findMatches({key:t,value:e,searcher:n}){if(!Qe(e))return[];let r=[];if(Ve(e))e.forEach((({v:e,i:s,n:i})=>{if(!Qe(e))return;const{isMatch:o,score:c,indices:l}=n.searchIn(e);o&&r.push({score:c,key:t,value:e,idx:s,norm:i,indices:l})}));else{const{v:s,n:i}=e,{isMatch:o,score:c,indices:l}=n.searchIn(s);o&&r.push({score:c,key:t,value:s,norm:i,indices:l})}return r}}jn.version="6.4.6",jn.createIndex=cn,jn.parseIndex=function(t,{getFn:e=rn.getFn}={}){const{keys:n,records:r}=t,s=new on({getFn:e});return s.setKeys(n),s.setIndexRecords(r),s},jn.config=rn,jn.parseQuery=On,function(...t){vn.push(...t)}(xn);const Bn={useExtendedSearch:!0,keys:["subject","preview"]};let An=e(U,(t=>new jn(t,Bn))),zn=t(""),Pn=t(!1),Wn=e([U,An,zn,Pn],(([t,e,n,r])=>n?e.search((r?"":"'")+n).map((t=>t.item)):t));function Nn(t){let e,n,r;return{c(){e=i("span"),n=o(t[0]),r=o("건"),l(e,"class","bg-red-100 rounded pr-1")},m(t,s){a(t,e,s),u(e,n),u(e,r)},p(t,e){1&e&&y(n,t[0])},d(t){t&&f(e)}}}function Rn(t){let e,n,r,s,o,c,h,$,y,v,b=t[3]&&Nn(t);return{c(){e=i("span"),n=i("label"),n.textContent="부분 일치",r=p(),s=i("input"),o=p(),c=i("input"),h=p(),b&&b.c(),$=m(),l(n,"for","fuzzy"),l(s,"id","fuzzy"),l(s,"type","checkbox"),l(e,"class","bg-red-100 rounded p-0.5 m-1"),l(c,"class","m-1 border-1 border-gray-400 rounded w-28"),l(c,"type","text"),l(c,"placeholder","검색")},m(i,l){a(i,e,l),u(e,n),u(e,r),u(e,s),s.checked=t[1],a(i,o,l),a(i,c,l),w(c,t[3]),a(i,h,l),b&&b.m(i,l),a(i,$,l),y||(v=[d(s,"change",t[4]),d(c,"change",t[5]),d(c,"input",t[6])],y=!0)},p(t,[e]){2&e&&(s.checked=t[1]),8&e&&c.value!==t[3]&&w(c,t[3]),t[3]?b?b.p(t,e):(b=Nn(t),b.c(),b.m($.parentNode,$)):b&&(b.d(1),b=null)},i:g,o:g,d(t){t&&f(e),t&&f(o),t&&f(c),t&&f(h),b&&b.d(t),t&&f($),y=!1,x(v)}}}function Fn(t,e,n){let r,s,i;$(t,Pn,(t=>n(1,r=t))),$(t,et,(t=>n(2,s=t))),$(t,zn,(t=>n(3,i=t)));let{search_length:o}=e;return t.$$set=t=>{"search_length"in t&&n(0,o=t.search_length)},[o,r,s,i,function(){r=this.checked,Pn.set(r)},()=>{v(et,s=1,s)},function(){i=this.value,zn.set(i)}]}class Dn extends n{constructor(t){super(),r(this,t,Fn,Rn,s,{search_length:0})}}function Tn(t,e,n){const r=t.slice();return r[40]=e[n],r[42]=n,r}function Jn(t,e,n){const r=t.slice();return r[40]=e[n],r[42]=n,r}function Vn(t){let e,n,r,s,c,h,m,$=t[2]?"on":"off";return{c(){e=i("label"),n=o("리스트뷰 "),r=o($),s=p(),c=i("input"),l(c,"id","isListView"),l(c,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,r),u(e,s),u(e,c),c.checked=t[2],h||(m=d(c,"change",t[28]),h=!0)},p(t,e){4&e[0]&&$!==($=t[2]?"on":"off")&&y(r,$),4&e[0]&&(c.checked=t[2])},i:g,o:g,d(t){t&&f(e),h=!1,m()}}}function Hn(t){let e,n,r,s,c,h,g,$,y=t[4].value&&Kn(t);return{c(){e=i("label"),n=o("태그 목록 "),r=i("input"),s=p(),y&&y.c(),c=m(),l(r,"id","isListView"),l(r,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,r),r.checked=t[6],a(i,s,o),y&&y.m(i,o),a(i,c,o),h=!0,g||($=d(r,"change",t[27]),g=!0)},p(t,e){64&e[0]&&(r.checked=t[6]),t[4].value?y?(y.p(t,e),16&e[0]&&M(y,1)):(y=Kn(t),y.c(),M(y,1),y.m(c.parentNode,c)):y&&(B(),_(y,1,1,(()=>{y=null})),A())},i(t){h||(M(y),h=!0)},o(t){_(y),h=!1},d(t){t&&f(e),t&&f(s),y&&y.d(t),t&&f(c),g=!1,$()}}}function Kn(t){let e,n,r,s;return r=new $t({props:{tag:t[4],canDelete:!0,onRemove:t[11]}}),{c(){e=i("span"),e.textContent="현재 :",n=p(),b(r.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),k(r,t,i),s=!0},p(t,e){const n={};16&e[0]&&(n.tag=t[4]),r.$set(n)},i(t){s||(M(r.$$.fragment,t),s=!0)},o(t){_(r.$$.fragment,t),s=!1},d(t){t&&f(e),t&&f(n),C(r,t)}}}function qn(t){let e,n,r=t[7],s=[];for(let e=0;e<r.length;e+=1)s[e]=Qn(Tn(t,r,e));const o=t=>_(s[t],1,1,(()=>{s[t]=null}));return{c(){e=i("ul");for(let t=0;t<s.length;t+=1)s[t].c();l(e,"id","MailItemList"),c(e,"max-width","728px"),l(e,"class","bg-white rounded shadow-xl mb-3")},m(t,r){a(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,n){if(226&n[0]){let i;for(r=t[7],i=0;i<r.length;i+=1){const o=Tn(t,r,i);s[i]?(s[i].p(o,n),M(s[i],1)):(s[i]=Qn(o),s[i].c(),M(s[i],1),s[i].m(e,null))}for(B(),i=r.length;i<s.length;i+=1)o(i);A()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)M(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)_(s[t]);n=!1},d(t){t&&f(e),S(s,t)}}}function Zn(t){let e,n,r=t[7],s=[];for(let e=0;e<r.length;e+=1)s[e]=Gn(Jn(t,r,e));const o=t=>_(s[t],1,1,(()=>{s[t]=null}));return{c(){e=i("div");for(let t=0;t<s.length;t+=1)s[t].c();l(e,"id","MailCardView"),l(e,"class","\r\n        mb-3 flex flex-wrap")},m(t,r){a(t,e,r);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,n){if(128&n[0]){let i;for(r=t[7],i=0;i<r.length;i+=1){const o=Jn(t,r,i);s[i]?(s[i].p(o,n),M(s[i],1)):(s[i]=Gn(o),s[i].c(),M(s[i],1),s[i].m(e,null))}for(B(),i=r.length;i<s.length;i+=1)o(i);A()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)M(s[t]);n=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)_(s[t]);n=!1},d(t){t&&f(e),S(s,t)}}}function Qn(t){let e,n;return e=new Pe({props:{index:t[42],pm:t[40],hidden:t[5]&&(t[1]<400||t[6])&&t[42]>0}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,n){const r={};128&n[0]&&(r.pm=t[40]),98&n[0]&&(r.hidden=t[5]&&(t[1]<400||t[6])&&t[42]>0),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Gn(t){let e,n;return e=new Je({props:{pm:t[40],index:t[42]}}),{c(){b(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,n){const r={};128&n[0]&&(r.pm=t[40]),e.$set(r)},i(t){n||(M(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Un(t){let e,n,r,s,o,d,h,m,g,$,y,w,x,v,S,L,O,z,P,N,R;const F=[Hn,Vn],D=[];function T(t,e){return t[5]?0:1}r=T(t),s=D[r]=F[r](t);m=new oe({});const J=[Zn,qn],V=[];function H(t,e){return!t[2]&&t[10]?0:1}return $=H(t),y=V[$]=J[$](t),x=new Ce({props:{maxPage:t[8]}}),O=new Dn({props:{search_length:t[3].length}}),{c(){e=i("section"),n=i("div"),s.c(),o=p(),d=p(),h=i("div"),b(m.$$.fragment),g=p(),y.c(),w=p(),b(x.$$.fragment),v=p(),S=i("br"),L=p(),b(O.$$.fragment),l(n,"class","mb-1 flex flex-row"),l(h,"class","\r\n    h-36 p-2 mb-3\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),W(h,"hidden",!(t[5]&&t[6])),l(e,"id","MailListSection"),c(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),l(e,"class",z="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2"),I((()=>t[29].call(e))),W(e,"hidden",t[5]&&!t[9])},m(s,i){a(s,e,i),u(e,n),D[r].m(n,null),u(e,o),u(e,d),u(e,h),k(m,h,null),u(e,g),V[$].m(e,null),u(e,w),k(x,e,null),u(e,v),u(e,S),u(e,L),k(O,e,null),P=j(e,t[29].bind(e)),R=!0},p(t,i){let o=r;r=T(t),r===o?D[r].p(t,i):(B(),_(D[o],1,1,(()=>{D[o]=null})),A(),s=D[r],s?s.p(t,i):(s=D[r]=F[r](t),s.c()),M(s,1),s.m(n,null)),96&i[0]&&W(h,"hidden",!(t[5]&&t[6]));let a=$;$=H(t),$===a?V[$].p(t,i):(B(),_(V[a],1,1,(()=>{V[a]=null})),A(),y=V[$],y?y.p(t,i):(y=V[$]=J[$](t),y.c()),M(y,1),y.m(e,w));const u={};256&i[0]&&(u.maxPage=t[8]),x.$set(u);const d={};8&i[0]&&(d.search_length=t[3].length),O.$set(d),(!R||100&i[0])&&c(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),(!R||1024&i[0]&&z!==(z="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2"))&&l(e,"class",z),1568&i[0]&&W(e,"hidden",t[5]&&!t[9])},i(t){R||(M(s),M(false),M(m.$$.fragment,t),M(y),M(x.$$.fragment,t),M(O.$$.fragment,t),I((()=>{N||(N=E(e,qt,{x:200,duration:200},!0)),N.run(1)})),R=!0)},o(t){_(s),_(false),_(m.$$.fragment,t),_(y),_(x.$$.fragment,t),_(O.$$.fragment,t),N||(N=E(e,qt,{x:200,duration:200},!1)),N.run(0),R=!1},d(t){t&&f(e),D[r].d(),C(m),V[$].d(),C(x),C(O),P(),t&&N&&N.end()}}}function Xn(t,e){fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>{console.log(e)})).catch((e=>{console.log(t+" 백업에 실패했습니다. 서버가 응답이 없습니다.")}))}function Yn(t,e,n){let r,s,i,o,c,l,a,u,d,h,f,p,m,g,y,w,x,b,k,M,_,C,S;$(t,ge,(t=>n(14,m=t))),$(t,et,(t=>n(15,g=t))),$(t,ct,(t=>n(4,y=t))),$(t,ut,(t=>n(18,w=t))),$(t,zn,(t=>n(21,x=t))),$(t,Wn,(t=>n(22,b=t))),$(t,st,(t=>n(5,k=t))),$(t,Z,(t=>n(35,M=t))),$(t,Q,(t=>n(36,_=t))),$(t,nt,(t=>n(9,C=t))),$(t,rt,(t=>n(10,S=t)));var L=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function c(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((r=r.apply(t,e||[])).next())}))};let O,I,E=1,j=3;R((()=>{const t=p[0];if((E!=g||O!=m&&t)&&(I=t,E=g),j!=u&&I){let t=0;return c.forEach(((t,e)=>{})),v(et,g=Math.ceil((t+1)/u),g),E=g,j=u,null}if(r>new Date)return v(ge,m=$e(new Date),m),alert("미래로 갈 수는 없습니다."),null;if(!y.value||0==p.length)return null;if(O!=m){let t=!1;if(c.forEach(((e,n)=>{if(t)return null;const s=we(e.time);ye(s)<=r&&(v(et,g=Math.ceil((n+1)/u),g),v(ge,m=s,m),t=!0)})),0==t){v(et,g=d,g);const t=c[c.length-1];v(ge,m=we(t.time),m)}return O=m,null}const e=we(p[0].time);v(ge,m=e,m),O=e}));const B=t=>{const e=t.time.split(" ")[0];"string"!=typeof e&&console.log(e);try{return e.replace(/\//g,"-")==m}catch(t){console.error(t),console.log(e)}return!0},A=t=>!0;let z,P,W=!1,N=!1;return t.$$.update=()=>{16384&t.$$.dirty[0]&&(r=ye(m)),262160&t.$$.dirty[0]&&n(17,s=w.get(y)),131072&t.$$.dirty[0]&&n(19,i=t=>s.has(t.id)),2637840&t.$$.dirty[0]&&n(20,o=y.value&&i||x&&A||m&&B||A),5242880&t.$$.dirty[0]&&n(3,c=b.filter(o)),1&t.$$.dirty[0]&&n(23,l=Math.floor((z-33)/280)),2&t.$$.dirty[0]&&n(24,a=Math.floor((P-220)/164)),25165862&t.$$.dirty[0]&&n(16,u=k?5:W?Math.floor((P-200)/62):l*a),65544&t.$$.dirty[0]&&n(8,d=Math.ceil(c.length/u)),98304&t.$$.dirty[0]&&n(25,h=(g-1)*u),33619976&t.$$.dirty[0]&&n(26,f=()=>{const t=c.slice(h,h+u);return t.length<u?t.concat(Array(u-t.length).fill({id:"",member:"",time:"",subject:"",preview:""})):t}),67108872&t.$$.dirty[0]&&n(7,p=c&&f())},[z,P,W,c,y,k,N,p,d,C,S,()=>{v(ct,y=V,y),v(et,g=1,g)},()=>{Xn("/all-tag-dict/",{tag_list:[...M].map((t=>t[1]))}),Xn("/mail-tag-dict/",{mail_to_tag_dict:G(_),tag_to_mail_dict:dt(w)})},()=>L(void 0,void 0,void 0,(function*(){const t=yield fetch("/all-tag-dict/").then((t=>t.json())).then((t=>t.tag_list)),e=yield fetch("/mail-tag-dict/").then((t=>t.json())),n=e.tag_to_mail_dict,r=e.mail_to_tag_dict;v(ct,y=V,y),v(Z,M=t.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",H]])),M),console.log("all_tag_dict 백업 다운로드 완료"),v(ut,w=at(n),w),v(Q,_=q(r),_),console.log("mail_tag_dict 백업 다운로드 완료")})),m,g,u,s,w,i,o,x,b,l,a,h,f,function(){N=this.checked,n(6,N)},function(){W=this.checked,n(2,W)},function(){z=this.clientWidth,P=this.clientHeight,n(0,z),n(1,P)}]}class tr extends n{constructor(t){super(),r(this,t,Yn,Un,s,{},[-1,-1])}}function er(t){let e,n,r,s,o,c,m,g,$,y,w,v=t[0].closeButton&&nr(t);var S=t[1];return S&&(c=new S({})),{c(){e=i("div"),n=i("div"),r=i("div"),v&&v.c(),s=p(),o=i("div"),c&&b(c.$$.fragment),l(o,"class","content svelte-1jadkpy"),l(o,"style",t[12]),l(r,"class","window svelte-1jadkpy"),l(r,"role","dialog"),l(r,"aria-modal","true"),l(r,"style",t[11]),l(n,"class","window-wrap svelte-1jadkpy"),l(n,"style",t[10]),l(e,"class","bg svelte-1jadkpy"),l(e,"style",t[9])},m(i,l){a(i,e,l),u(e,n),u(n,r),v&&v.m(r,null),u(r,s),u(r,o),c&&k(c,o,null),t[37](r),t[38](n),t[39](e),$=!0,y||(w=[d(r,"introstart",(function(){h(t[5])&&t[5].apply(this,arguments)})),d(r,"outrostart",(function(){h(t[6])&&t[6].apply(this,arguments)})),d(r,"introend",(function(){h(t[7])&&t[7].apply(this,arguments)})),d(r,"outroend",(function(){h(t[8])&&t[8].apply(this,arguments)})),d(e,"click",t[19])],y=!0)},p(i,a){if((t=i)[0].closeButton?v?(v.p(t,a),1&a[0]&&M(v,1)):(v=nr(t),v.c(),M(v,1),v.m(r,s)):v&&(B(),_(v,1,1,(()=>{v=null})),A()),S!==(S=t[1])){if(c){B();const t=c;_(t.$$.fragment,1,0,(()=>{C(t,1)})),A()}S?(c=new S({}),b(c.$$.fragment),M(c.$$.fragment,1),k(c,o,null)):c=null}(!$||4096&a[0])&&l(o,"style",t[12]),(!$||2048&a[0])&&l(r,"style",t[11]),(!$||1024&a[0])&&l(n,"style",t[10]),(!$||512&a[0])&&l(e,"style",t[9])},i(n){$||(M(v),c&&M(c.$$.fragment,n),I((()=>{m||(m=E(r,t[15],t[0].transitionWindowProps,!0)),m.run(1)})),I((()=>{g||(g=E(e,t[14],t[0].transitionBgProps,!0)),g.run(1)})),$=!0)},o(n){_(v),c&&_(c.$$.fragment,n),m||(m=E(r,t[15],t[0].transitionWindowProps,!1)),m.run(0),g||(g=E(e,t[14],t[0].transitionBgProps,!1)),g.run(0),$=!1},d(n){n&&f(e),v&&v.d(),c&&C(c),t[37](null),n&&m&&m.end(),t[38](null),t[39](null),n&&g&&g.end(),y=!1,x(w)}}}function nr(t){let e,n,r,s,i;const o=[sr,rr],c=[];function l(t,n){return 1&n[0]&&(e=!!t[16](t[0].closeButton)),e?0:1}return n=l(t,[-1]),r=c[n]=o[n](t),{c(){r.c(),s=m()},m(t,e){c[n].m(t,e),a(t,s,e),i=!0},p(t,e){let i=n;n=l(t,e),n===i?c[n].p(t,e):(B(),_(c[i],1,1,(()=>{c[i]=null})),A(),r=c[n],r?r.p(t,e):(r=c[n]=o[n](t),r.c()),M(r,1),r.m(s.parentNode,s))},i(t){i||(M(r),i=!0)},o(t){_(r),i=!1},d(t){c[n].d(t),t&&f(s)}}}function rr(t){let e,n,r;return{c(){e=i("button"),l(e,"class","close svelte-1jadkpy"),l(e,"style",t[13])},m(s,i){a(s,e,i),n||(r=d(e,"click",t[17]),n=!0)},p(t,n){8192&n[0]&&l(e,"style",t[13])},i:g,o:g,d(t){t&&f(e),n=!1,r()}}}function sr(t){let e,n,r;var s=t[0].closeButton;function i(t){return{props:{onClose:t[17]}}}return s&&(e=new s(i(t))),{c(){e&&b(e.$$.fragment),n=m()},m(t,s){e&&k(e,t,s),a(t,n,s),r=!0},p(t,r){if(s!==(s=t[0].closeButton)){if(e){B();const t=e;_(t.$$.fragment,1,0,(()=>{C(t,1)})),A()}s?(e=new s(i(t)),b(e.$$.fragment),M(e.$$.fragment,1),k(e,n.parentNode,n)):e=null}},i(t){r||(e&&M(e.$$.fragment,t),r=!0)},o(t){e&&_(e.$$.fragment,t),r=!1},d(t){t&&f(n),e&&C(e,t)}}}function ir(t){let e,n,r,s,i=t[1]&&er(t);const o=t[36].default,c=z(o,t,t[35],null);return{c(){i&&i.c(),e=p(),c&&c.c()},m(o,l){i&&i.m(o,l),a(o,e,l),c&&c.m(o,l),n=!0,r||(s=d(window,"keydown",t[18]),r=!0)},p(t,n){t[1]?i?(i.p(t,n),2&n[0]&&M(i,1)):(i=er(t),i.c(),M(i,1),i.m(e.parentNode,e)):i&&(B(),_(i,1,1,(()=>{i=null})),A()),c&&c.p&&16&n[1]&&P(c,o,t,t[35],n,null,null)},i(t){n||(M(i),M(c,t),n=!0)},o(t){_(i),_(c,t),n=!1},d(t){i&&i.d(t),t&&f(e),c&&c.d(t),r=!1,s()}}}function or(t,e,n){let r,s,i,o,c,l,a,{$$slots:u={},$$scope:d}=e;const h=F(),f=T;let{show:p=null}=e,{key:m="simple-modal"}=e,{closeButton:g=!0}=e,{closeOnEsc:$=!0}=e,{closeOnOuterClick:y=!0}=e,{styleBg:w={top:0,left:0}}=e,{styleWindowWrap:x={}}=e,{styleWindow:v={}}=e,{styleContent:b={}}=e,{styleCloseButton:k={}}=e,{setContext:M=f}=e,{transitionBg:_=Kt}=e,{transitionBgProps:C={duration:250}}=e,{transitionWindow:S=_}=e,{transitionWindowProps:L=C}=e;const O={closeButton:g,closeOnEsc:$,closeOnOuterClick:y,styleBg:w,styleWindowWrap:x,styleWindow:v,styleContent:b,styleCloseButton:k,transitionBg:_,transitionBgProps:C,transitionWindow:S,transitionWindowProps:L};let I,E,j,B={...O},A=null;const z=t=>Object.keys(t).reduce(((e,n)=>`${e}; ${(t=>t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${t[n]}`),""),P=t=>!!(t&&t.constructor&&t.call&&t.apply),W=()=>{};let N=W,R=W,J=W,V=W;const H=(t,e={},r={},s={})=>{n(1,A=function(t,e={}){return function(n){return new t({...n,props:{...e,...n.props}})}}(t,e)),n(0,B={...O,...r}),n(5,N=t=>{s.onOpen&&s.onOpen(t),h("opening")}),n(6,R=t=>{s.onClose&&s.onClose(t),h("closing")}),n(7,J=t=>{s.onOpened&&s.onOpened(t),h("opened")}),n(8,V=t=>{s.onClosed&&s.onClosed(t),h("closed")})},K=(t={})=>{n(6,R=t.onClose||R),n(8,V=t.onClosed||V),n(1,A=null)};return M(m,{open:H,close:K}),t.$$set=t=>{"show"in t&&n(20,p=t.show),"key"in t&&n(21,m=t.key),"closeButton"in t&&n(22,g=t.closeButton),"closeOnEsc"in t&&n(23,$=t.closeOnEsc),"closeOnOuterClick"in t&&n(24,y=t.closeOnOuterClick),"styleBg"in t&&n(25,w=t.styleBg),"styleWindowWrap"in t&&n(26,x=t.styleWindowWrap),"styleWindow"in t&&n(27,v=t.styleWindow),"styleContent"in t&&n(28,b=t.styleContent),"styleCloseButton"in t&&n(29,k=t.styleCloseButton),"setContext"in t&&n(30,M=t.setContext),"transitionBg"in t&&n(31,_=t.transitionBg),"transitionBgProps"in t&&n(32,C=t.transitionBgProps),"transitionWindow"in t&&n(33,S=t.transitionWindow),"transitionWindowProps"in t&&n(34,L=t.transitionWindowProps),"$$scope"in t&&n(35,d=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty[0]&&n(9,r=z(B.styleBg)),1&t.$$.dirty[0]&&n(10,s=z(B.styleWindowWrap)),1&t.$$.dirty[0]&&n(11,i=z(B.styleWindow)),1&t.$$.dirty[0]&&n(12,o=z(B.styleContent)),1&t.$$.dirty[0]&&n(13,c=z(B.styleCloseButton)),1&t.$$.dirty[0]&&n(14,l=B.transitionBg),1&t.$$.dirty[0]&&n(15,a=B.transitionWindow),1048576&t.$$.dirty[0]&&(P(p)?H(p):K())},[B,A,I,E,j,N,R,J,V,r,s,i,o,c,l,a,P,K,t=>{if(B.closeOnEsc&&A&&"Escape"===t.key&&(t.preventDefault(),K()),A&&"Tab"===t.key){const e=j.querySelectorAll("*"),n=Array.from(e).filter((t=>t.tabIndex>=0));let r=n.indexOf(document.activeElement);-1===r&&t.shiftKey&&(r=0),r+=n.length+(t.shiftKey?-1:1),r%=n.length,n[r].focus(),t.preventDefault()}},t=>{!B.closeOnOuterClick||t.target!==I&&t.target!==E||(t.preventDefault(),K())},p,m,g,$,y,w,x,v,b,k,M,_,C,S,L,d,u,function(t){D[t?"unshift":"push"]((()=>{j=t,n(4,j)}))},function(t){D[t?"unshift":"push"]((()=>{E=t,n(3,E)}))},function(t){D[t?"unshift":"push"]((()=>{I=t,n(2,I)}))}]}class cr extends n{constructor(t){super(),r(this,t,or,ir,s,{show:20,key:21,closeButton:22,closeOnEsc:23,closeOnOuterClick:24,styleBg:25,styleWindowWrap:26,styleWindow:27,styleContent:28,styleCloseButton:29,setContext:30,transitionBg:31,transitionBgProps:32,transitionWindow:33,transitionWindowProps:34},[-1,-1])}}function lr(t){let e,n,r,s;return e=new me({}),r=new tr({}),{c(){b(e.$$.fragment),n=p(),b(r.$$.fragment)},m(t,i){k(e,t,i),a(t,n,i),k(r,t,i),s=!0},i(t){s||(M(e.$$.fragment,t),M(r.$$.fragment,t),s=!0)},o(t){_(e.$$.fragment,t),_(r.$$.fragment,t),s=!1},d(t){C(e,t),t&&f(n),C(r,t)}}}function ar(t){let e,n,r=t[1]&&lr();return{c(){r&&r.c(),e=m()},m(t,s){r&&r.m(t,s),a(t,e,s),n=!0},p(t,n){t[1]?r?2&n&&M(r,1):(r=lr(),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(B(),_(r,1,1,(()=>{r=null})),A())},i(t){n||(M(r),n=!0)},o(t){_(r),n=!1},d(t){r&&r.d(t),t&&f(e)}}}function ur(t){let e,n,r,s;return n=new cr({props:{show:dr,$$slots:{default:[ar]},$$scope:{ctx:t}}}),{c(){e=i("div"),b(n.$$.fragment),l(e,"class","flex w-screen h-screen relative"),I((()=>t[4].call(e)))},m(i,o){a(i,e,o),k(n,e,null),r=j(e,t[4].bind(e)),s=!0},p(t,[e]){const r={};32770&e&&(r.$$scope={dirty:e,ctx:t}),n.$set(r)},i(t){s||(M(n.$$.fragment,t),s=!0)},o(t){_(n.$$.fragment,t),s=!1},d(t){t&&f(e),C(n),r()}}}let dr=null;function hr(t,e,n){let r,s,i,o,c,l,a;$(t,ut,(t=>n(2,s=t))),$(t,Q,(t=>n(3,i=t))),$(t,bt,(t=>n(7,o=t))),$(t,U,(t=>n(8,c=t))),$(t,X,(t=>n(9,l=t))),$(t,Z,(t=>n(10,a=t)));var u=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,i){function o(t){try{l(r.next(t))}catch(t){i(t)}}function c(t){try{l(r.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((r=r.apply(t,e||[])).next())}))};J.title="IZ*ONE Private Mail Viewer";let d=!1;const h=(t,e)=>{try{console.log(`${e}차 시도`),console.log(t.slice(0,10));const n=[];for(let e=0;e<t.length;e+=2)n.push(t[e]);return JSON.parse(n.join(""))}catch(n){if(e<4)return t=t.slice(1),h(t,e+1);throw n}},f=t=>u(void 0,void 0,void 0,(function*(){try{const e=yield fetch(t);return yield e.json()}catch(e){console.log("json 로드 실패");const n=yield fetch(t),r=yield n.text();return h(r,0)}}));let p;return function(){return u(this,void 0,void 0,(function*(){console.log("메일 리스트 로딩 시작");const t=yield f("./pm_list.json");console.log("메일 리스트 로딩 완료"),console.log("이름 dict 로딩 시작"),v(bt,o=yield f("./member_name.json"),o),console.log("이름 dict 로딩 끝"),console.log(o);const e=yield fetch("./mail_to_num_dict.json"),n=yield e.json();v(U,c=t.map(((t,e)=>{"m20731"==t.id&&v(X,l=t,l),t.nick=t.member;const r=o[t.nick];if(t.member=kt[r],!t.member&&e<5700){const e=n[t.id];v(bt,o[t.nick]=e,o),t.member=kt[e],console.log(t.nick,t.member)}return t})),c),console.log("all_tag_dict",a);let u=0;const d=a.get("혼다 히토미");if(s.has(d)&&(c.forEach((t=>{const e=a.get(t.member),n=s.get(e);n?n.add(t.id):(console.log(t.id,t.nick),u+=1)})),ut.set(s)),console.log("누락",u),!a.has("생일")){const t={value:"생일",color:"LightPink"};a.set(t.value,t),Z.set(a),s.set(t,new Set),c.map((e=>{"b"==e.id.slice(0,1)&&r(t,e)})),ut.set(s),Q.set(i)}}))}().then((()=>{n(1,d=!0)})),t.$$.update=()=>{12&t.$$.dirty&&(r=(t,e)=>{s.get(t).add(e.id),i.has(e.id)?i.get(e.id).add(t):i.set(e.id,new Set([t]))}),1&t.$$.dirty&&rt.set(p>800)},[p,d,s,i,function(){p=this.clientWidth,n(0,p)}]}export default class extends n{constructor(t){super(),r(this,t,hr,ur,s,{})}}
//# sourceMappingURL=index-1280be85.js.map
