import{w as t,h as e,S as n,i as s,s as r,e as i,t as o,j as c,b as l,c as a,d as u,l as d,k as h,f,a as p,m as g,n as m,g as $,o as y,p as w,q as x,r as b,v,x as k,y as M,z as _,A as O,B as C,C as S,D as j,E as L,F as I,G as E,H as P,I as B,J as A,K as z,L as W,M as N,N as R,O as F,P as D,Q as T,R as J,T as V,U as q,V as H,W as K}from"./main.js";const Z={value:null,color:null},Q={value:"💖",color:"#fff"},U=[{value:"권은비",color:"#bbb0dc"},{value:"미야와키 사쿠라",color:"#f1d2e7"},{value:"강혜원",color:"#db706c"},{value:"최예나",color:"#fcf695"},{value:"이채연",color:"#a7e0e1"},{value:"김채원",color:"#cee5d5"},{value:"야부키 나코",color:"#b7d3e9"},{value:"혼다 히토미",color:"#f1c3aa"},{value:"김민주",color:"#fff"},{value:"조유리",color:"#f3aa51"},{value:"안유진",color:"#567ace"},{value:"장원영",color:"#d9598c"},{value:"운영팀",color:"gray"}];let Y,G=t(function(){let t=U.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",Q]]));const e=localStorage.getItem("all_tag_dict");return e&&(console.log("all tag backup loaded"),t=[...t].reduce(((t,e)=>(t.set(e[0],e[1]),t)),new Map(JSON.parse(e)))),t}());G.subscribe((t=>{var e;localStorage.setItem("all_tag_dict",(e=t,JSON.stringify([...e])))})),G.subscribe((t=>{Y=e=>{const n=e.map((e=>[e[0],new Set(e[1].map((e=>t.get(e))))]));return new Map(n)}}));let X=t((()=>{const t=localStorage.getItem("mail_to_tag_dict");let e=new Map([["m0",new Set([Q])]]);if(t){const n=JSON.parse(t);e=Y(n)}return e})());function tt(t){return[...t].map((t=>[t[0],[...t[1]].map((t=>t.value))]))}X.subscribe((t=>{if(!t)return null;[...t].forEach((t=>{0==t[1].size&&X.update((e=>(e.delete(t[0]),e)))}));const e=tt(t);localStorage.setItem("mail_to_tag_dict",JSON.stringify(e))}));let et,nt=t(""),st=t(Math.floor(12*Math.random())),rt=t({color:null,value:null});G.subscribe((t=>{et=e=>new Map(e.map((e=>[t.get(e[0]),new Set(e[1])])))}));let it=t((()=>{let t=U.reduce(((t,e)=>(t.set(e,new Set),t)),new Map([[Q,new Set]]));const e=localStorage.getItem("tag_to_mail_dict");if(e){const n=JSON.parse(e);t=[...et(n)].reduce(((t,e)=>(t.set(e[0],e[1]),t)),t)}return t})());function ot(t){return[...t].map((t=>[t[0].value,[...t[1]]]))}it.subscribe((t=>{if([...t].forEach((([t,e])=>{if(0==e.size&&"💖"!=t.value&&!U.includes(t)){const e=t.value;it.update((e=>(e.delete(t),e))),G.update((t=>(t.delete(e),fetch(`/all-tag-dict/tag/${e}`,{method:"DELETE"}).then((t=>{console.log("서버에서 태그 삭제 완료")})),t))),rt.update((e=>e==t?{color:null,value:null}:e))}})),!t)return null;const e=ot(t);localStorage.setItem("tag_to_mail_dict",JSON.stringify(e))}));let ct=t([{id:"",member:"",time:"",subject:"",preview:"",n:1}]),lt=t({id:"m20731",member:"광배",time:"2021/03/09 19:23",subject:"사탕",preview:"위즈원 사탕 푸딩 맛 있는거 알았어?? 맛있어보여서 사서 언제먹을지 고민중이야 ."});let at=t(""),ut=e(at,(t=>"https://papago.naver.com/?sk=ja&tk=ko&hn=1&st="+t.replace(/\&nbsp;<\/div>/g,"\n").replace(/<\/div>/g,"\n").replace(/&nbsp;/g,"").replace(/<(\/)?([a-zA-Z]*)(\s[a-zA-Z]*=[^>]*)?(\s)*(\/)?>/gi,"").replace(/\n\n/g,"\n").replace(/\n/g,"%0A"))),dt=t(1),ht=t(!0),ft=t(!0),pt=e(ft,(t=>!t));function gt(t){let e,n=t[0].value+"";return{c(){e=o(n)},m(t,n){a(t,e,n)},p(t,s){1&s&&n!==(n=t[0].value+"")&&b(e,n)},d(t){t&&f(e)}}}function mt(t){let e,n,s;return{c(){e=i("img"),l(e,"class",n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none"),e.src!==(s="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","파파고 번역하기")},m(t,n){a(t,e,n)},p(t,s){4&s&&n!==(n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none")&&l(e,"class",n)},d(t){t&&f(e)}}}function $t(t){let e,n,s,r,p;return{c(){e=i("span"),n=o("X"),c(e,"background-color",t[0].color),l(e,"class",s="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])},m(s,i){a(s,e,i),u(e,n),r||(p=d(e,"click",(function(){h(t[3]?t[3]:t[5])&&(t[3]?t[3]:t[5]).apply(this,arguments)})),r=!0)},p(n,r){t=n,1&r&&c(e,"background-color",t[0].color),5&r&&s!==(s="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])&&l(e,"class",s)},d(t){t&&f(e),r=!1,p()}}}function yt(t){let e,n,s,r,o,u;function $(t,e){return"💖"==t[0].value?mt:gt}let y=$(t),w=y(t),x=(t[3]||t[1]&&"생일"!=t[0].value)&&$t(t);return{c(){e=i("span"),w.c(),s=p(),x&&x.c(),r=g(),c(e,"background-color",t[0].color),l(e,"class",n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\nm-1\r\n"+(t[1]&&"생일"!=t[0].value?"rounded-l border-r-0 pr-2":"rounded")+"\r\ntext-"+t[2]+" text-"+t[4])},m(n,i){a(n,e,i),w.m(e,null),a(n,s,i),x&&x.m(n,i),a(n,r,i),o||(u=d(e,"click",(function(){h(t[3]?t[3]:t[6](t[0]))&&(t[3]?t[3]:t[6](t[0])).apply(this,arguments)})),o=!0)},p(s,[i]){y===(y=$(t=s))&&w?w.p(t,i):(w.d(1),w=y(t),w&&(w.c(),w.m(e,null))),1&i&&c(e,"background-color",t[0].color),23&i&&n!==(n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\nm-1\r\n"+(t[1]&&"생일"!=t[0].value?"rounded-l border-r-0 pr-2":"rounded")+"\r\ntext-"+t[2]+" text-"+t[4])&&l(e,"class",n),t[3]||t[1]&&"생일"!=t[0].value?x?x.p(t,i):(x=$t(t),x.c(),x.m(r.parentNode,r)):x&&(x.d(1),x=null)},i:m,o:m,d(t){t&&f(e),w.d(),t&&f(s),x&&x.d(t),t&&f(r),o=!1,u()}}}function wt(t,e,n){let s,r,i,o,c,l,a,u,d;$(t,G,(t=>n(7,i=t))),$(t,lt,(t=>n(8,o=t))),$(t,it,(t=>n(9,c=t))),$(t,X,(t=>n(10,l=t))),$(t,rt,(t=>n(11,a=t))),$(t,y,(t=>n(12,u=t))),$(t,w,(t=>n(13,d=t)));var h=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};let{tag:f}=e,{canDelete:p=!1}=e,{size:g="xs"}=e,{onRemove:m=null}=e;w.subscribe((t=>{null==t.tag&&a!=Z&&x(rt,a=Z,a),t.tag&&a.value!=t.tag&&x(rt,a=i.get(t.tag),a)}));return t.$$set=t=>{"tag"in t&&n(0,f=t.tag),"canDelete"in t&&n(1,p=t.canDelete),"size"in t&&n(2,g=t.size),"onRemove"in t&&n(3,m=t.onRemove)},t.$$.update=()=>{1&t.$$.dirty&&n(4,s="강혜원"==f.value||"장원영"==f.value||"안유진"==f.value||"운영팀"==f.value?"black":"gray-700"),1921&t.$$.dirty&&n(5,r=()=>h(void 0,void 0,void 0,(function*(){const t=i.get(f.value);yield fetch(`/mail-tag-dict/mail/${o.id}/tag/${t.value}`,{method:"DELETE"}),c.get(t).delete(o.id),it.set(c),l.get(o.id).delete(t),X.set(l)})))},[f,p,g,m,s,r,t=>()=>{rt.set(t),u("./",Object.assign(Object.assign({},d),{tag:a.value,nowPage:1}))},i,o,c,l]}class xt extends n{constructor(t){super(),s(this,t,wt,yt,r,{tag:0,canDelete:1,size:2,onRemove:3})}}function bt(t){let e,n,s;return{c(){e=i("span"),n=o(t[0]),c(e,"background-color","pink"),l(e,"class",s="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])},m(t,s){a(t,e,s),u(e,n)},p(t,[r]){1&r&&b(n,t[0]),2&r&&s!==(s="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])&&l(e,"class",s)},i:m,o:m,d(t){t&&f(e)}}}function vt(t,e,n){let{time:s}=e,{size:r="xs"}=e;return t.$$set=t=>{"time"in t&&n(0,s=t.time),"size"in t&&n(1,r=t.size)},[s,r]}class kt extends n{constructor(t){super(),s(this,t,vt,bt,r,{time:0,size:1})}}const Mt={0:"#d9598c",1:"#f1d2e7",2:"#f3aa51",3:"#fcf695",4:"#567ace",5:"#b7d3e9",6:"#bbb0dc",7:"#db706c",8:"#f1c3aa",9:"#cee5d5",10:"#fff",11:"#a7e0e1",12:"gray"};let _t=t({});e(_t,(t=>Object.keys(t).reduce(((t,e)=>({...t,[_t[e]]:e})),{0:"장원영"})));const Ot={0:"장원영",1:"미야와키 사쿠라",2:"조유리",3:"최예나",4:"안유진",5:"야부키 나코",6:"권은비",7:"강혜원",8:"혼다 히토미",9:"김채원",10:"김민주",11:"이채연",12:"운영팀"};function Ct(t){let e,n,s;return{c(){e=i("button"),e.textContent="추가",l(e,"class","text-xs shadow rounded bg-red-400 p-1 m-1")},m(r,i){a(r,e,i),n||(s=d(e,"click",t[2]),n=!0)},p:m,d(t){t&&f(e),n=!1,s()}}}function St(t){let e,n,s,r,o,c=t[1]&&Ct(t);return{c(){e=i("input"),n=p(),c&&c.c(),s=g(),l(e,"type","text"),l(e,"class","\r\nborder-2 border-gray\r\nm-1 p-1\r\nrounded w-16\r\ntext-xs"),l(e,"placeholder","새 태그")},m(i,l){a(i,e,l),v(e,t[0]),a(i,n,l),c&&c.m(i,l),a(i,s,l),r||(o=[d(e,"input",t[5]),d(e,"keypress",t[3])],r=!0)},p(t,[n]){1&n&&e.value!==t[0]&&v(e,t[0]),t[1]?c?c.p(t,n):(c=Ct(t),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},i:m,o:m,d(t){t&&f(e),t&&f(n),c&&c.d(t),t&&f(s),r=!1,k(o)}}}function jt(t,e,n){let s,r,i,o,c,l,a,u;$(t,nt,(t=>n(0,r=t))),$(t,st,(t=>n(4,i=t))),$(t,G,(t=>n(7,o=t))),$(t,it,(t=>n(8,c=t))),$(t,lt,(t=>n(9,l=t))),$(t,X,(t=>n(10,a=t))),$(t,pt,(t=>n(1,u=t)));var d=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};const h=()=>d(void 0,void 0,void 0,(function*(){let t=s;o.has(r)?(t=o.get(r),c.get(t).add(l.id)):(c.set(s,new Set([l.id])),o.set(r,s),G.set(o),yield fetch("/all-tag-dict/tag",{method:"POST",body:JSON.stringify(s)})),it.set(c),a.has(l.id)?a.get(l.id).add(t):a.set(l.id,new Set([t])),X.set(a),fetch(`/mail-tag-dict/mail/${l.id}/tag/${s.value}`,{method:"POST"}).then((t=>{console.log("서버에 태그 추가 완료.")})),x(nt,r="",r),x(st,i=(i+1)%12,i)}));return t.$$.update=()=>{17&t.$$.dirty&&(s={value:r,color:Mt[i]})},[r,u,h,t=>{"Enter"===t.code&&h()},i,function(){r=this.value,nt.set(r)}]}class Lt extends n{constructor(t){super(),s(this,t,jt,St,r,{})}}function It(t){let e,n;return{c(){e=i("img"),l(e,"class",Bt),e.src!==(n="./img/empty-star.png")&&l(e,"src","./img/empty-star.png"),l(e,"alt","좋아요 하실래요?")},m(t,n){a(t,e,n)},p:m,d(t){t&&f(e)}}}function Et(t){let e,n;return{c(){e=i("img"),l(e,"class",Bt),e.src!==(n="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","좋아요 했어요")},m(t,n){a(t,e,n)},p:m,d(t){t&&f(e)}}}function Pt(t){let e,n,s,r,o,c;function u(t,e){return(null==n||3&e)&&(n=!!t[1](t[0])),n?Et:It}let g=u(t,-1),$=g(t);return{c(){e=i("label"),$.c(),s=p(),r=i("input"),l(e,"for","favorite"),l(r,"type","checkbox"),l(r,"class","hidden"),l(r,"id","favorite")},m(n,i){a(n,e,i),$.m(e,null),a(n,s,i),a(n,r,i),o||(c=d(e,"click",(function(){h(t[2](t[0]))&&t[2](t[0]).apply(this,arguments)})),o=!0)},p(n,[s]){g===(g=u(t=n,s))&&$?$.p(t,s):($.d(1),$=g(t),$&&($.c(),$.m(e,null)))},i:m,o:m,d(t){t&&f(e),$.d(),t&&f(s),t&&f(r),o=!1,c()}}}const Bt="w-5 h-5 mt-0.5 float-left";function At(t,e,n){let s,r,i,o,c;$(t,G,(t=>n(4,o=t))),$(t,it,(t=>n(5,c=t)));let{pm:l}=e;return t.$$set=t=>{"pm"in t&&n(0,l=t.pm)},t.$$.update=()=>{16&t.$$.dirty&&n(3,s=o.get("💖")),40&t.$$.dirty&&n(2,i=t=>()=>{const e=c.get(s);e.has(t.id)?e.delete(t.id):e.add(t.id),it.set(c)}),40&t.$$.dirty&&n(1,r=t=>c.get(s).has(t.id))},[l,r,i,s,o,c]}class zt extends n{constructor(t){super(),s(this,t,At,Pt,r,{pm:0})}}function Wt(t){let e,n;return e=new xt({props:{tag:t[1],size:t[0]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,[n]){const s={};2&n&&(s.tag=t[1]),1&n&&(s.size=t[0]),e.$set(s)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Nt(t,e,n){let s,r;$(t,G,(t=>n(3,r=t)));let{pm:i}=e,{size:o="xs"}=e;return t.$$set=t=>{"pm"in t&&n(2,i=t.pm),"size"in t&&n(0,o=t.size)},t.$$.update=()=>{12&t.$$.dirty&&n(1,s=r.get(i.member))},[o,s,i,r]}class Rt extends n{constructor(t){super(),s(this,t,Nt,Wt,r,{pm:2,size:0})}}let Ft=t(function(){const t=localStorage.getItem("preferences-profile");return t||"latest"}());function Dt(t,e,n){const s=t.slice();return s[4]=e[n],s}function Tt(t){let e,n,s,r,c,h,g,m=t[4].name+"";return{c(){e=i("label"),n=i("input"),s=p(),r=o(m),c=p(),l(n,"type","radio"),n.__value=t[4].path,n.value=n.__value,t[3][0].push(n)},m(i,o){a(i,e,o),u(e,n),n.checked=n.__value===t[0],u(e,s),u(e,r),u(e,c),h||(g=d(n,"change",t[2]),h=!0)},p(t,e){1&e&&(n.checked=n.__value===t[0])},d(s){s&&f(e),t[3][0].splice(t[3][0].indexOf(n),1),h=!1,g()}}}function Jt(t){let e,n,s,r=t[1],o=[];for(let e=0;e<r.length;e+=1)o[e]=Tt(Dt(t,r,e));return{c(){e=i("h3"),e.textContent="프로필 사진을 변경합니다.",n=p(),s=i("div");for(let t=0;t<o.length;t+=1)o[t].c();l(e,"class","svelte-qli48t"),l(s,"class","flex flex-col p-4")},m(t,r){a(t,e,r),a(t,n,r),a(t,s,r);for(let t=0;t<o.length;t+=1)o[t].m(s,null)},p(t,[e]){if(3&e){let n;for(r=t[1],n=0;n<r.length;n+=1){const i=Dt(t,r,n);o[n]?o[n].p(i,e):(o[n]=Tt(i),o[n].c(),o[n].m(s,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i:m,o:m,d(t){t&&f(e),t&&f(n),t&&f(s),j(o,t)}}}function Vt(t,e,n){let s;$(t,Ft,(t=>n(0,s=t)));return[s,[{path:"la-vie-en-rose",name:"라비앙 로즈"},{path:"one-the-story",name:"One The Story 포스터"},{path:"latest",name:"최신 프메"}],function(){s=this.__value,Ft.set(s)},[[]]]}Ft.subscribe((t=>{localStorage.setItem("preferences-profile",t)}));class qt extends n{constructor(t){super(),s(this,t,Vt,Jt,r,{})}}function Ht(t){let e,n,s,r;return{c(){e=i("img"),e.src!==(n="./img/"+t[1])&&l(e,"src",n),l(e,"class","w-11 h-11 rounded-full \r\nml-1 mt-1 mr-2\r\nfloat-left\r\nborder-gray-100 border-2"),l(e,"alt","")},m(n,i){a(n,e,i),s||(r=[d(e,"pointerdown",t[5]),d(e,"pointerup",t[6]),d(e,"mousedown",t[7]),d(e,"mouseup",t[8])],s=!0)},p(t,[s]){2&s&&e.src!==(n="./img/"+t[1])&&l(e,"src",n)},i:m,o:m,d(t){t&&f(e),s=!1,k(r)}}}function Kt(t,e,n){let s,r;$(t,Ft,(t=>n(4,r=t)));let{pm:i}=e;const{open:o}=L("simple-modal"),c=()=>{o(qt,{})};let l;return t.$$set=t=>{"pm"in t&&n(3,i=t.pm)},t.$$.update=()=>{24&t.$$.dirty&&n(1,s="운영팀"==i.member?"izone-logo.png":`profile/${r}/${i.member}.jpg`)},[l,s,c,i,r,()=>{n(0,l=setTimeout(c,300))},t=>{clearTimeout(l)},()=>{n(0,l=setTimeout(c,500))},t=>{clearTimeout(l)}]}class Zt extends n{constructor(t){super(),s(this,t,Kt,Ht,r,{pm:3})}}function Qt(t,{delay:e=0,duration:n=400,easing:s=I}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:t=>"opacity: "+t*r}}function Ut(t,e,n){const s=t.slice();return s[16]=e[n],s}function Yt(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Gt(t){let e,n;return e=new xt({props:{tag:t[16],canDelete:!0,size:"sm"}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};8&n&&(s.tag=t[16]),e.$set(s)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Xt(t){let e,n,s,r,o,c,h,g=t[7]&&te(t);return{c(){e=i("div"),n=i("div"),r=p(),g&&g.c(),l(n,"contenteditable","false"),void 0===t[4]&&E((()=>t[14].call(n))),l(e,"class","h-5/6 overflow-scroll p-1")},m(s,i){a(s,e,i),u(e,n),void 0!==t[4]&&(n.innerHTML=t[4]),u(e,r),g&&g.m(e,null),o=!0,c||(h=d(n,"input",t[14]),c=!0)},p(t,s){16&s&&t[4]!==n.innerHTML&&(n.innerHTML=t[4]),t[7]?g?g.p(t,s):(g=te(t),g.c(),g.m(e,null)):g&&(g.d(1),g=null)},i(t){o||(E((()=>{s||(s=P(n,Qt,{duration:200},!0)),s.run(1)})),o=!0)},o(t){s||(s=P(n,Qt,{duration:200},!1)),s.run(0),o=!1},d(t){t&&f(e),t&&s&&s.end(),g&&g.d(),c=!1,h()}}}function te(t){let e,n,s;return{c(){e=i("button"),e.textContent="목록으로 돌아가기🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mt-2")},m(r,i){a(r,e,i),n||(s=d(e,"click",t[15]),n=!0)},p:m,d(t){t&&f(e),n=!1,s()}}}function ee(t){let e,n,s,r,d,h,g,m,$,y,w,x,v,k,L,I,P,W,N,R,F,D,T=t[2].subject+"";r=new Zt({props:{pm:t[2]}});let J=t[5]&&Yt();x=new zt({props:{pm:t[2]}}),L=new Rt({props:{pm:t[2],size:"sm"}}),P=new kt({props:{time:t[2].time,size:"sm"}});let V=t[3],q=[];for(let e=0;e<V.length;e+=1)q[e]=Gt(Ut(t,V,e));const H=t=>C(q[t],1,1,(()=>{q[t]=null}));R=new Lt({});let K=t[4]&&Xt(t);return{c(){e=i("div"),n=i("div"),s=i("div"),M(r.$$.fragment),d=p(),h=i("h4"),g=o(T),$=p(),J&&J.c(),y=p(),w=i("div"),M(x.$$.fragment),v=p(),k=i("div"),M(L.$$.fragment),I=p(),M(P.$$.fragment),W=p();for(let t=0;t<q.length;t+=1)q[t].c();N=p(),M(R.$$.fragment),F=p(),K&&K.c(),l(h,"class","text-xl m-1 w-4/5"),l(s,"class","relative"),E((()=>t[13].call(s))),l(w,"class","absolute inset-y-0 right-0 m-1 h-8"),l(k,"class","flex flex-wrap"),l(n,"class","relative w-full"),c(e,"max-height",t[6]&&t[0]?"70%":"90%"),l(e,"class","\r\nshadow-2xl rounded-md bg-white \r\nw-full mt-2 p-2\r\nflex flex-col")},m(i,o){a(i,e,o),u(e,n),u(n,s),_(r,s,null),u(s,d),u(s,h),u(h,g),m=B(s,t[13].bind(s)),u(n,$),J&&J.m(n,null),u(n,y),u(n,w),_(x,w,null),u(n,v),u(n,k),_(L,k,null),u(k,I),_(P,k,null),u(k,W);for(let t=0;t<q.length;t+=1)q[t].m(k,null);u(k,N),_(R,k,null),u(e,F),K&&K.m(e,null),D=!0},p(t,[s]){const i={};4&s&&(i.pm=t[2]),r.$set(i),(!D||4&s)&&T!==(T=t[2].subject+"")&&b(g,T),t[5]?J||(J=Yt(),J.c(),J.m(n,y)):J&&(J.d(1),J=null);const o={};4&s&&(o.pm=t[2]),x.$set(o);const l={};4&s&&(l.pm=t[2]),L.$set(l);const a={};if(4&s&&(a.time=t[2].time),P.$set(a),8&s){let e;for(V=t[3],e=0;e<V.length;e+=1){const n=Ut(t,V,e);q[e]?(q[e].p(n,s),O(q[e],1)):(q[e]=Gt(n),q[e].c(),O(q[e],1),q[e].m(k,N))}for(A(),e=V.length;e<q.length;e+=1)H(e);z()}t[4]?K?(K.p(t,s),16&s&&O(K,1)):(K=Xt(t),K.c(),O(K,1),K.m(e,null)):K&&(A(),C(K,1,1,(()=>{K=null})),z()),(!D||65&s)&&c(e,"max-height",t[6]&&t[0]?"70%":"90%")},i(t){if(!D){O(r.$$.fragment,t),O(x.$$.fragment,t),O(L.$$.fragment,t),O(P.$$.fragment,t);for(let t=0;t<V.length;t+=1)O(q[t]);O(R.$$.fragment,t),O(K),D=!0}},o(t){C(r.$$.fragment,t),C(x.$$.fragment,t),C(L.$$.fragment,t),C(P.$$.fragment,t),q=q.filter(Boolean);for(let t=0;t<q.length;t+=1)C(q[t]);C(R.$$.fragment,t),C(K),D=!1},d(t){t&&f(e),S(r),m(),J&&J.d(),S(x),S(L),S(P),j(q,t),S(R),K&&K.d()}}}function ne(t,e,n){let s,r,i,o,c,l,a,u,d,h,f;$(t,X,(t=>n(11,o=t))),$(t,lt,(t=>n(2,c=t))),$(t,at,(t=>n(4,l=t))),$(t,ft,(t=>n(6,a=t))),$(t,pt,(t=>n(7,u=t))),$(t,ht,(t=>n(8,d=t))),$(t,y,(t=>n(9,h=t))),$(t,w,(t=>n(10,f=t)));let p,{show:g}=e;return t.$$set=t=>{"show"in t&&n(0,g=t.show)},t.$$.update=()=>{2052&t.$$.dirty&&n(3,s=o.has(c.id)?Array.from(o.get(c.id)):[]),4&t.$$.dirty&&n(12,r=()=>{x(at,l="",l),async function(t){const e=await fetch(`./mail/${t}.html`).then((t=>t.text())),n=e.search('<div class="main-contents" id="mail-detail"><html><head></head><body>')+69,s=e.search("</body></html></div>");return e.slice(n,s)}(c.id).then((t=>{setTimeout((()=>{x(at,l=t,l)}),100)}))}),4096&t.$$.dirty&&r(),2&t.$$.dirty&&n(5,i=p<40)},[g,p,c,s,l,i,a,u,d,h,f,o,r,function(){p=this.clientHeight,n(1,p)},function(){l=this.innerHTML,at.set(l)},()=>{x(ht,d=!0,d),h("./",{...f,showList:!0})}]}class se extends n{constructor(t){super(),s(this,t,ne,ee,r,{show:0})}}function re(t,e,n){const s=t.slice();return s[5]=e[n],s}function ie(t){let e,n;return e=new xt({props:{tag:t[5],size:t[1]?"xs":"sm"}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};1&n&&(s.tag=t[5]),2&n&&(s.size=t[1]?"xs":"sm"),e.$set(s)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function oe(t){let e,n,s=t[0],r=[];for(let e=0;e<s.length;e+=1)r[e]=ie(re(t,s,e));const o=t=>C(r[t],1,1,(()=>{r[t]=null}));return{c(){e=i("div");for(let t=0;t<r.length;t+=1)r[t].c();l(e,"class","flex flex-wrap")},m(t,s){a(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){if(3&n){let i;for(s=t[0],i=0;i<s.length;i+=1){const o=re(t,s,i);r[i]?(r[i].p(o,n),O(r[i],1)):(r[i]=ie(o),r[i].c(),O(r[i],1),r[i].m(e,null))}for(A(),i=s.length;i<r.length;i+=1)o(i);z()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)O(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)C(r[t]);n=!1},d(t){t&&f(e),j(r,t)}}}function ce(t,e,n){let s,r,i,o;return $(t,G,(t=>n(2,r=t))),$(t,rt,(t=>n(3,i=t))),$(t,ft,(t=>n(1,o=t))),t.$$.update=()=>{4&t.$$.dirty&&n(0,s=Array.from(r.values()))},r.has(i.value)&&x(rt,i=Z,i),[s,o,r]}class le extends n{constructor(t){super(),s(this,t,ce,oe,r,{})}}function ae(t){let e,n,s;return{c(){e=i("button"),e.textContent="목록🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mr-1")},m(r,i){a(r,e,i),n||(s=d(e,"click",t[10]),n=!0)},p:m,d(t){t&&f(e),n=!1,s()}}}function ue(t){let e,n,s,r,c;return{c(){e=i("label"),n=o("태그 목록 "),s=i("input"),l(s,"id","isListView"),l(s,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,s),s.checked=t[1],r||(c=d(s,"change",t[11]),r=!0)},p(t,e){2&e&&(s.checked=t[1])},d(t){t&&f(e),r=!1,c()}}}function de(t){let e,n,s,r;return s=new xt({props:{tag:t[2],canDelete:!0,onRemove:t[9]}}),{c(){e=i("span"),e.textContent="현재 :",n=p(),M(s.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),_(s,t,i),r=!0},p(t,e){const n={};4&e&&(n.tag=t[2]),s.$set(n)},i(t){r||(O(s.$$.fragment,t),r=!0)},o(t){C(s.$$.fragment,t),r=!1},d(t){t&&f(e),t&&f(n),S(s,t)}}}function he(t){let e,n,s,r,d,h,g,m,$,y,w,x,b,v,k,j,L,I,P=t[5]&&ae(t),N=650>=t[0]&&t[7]&&ue(t),R=t[2].value&&de(t);return b=new le({}),k=new se({props:{show:650<t[0]||t[1]}}),{c(){e=i("section"),n=i("div"),P&&P.c(),s=p(),r=i("div"),d=i("a"),h=o("번역"),g=i("img"),$=p(),N&&N.c(),y=p(),R&&R.c(),w=p(),x=i("div"),M(b.$$.fragment),v=p(),M(k.$$.fragment),l(g,"class","w-5 h-5 mt-0.5 float-right"),g.src!==(m="./img/papago.png")&&l(g,"src","./img/papago.png"),l(g,"alt","파파고 번역하기"),l(d,"href",t[8]),l(d,"target","_blank"),l(r,"class","w-16 p-1 shadow rounded bg-red-100 mr-1"),l(n,"class","flex flex-row"),c(x,"min-height","43px"),l(x,"class","\r\n    h-36 mt-3 mb-3 p-2\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),W(x,"hidden",!((650<t[0]||t[1])&&t[7])),l(e,"id","MailDetailSection"),l(e,"class",j="h-full p-3 "+(t[7]?"w-4/12":"w-full")+" flex flex-col svelte-q462jf"),E((()=>t[12].call(e))),W(e,"hidden",t[5]&&t[6])},m(i,o){a(i,e,o),u(e,n),P&&P.m(n,null),u(n,s),u(n,r),u(r,d),u(d,h),u(d,g),u(n,$),N&&N.m(n,null),u(n,y),R&&R.m(n,null),u(e,w),u(e,x),_(b,x,null),u(e,v),_(k,e,null),L=B(e,t[12].bind(e)),I=!0},p(t,[r]){t[5]?P?P.p(t,r):(P=ae(t),P.c(),P.m(n,s)):P&&(P.d(1),P=null),(!I||256&r)&&l(d,"href",t[8]),650>=t[0]&&t[7]?N?N.p(t,r):(N=ue(t),N.c(),N.m(n,y)):N&&(N.d(1),N=null),t[2].value?R?(R.p(t,r),4&r&&O(R,1)):(R=de(t),R.c(),O(R,1),R.m(n,null)):R&&(A(),C(R,1,1,(()=>{R=null})),z()),131&r&&W(x,"hidden",!((650<t[0]||t[1])&&t[7]));const i={};3&r&&(i.show=650<t[0]||t[1]),k.$set(i),(!I||128&r&&j!==(j="h-full p-3 "+(t[7]?"w-4/12":"w-full")+" flex flex-col svelte-q462jf"))&&l(e,"class",j),224&r&&W(e,"hidden",t[5]&&t[6])},i(t){I||(O(R),O(b.$$.fragment,t),O(k.$$.fragment,t),I=!0)},o(t){C(R),C(b.$$.fragment,t),C(k.$$.fragment,t),I=!1},d(t){t&&f(e),P&&P.d(),N&&N.d(),R&&R.d(),S(b),S(k),L()}}}function fe(t,e,n){let s,r,i,o,c,l,a,u;$(t,rt,(t=>n(2,s=t))),$(t,dt,(t=>n(13,r=t))),$(t,y,(t=>n(3,i=t))),$(t,w,(t=>n(4,o=t))),$(t,pt,(t=>n(5,c=t))),$(t,ht,(t=>n(6,l=t))),$(t,ft,(t=>n(7,a=t))),$(t,ut,(t=>n(8,u=t)));let d,h;return[d,h,s,i,o,c,l,a,u,()=>{x(rt,s=Z,s),x(dt,r=1,r),i("./",Object.assign(Object.assign({},o),{tag:""}))},()=>{x(ht,l=!0,l),i("./",{...o,showList:!0})},function(){h=this.checked,n(1,h)},function(){d=this.clientHeight,n(0,d)}]}class pe extends n{constructor(t){super(),s(this,t,fe,he,r,{})}}const ge=$e(new Date(2021,2,20));let me=t(ge);function $e(t){let e=""+(t.getMonth()+1),n=""+t.getDate();const s=t.getFullYear();return e.length<2&&(e="0"+e),n.length<2&&(n="0"+n),[s,e,n].join("-")}function ye(t){const[e,n,s]=t.split("-").map((t=>parseInt(t)));return new Date(e,n-1,s)}const we=t=>t.split(" ")[0].replace(/\//g,"-");function xe(t){let e,n,s,r;const o=t[3].default,c=N(o,t,t[2],null);return{c(){e=i("button"),c&&c.c(),l(e,"id",t[1]),l(e,"class","rounded bg-red-100 m-2 pl-1 pr-1")},m(i,o){a(i,e,o),c&&c.m(e,null),n=!0,s||(r=d(e,"click",(function(){h(t[0])&&t[0].apply(this,arguments)})),s=!0)},p(s,[r]){t=s,c&&c.p&&4&r&&R(c,o,t,t[2],r,null,null),(!n||2&r)&&l(e,"id",t[1])},i(t){n||(O(c,t),n=!0)},o(t){C(c,t),n=!1},d(t){t&&f(e),c&&c.d(t),s=!1,r()}}}function be(t,e,n){let{$$slots:s={},$$scope:r}=e,{onClick:i}=e,{id:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,i=t.onClick),"id"in t&&n(1,o=t.id),"$$scope"in t&&n(2,r=t.$$scope)},[i,o,r,s]}class ve extends n{constructor(t){super(),s(this,t,be,xe,r,{onClick:0,id:1})}}function ke(t){let e;return{c(){e=o("이전")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Me(t){let e;return{c(){e=o("다음")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function _e(t){let e;return{c(){e=o("어제")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Oe(t){let e;return{c(){e=o("내일")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Ce(t){let e,n,s,r,c,h,g,m,$,y,w,x,j,L,I,E,P,B,A,z,N;return e=new ve({props:{id:"BackPageButton",onClick:t[8],$$slots:{default:[ke]},$$scope:{ctx:t}}}),y=new ve({props:{id:"NextPageButton",onClick:t[7],$$slots:{default:[Me]},$$scope:{ctx:t}}}),L=new ve({props:{id:"toYesterdayButton",onClick:t[5],$$slots:{default:[_e]},$$scope:{ctx:t}}}),B=new ve({props:{id:"toTomorrowButton",onClick:t[6],$$slots:{default:[Oe]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment),n=p(),s=i("span"),r=i("input"),c=p(),h=i("span"),g=o("/ "),m=o(t[0]),$=p(),M(y.$$.fragment),w=p(),x=i("br"),j=p(),M(L.$$.fragment),I=p(),E=i("input"),P=p(),M(B.$$.fragment),l(r,"id","NowPageInput"),l(r,"type","number"),l(r,"class","w-9"),l(r,"min","1"),l(r,"max",t[0]),W(r,"bg-red-300",t[0]<=t[1]),l(s,"id","NowPageSpan"),l(s,"class","bg-white border-2 border-gray-400 rounded w-24 p-1"),W(s,"bg-red-300",t[0]<=t[1]),W(s,"border-red-300",t[0]<=t[1]),l(E,"type","date"),l(E,"class","border-1 w-36 border-gray-400 rounded")},m(i,o){_(e,i,o),a(i,n,o),a(i,s,o),u(s,r),v(r,t[1]),u(s,c),u(s,h),u(h,g),u(h,m),a(i,$,o),_(y,i,o),a(i,w,o),a(i,x,o),a(i,j,o),_(L,i,o),a(i,I,o),a(i,E,o),v(E,t[2]),a(i,P,o),_(B,i,o),A=!0,z||(N=[d(r,"input",t[9]),d(E,"input",t[10]),d(E,"change",t[11])],z=!0)},p(t,[n]){const i={};8192&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i),(!A||1&n)&&l(r,"max",t[0]),2&n&&F(r.value)!==t[1]&&v(r,t[1]),3&n&&W(r,"bg-red-300",t[0]<=t[1]),(!A||1&n)&&b(m,t[0]),3&n&&W(s,"bg-red-300",t[0]<=t[1]),3&n&&W(s,"border-red-300",t[0]<=t[1]);const o={};8192&n&&(o.$$scope={dirty:n,ctx:t}),y.$set(o);const c={};8192&n&&(c.$$scope={dirty:n,ctx:t}),L.$set(c),4&n&&v(E,t[2]);const a={};8192&n&&(a.$$scope={dirty:n,ctx:t}),B.$set(a)},i(t){A||(O(e.$$.fragment,t),O(y.$$.fragment,t),O(L.$$.fragment,t),O(B.$$.fragment,t),A=!0)},o(t){C(e.$$.fragment,t),C(y.$$.fragment,t),C(L.$$.fragment,t),C(B.$$.fragment,t),A=!1},d(t){S(e,t),t&&f(n),t&&f(s),t&&f($),S(y,t),t&&f(w),t&&f(x),t&&f(j),S(L,t),t&&f(I),t&&f(E),t&&f(P),S(B,t),z=!1,k(N)}}}function Se(t,e,n){let s,r,i,o,c;$(t,rt,(t=>n(12,s=t))),$(t,dt,(t=>n(1,r=t))),$(t,me,(t=>n(2,i=t))),$(t,y,(t=>n(3,o=t))),$(t,w,(t=>n(4,c=t)));let{maxPage:l}=e;w.subscribe((t=>{const e=parseInt(t.nowPage);r!=e&&x(dt,r=t.nowPage?e:1,r),i!=t.dateString&&x(me,i=t.dateString||ge,i)}));return t.$$set=t=>{"maxPage"in t&&n(0,l=t.maxPage)},[l,r,i,o,c,function(){if(s.value)return r<l&&x(dt,r+=1,r),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),a=new Date(t,e-1,n-1);x(me,i=$e(a),i),x(dt,r=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r,dateString:i}))},function(){if(s.value)return r>1&&x(dt,r-=1,r),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),l=new Date(t,e-1,n+1);x(me,i=$e(l),i),x(dt,r=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r,dateString:i}))},function(){r<l?(x(dt,r+=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r}))):alert("마지막 페이지입니다.")},function(){r>1?(x(dt,r-=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r}))):alert("시작 페이지입니다.")},function(){r=F(this.value),dt.set(r)},function(){i=this.value,me.set(i)},()=>{x(dt,r=1,r),o("./",{...c,nowPage:r,dateString:i})}]}class je extends n{constructor(t){super(),s(this,t,Se,Ce,r,{maxPage:0})}}function Le(t,e,n){const s=t.slice();return s[12]=e[n],s}function Ie(t){let e;return{c(){e=i("span"),l(e,"class","\r\n        border-1 text-lg\r\n        rounded bg-white text-white")},m(t,n){a(t,e,n)},p:m,i:m,o:m,d(t){t&&f(e)}}}function Ee(t){let e,n,s,r,c,g,m,$,y,w,x,v,k,L,I,E,P,B,W=t[0].subject+"",N=(t[0].preview||"...")+"";e=new Zt({props:{pm:t[0]}}),r=new zt({props:{pm:t[0]}}),g=new Rt({props:{pm:t[0]}}),$=new kt({props:{time:t[0].time}});let R=t[6]&&Pe(),F=t[4](t[0]),D=[];for(let e=0;e<F.length;e+=1)D[e]=Be(Le(t,F,e));const T=t=>C(D[t],1,1,(()=>{D[t]=null}));return{c(){M(e.$$.fragment),n=p(),s=i("p"),M(r.$$.fragment),c=p(),M(g.$$.fragment),m=p(),M($.$$.fragment),y=p(),R&&R.c(),w=p();for(let t=0;t<D.length;t+=1)D[t].c();x=p(),v=o(W),k=p(),L=i("p"),I=o(N),l(s,"class","truncate"),l(L,"class","ml-1 mt-1 text-sm truncate")},m(i,o){_(e,i,o),a(i,n,o),a(i,s,o),_(r,s,null),u(s,c),_(g,s,null),u(s,m),_($,s,null),u(s,y),R&&R.m(s,null),u(s,w);for(let t=0;t<D.length;t+=1)D[t].m(s,null);u(s,x),u(s,v),a(i,k,o),a(i,L,o),u(L,I),E=!0,P||(B=d(L,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),P=!0)},p(n,i){t=n;const o={};1&i&&(o.pm=t[0]),e.$set(o);const c={};1&i&&(c.pm=t[0]),r.$set(c);const l={};1&i&&(l.pm=t[0]),g.$set(l);const a={};if(1&i&&(a.time=t[0].time),$.$set(a),t[6]?R||(R=Pe(),R.c(),R.m(s,w)):R&&(R.d(1),R=null),17&i){let e;for(F=t[4](t[0]),e=0;e<F.length;e+=1){const n=Le(t,F,e);D[e]?(D[e].p(n,i),O(D[e],1)):(D[e]=Be(n),D[e].c(),O(D[e],1),D[e].m(s,x))}for(A(),e=F.length;e<D.length;e+=1)T(e);z()}(!E||1&i)&&W!==(W=t[0].subject+"")&&b(v,W),(!E||1&i)&&N!==(N=(t[0].preview||"...")+"")&&b(I,N)},i(t){if(!E){O(e.$$.fragment,t),O(r.$$.fragment,t),O(g.$$.fragment,t),O($.$$.fragment,t);for(let t=0;t<F.length;t+=1)O(D[t]);E=!0}},o(t){C(e.$$.fragment,t),C(r.$$.fragment,t),C(g.$$.fragment,t),C($.$$.fragment,t),D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)C(D[t]);E=!1},d(t){S(e,t),t&&f(n),t&&f(s),S(r),S(g),S($),R&&R.d(),j(D,t),t&&f(k),t&&f(L),P=!1,B()}}}function Pe(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Be(t){let e,n;return e=new xt({props:{tag:t[12]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};17&n&&(s.tag=t[12]),e.$set(s)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Ae(t){let e,n,s,r,o;const c=[Ee,Ie],l=[];function u(t,e){return t[0].member?0:1}return n=u(t),s=l[n]=c[n](t),{c(){e=i("div"),s.c()},m(t,s){a(t,e,s),l[n].m(e,null),o=!0},p(t,r){let i=n;n=u(t),n===i?l[n].p(t,r):(A(),C(l[i],1,1,(()=>{l[i]=null})),z(),s=l[n],s?s.p(t,r):(s=l[n]=c[n](t),s.c()),O(s,1),s.m(e,null))},i(t){o||(O(s),r||E((()=>{r=D(e,Qt,{duration:500}),r.start()})),o=!0)},o(t){C(s),o=!1},d(t){t&&f(e),l[n].d()}}}function ze(t){let e,n,s=t[0],i=Ne(t);return{c(){i.c(),e=g()},m(t,s){i.m(t,s),a(t,e,s),n=!0},p(t,n){1&n&&r(s,s=t[0])?(A(),C(i,1,1,m),z(),i=Ne(t),i.c(),O(i),i.m(e.parentNode,e)):i.p(t,n)},i(t){n||(O(i),n=!0)},o(t){C(i),n=!1},d(t){t&&f(e),i.d(t)}}}function We(t){let e,n,s,r,c,l,d,h,g=t[0].subject+"",m=" "+t[0].preview;return e=new Rt({props:{pm:t[0],size:""}}),s=new kt({props:{time:t[0].time,size:""}}),{c(){M(e.$$.fragment),n=p(),M(s.$$.fragment),r=p(),c=i("strong"),l=o(g),d=o(m)},m(t,i){_(e,t,i),a(t,n,i),_(s,t,i),a(t,r,i),a(t,c,i),u(c,l),a(t,d,i),h=!0},p(t,n){const r={};1&n&&(r.pm=t[0]),e.$set(r);const i={};1&n&&(i.time=t[0].time),s.$set(i),(!h||1&n)&&g!==(g=t[0].subject+"")&&b(l,g),(!h||1&n)&&m!==(m=" "+t[0].preview)&&b(d,m)},i(t){h||(O(e.$$.fragment,t),O(s.$$.fragment,t),h=!0)},o(t){C(e.$$.fragment,t),C(s.$$.fragment,t),h=!1},d(t){S(e,t),t&&f(n),S(s,t),t&&f(r),t&&f(c),t&&f(d)}}}function Ne(t){let e,n,s,r=t[0].member&&We(t);return{c(){e=i("li"),r&&r.c(),l(e,"class","border-b-2 rounded w-full text-gray-500 truncate"),c(e,"font-size","10px"),c(e,"height","20px")},m(t,n){a(t,e,n),r&&r.m(e,null),s=!0},p(t,n){t[0].member?r?(r.p(t,n),1&n&&O(r,1)):(r=We(t),r.c(),O(r,1),r.m(e,null)):r&&(A(),C(r,1,1,(()=>{r=null})),z())},i(t){s||(O(r),n||E((()=>{n=D(e,Qt,{duration:300}),n.start()})),s=!0)},o(t){C(r),s=!1},d(t){t&&f(e),r&&r.d()}}}function Re(t){let e,n,s,o,u,d=t[0],h=Ae(t),$=t[1]&&ze(t);return{c(){e=i("li"),h.c(),s=p(),$&&$.c(),o=g(),l(e,"id",n="MailItem-"+t[2]),c(e,"height",t[5]?"62px":"84px"),l(e,"class","border-b-2 rounded p-1 w-full"),W(e,"hidden",t[1])},m(t,n){a(t,e,n),h.m(e,null),a(t,s,n),$&&$.m(t,n),a(t,o,n),u=!0},p(t,[s]){1&s&&r(d,d=t[0])?(A(),C(h,1,1,m),z(),h=Ae(t),h.c(),O(h),h.m(e,null)):h.p(t,s),(!u||4&s&&n!==(n="MailItem-"+t[2]))&&l(e,"id",n),(!u||32&s)&&c(e,"height",t[5]?"62px":"84px"),2&s&&W(e,"hidden",t[1]),t[1]?$?($.p(t,s),2&s&&O($,1)):($=ze(t),$.c(),O($,1),$.m(o.parentNode,o)):$&&(A(),C($,1,1,(()=>{$=null})),z())},i(t){u||(O(h),O($),u=!0)},o(t){C(h),C($),u=!1},d(t){t&&f(e),h.d(t),t&&f(s),$&&$.d(t),t&&f(o)}}}function Fe(t,e,n){let s,r,i,o,c,l,a,u,d;$(t,lt,(t=>n(10,i=t))),$(t,ht,(t=>n(11,o=t))),$(t,y,(t=>n(7,c=t))),$(t,w,(t=>n(8,l=t))),$(t,X,(t=>n(9,a=t))),$(t,ft,(t=>n(5,u=t))),$(t,pt,(t=>n(6,d=t)));let{pm:h}=e,{hidden:f}=e,{index:p}=e;return t.$$set=t=>{"pm"in t&&n(0,h=t.pm),"hidden"in t&&n(1,f=t.hidden),"index"in t&&n(2,p=t.index)},t.$$.update=()=>{385&t.$$.dirty&&n(3,s=()=>{h&&(x(lt,i=h,i),x(ht,o=!1,o),c("./",Object.assign(Object.assign({},l),{showList:!1})))}),512&t.$$.dirty&&n(4,r=t=>a.has(t.id)?Array.from(a.get(t.id)):[])},[h,f,p,s,r,u,d,c,l,a]}class De extends n{constructor(t){super(),s(this,t,Fe,Re,r,{pm:0,hidden:1,index:2})}}function Te(t,e,n){const s=t.slice();return s[9]=e[n],s}function Je(t){let e,n,s;return{c(){e=i("img"),l(e,"class","ml-5 m-3 w-10/12"),l(e,"alt","no mail"),e.src!==(n="./img/izone-logo-card.png")&&l(e,"src","./img/izone-logo-card.png")},m(t,n){a(t,e,n)},p:m,i(t){s||E((()=>{s=D(e,Qt,{duration:300}),s.start()}))},o:m,d(t){t&&f(e)}}}function Ve(t){let e,n,s=t[0],i=He(t);return{c(){i.c(),e=g()},m(t,s){i.m(t,s),a(t,e,s),n=!0},p(t,n){1&n&&r(s,s=t[0])?(A(),C(i,1,1,m),z(),i=He(t),i.c(),O(i),i.m(e.parentNode,e)):i.p(t,n)},i(t){n||(O(i),n=!0)},o(t){C(i),n=!1},d(t){t&&f(e),i.d(t)}}}function qe(t){let e,n;return e=new xt({props:{tag:t[9]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};5&n&&(s.tag=t[9]),e.$set(s)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function He(t){let e,n,s,r,c,g,m,$,y,w,x,v,L,I,P,B,W,N,R,F,T,J,V,q,H=t[0].subject+"",K=t[0].preview+"";n=new Zt({props:{pm:t[0]}}),y=new zt({props:{pm:t[0]}}),L=new Rt({props:{pm:t[0]}}),P=new kt({props:{time:t[0].time}});let Z=t[2](t[0]),Q=[];for(let e=0;e<Z.length;e+=1)Q[e]=qe(Te(t,Z,e));const U=t=>C(Q[t],1,1,(()=>{Q[t]=null}));return{c(){e=i("div"),M(n.$$.fragment),s=p(),r=i("h4"),c=o(H),m=p(),$=i("div"),M(y.$$.fragment),x=p(),v=i("div"),M(L.$$.fragment),I=p(),M(P.$$.fragment),B=p();for(let t=0;t<Q.length;t+=1)Q[t].c();N=p(),R=i("p"),F=o(K),l(r,"class","w-10/12 h-12"),l($,"class","absolute inset-y-0 right-0 m-2"),l(v,"class","flex flex-wrap"),l(R,"class","m-1 text-sm")},m(i,o){a(i,e,o),_(n,e,null),u(e,s),u(e,r),u(r,c),a(i,m,o),a(i,$,o),_(y,$,null),a(i,x,o),a(i,v,o),_(L,v,null),u(v,I),_(P,v,null),u(v,B);for(let t=0;t<Q.length;t+=1)Q[t].m(v,null);a(i,N,o),a(i,R,o),u(R,F),J=!0,V||(q=[d(e,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),d(R,"click",(function(){h(t[3])&&t[3].apply(this,arguments)}))],V=!0)},p(e,s){t=e;const r={};1&s&&(r.pm=t[0]),n.$set(r),(!J||1&s)&&H!==(H=t[0].subject+"")&&b(c,H);const i={};1&s&&(i.pm=t[0]),y.$set(i);const o={};1&s&&(o.pm=t[0]),L.$set(o);const l={};if(1&s&&(l.time=t[0].time),P.$set(l),5&s){let e;for(Z=t[2](t[0]),e=0;e<Z.length;e+=1){const n=Te(t,Z,e);Q[e]?(Q[e].p(n,s),O(Q[e],1)):(Q[e]=qe(n),Q[e].c(),O(Q[e],1),Q[e].m(v,null))}for(A(),e=Z.length;e<Q.length;e+=1)U(e);z()}(!J||1&s)&&K!==(K=t[0].preview+"")&&b(F,K)},i(t){if(!J){O(n.$$.fragment,t),g||E((()=>{g=D(e,Qt,{duration:300}),g.start()})),O(y.$$.fragment,t),w||E((()=>{w=D($,Qt,{duration:300}),w.start()})),O(L.$$.fragment,t),O(P.$$.fragment,t);for(let t=0;t<Z.length;t+=1)O(Q[t]);W||E((()=>{W=D(v,Qt,{duration:300}),W.start()})),T||E((()=>{T=D(R,Qt,{duration:500}),T.start()})),J=!0}},o(t){C(n.$$.fragment,t),C(y.$$.fragment,t),C(L.$$.fragment,t),C(P.$$.fragment,t),Q=Q.filter(Boolean);for(let t=0;t<Q.length;t+=1)C(Q[t]);J=!1},d(t){t&&f(e),S(n),t&&f(m),t&&f($),S(y),t&&f(x),t&&f(v),S(L),S(P),j(Q,t),t&&f(N),t&&f(R),V=!1,k(q)}}}function Ke(t){let e,n,s,r,o;const u=[Ve,Je],d=[];function h(t,e){return t[0].member?0:1}return n=h(t),s=d[n]=u[n](t),{c(){e=i("div"),s.c(),l(e,"id",r="MailCard-"+t[1]),c(e,"height","156px"),l(e,"class","\r\nw-64 m-3 p-1\r\nrelative overflow-y-scroll\r\nbg-white shadow-md rounded-md")},m(t,s){a(t,e,s),d[n].m(e,null),o=!0},p(t,[i]){let c=n;n=h(t),n===c?d[n].p(t,i):(A(),C(d[c],1,1,(()=>{d[c]=null})),z(),s=d[n],s?s.p(t,i):(s=d[n]=u[n](t),s.c()),O(s,1),s.m(e,null)),(!o||2&i&&r!==(r="MailCard-"+t[1]))&&l(e,"id",r)},i(t){o||(O(s),o=!0)},o(t){C(s),o=!1},d(t){t&&f(e),d[n].d()}}}function Ze(t,e,n){let s,r,i,o,c,l,a;$(t,X,(t=>n(4,i=t))),$(t,lt,(t=>n(7,o=t))),$(t,ht,(t=>n(8,c=t))),$(t,y,(t=>n(5,l=t))),$(t,w,(t=>n(6,a=t)));let{pm:u}=e,{index:d}=e;return t.$$set=t=>{"pm"in t&&n(0,u=t.pm),"index"in t&&n(1,d=t.index)},t.$$.update=()=>{16&t.$$.dirty&&n(2,s=t=>i.has(t.id)?Array.from(i.get(t.id)):[]),97&t.$$.dirty&&n(3,r=()=>{u&&(x(lt,o=u,o),x(ht,c=!1,c),l("./",Object.assign(Object.assign({},a),{showList:!1})))})},[u,d,s,r,i,l,a]}class Qe extends n{constructor(t){super(),s(this,t,Ze,Ke,r,{pm:0,index:1})}}function Ue(t){return Array.isArray?Array.isArray(t):"[object Array]"===sn(t)}function Ye(t){return"string"==typeof t}function Ge(t){return"number"==typeof t}function Xe(t){return!0===t||!1===t||function(t){return tn(t)&&null!==t}(t)&&"[object Boolean]"==sn(t)}function tn(t){return"object"==typeof t}function en(t){return null!=t}function nn(t){return!t.trim().length}function sn(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const rn=Object.prototype.hasOwnProperty;class on{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=cn(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function cn(t){let e=null,n=null,s=null,r=1;if(Ye(t)||Ue(t))s=t,e=ln(t),n=an(t);else{if(!rn.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(s=i,rn.call(t,"weight")&&(r=t.weight,r<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=ln(i),n=an(i)}return{path:e,id:n,weight:r,src:s}}function ln(t){return Ue(t)?t:t.split(".")}function an(t){return Ue(t)?t.join("."):t}var un={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],s=!1;const r=(t,e,i)=>{if(en(t))if(e[i]){const o=t[e[i]];if(!en(o))return;if(i===e.length-1&&(Ye(o)||Ge(o)||Xe(o)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(o));else if(Ue(o)){s=!0;for(let t=0,n=o.length;t<n;t+=1)r(o[t],e,i+1)}else e.length&&r(o,e,i+1)}else n.push(t)};return r(t,Ye(e)?e.split("."):e,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const dn=/[^ ]+/g;class hn{constructor({getFn:t=un.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const s=t.match(dn).length;if(e.has(s))return e.get(s);const r=1/Math.sqrt(s),i=parseFloat(Math.round(r*n)/n);return e.set(s,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Ye(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();Ye(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!en(t)||nn(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,s)=>{let r=this.getFn(t,e.path);if(en(r))if(Ue(r)){let t=[];const e=[{nestedArrIndex:-1,value:r}];for(;e.length;){const{nestedArrIndex:n,value:s}=e.pop();if(en(s))if(Ye(s)&&!nn(s)){let e={v:s,i:n,n:this.norm.get(s)};t.push(e)}else Ue(s)&&s.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[s]=t}else if(!nn(r)){let t={v:r,n:this.norm.get(r)};n.$[s]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function fn(t,e,{getFn:n=un.getFn}={}){const s=new hn({getFn:n});return s.setKeys(t.map(cn)),s.setSources(e),s.create(),s}function pn(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:r=un.distance,ignoreLocation:i=un.ignoreLocation}={}){const o=e/t.length;if(i)return o;const c=Math.abs(s-n);return r?o+c/r:c?1:o}function gn(t,e,n,{location:s=un.location,distance:r=un.distance,threshold:i=un.threshold,findAllMatches:o=un.findAllMatches,minMatchCharLength:c=un.minMatchCharLength,includeMatches:l=un.includeMatches,ignoreLocation:a=un.ignoreLocation}={}){if(e.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const u=e.length,d=t.length,h=Math.max(0,Math.min(s,d));let f=i,p=h;const g=c>1||l,m=g?Array(d):[];let $;for(;($=t.indexOf(e,p))>-1;){let t=pn(e,{currentLocation:$,expectedLocation:h,distance:r,ignoreLocation:a});if(f=Math.min(t,f),p=$+u,g){let t=0;for(;t<u;)m[$+t]=1,t+=1}}p=-1;let y=[],w=1,x=u+d;const b=1<<u-1;for(let s=0;s<u;s+=1){let i=0,c=x;for(;i<c;){pn(e,{errors:s,currentLocation:h+c,expectedLocation:h,distance:r,ignoreLocation:a})<=f?i=c:x=c,c=Math.floor((x-i)/2+i)}x=c;let l=Math.max(1,h-c+1),$=o?d:Math.min(h+c,d)+u,v=Array($+2);v[$+1]=(1<<s)-1;for(let i=$;i>=l;i-=1){let o=i-1,c=n[t.charAt(o)];if(g&&(m[o]=+!!c),v[i]=(v[i+1]<<1|1)&c,s&&(v[i]|=(y[i+1]|y[i])<<1|1|y[i+1]),v[i]&b&&(w=pn(e,{errors:s,currentLocation:o,expectedLocation:h,distance:r,ignoreLocation:a}),w<=f)){if(f=w,p=o,p<=h)break;l=Math.max(1,2*h-p)}}if(pn(e,{errors:s+1,currentLocation:h,expectedLocation:h,distance:r,ignoreLocation:a})>f)break;y=v}const v={isMatch:p>=0,score:Math.max(.001,w)};if(g){const t=function(t=[],e=un.minMatchCharLength){let n=[],s=-1,r=-1,i=0;for(let o=t.length;i<o;i+=1){let o=t[i];o&&-1===s?s=i:o||-1===s||(r=i-1,r-s+1>=e&&n.push([s,r]),s=-1)}return t[i-1]&&i-s>=e&&n.push([s,i-1]),n}(m,c);t.length?l&&(v.indices=t):v.isMatch=!1}return v}function mn(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const r=t.charAt(n);e[r]=(e[r]||0)|1<<s-n-1}return e}class $n{constructor(t,{location:e=un.location,threshold:n=un.threshold,distance:s=un.distance,includeMatches:r=un.includeMatches,findAllMatches:i=un.findAllMatches,minMatchCharLength:o=un.minMatchCharLength,isCaseSensitive:c=un.isCaseSensitive,ignoreLocation:l=un.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:s,includeMatches:r,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(t,e)=>{this.chunks.push({pattern:t,alphabet:mn(t),startIndex:e})},u=this.pattern.length;if(u>32){let t=0;const e=u%32,n=u-e;for(;t<n;)a(this.pattern.substr(t,32),t),t+=32;if(e){const t=u-32;a(this.pattern.substr(t),t)}}else a(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:s,distance:r,threshold:i,findAllMatches:o,minMatchCharLength:c,ignoreLocation:l}=this.options;let a=[],u=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:h,startIndex:f})=>{const{isMatch:p,score:g,indices:m}=gn(t,e,h,{location:s+f,distance:r,threshold:i,findAllMatches:o,minMatchCharLength:c,includeMatches:n,ignoreLocation:l});p&&(d=!0),u+=g,p&&m&&(a=[...a,...m])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=a),h}}class yn{constructor(t){this.pattern=t}static isMultiMatch(t){return wn(t,this.multiRegex)}static isSingleMatch(t){return wn(t,this.singleRegex)}search(){}}function wn(t,e){const n=t.match(e);return n?n[1]:null}class xn extends yn{constructor(t,{location:e=un.location,threshold:n=un.threshold,distance:s=un.distance,includeMatches:r=un.includeMatches,findAllMatches:i=un.findAllMatches,minMatchCharLength:o=un.minMatchCharLength,isCaseSensitive:c=un.isCaseSensitive,ignoreLocation:l=un.ignoreLocation}={}){super(t),this._bitapSearch=new $n(t,{location:e,threshold:n,distance:s,includeMatches:r,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class bn extends yn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const s=[],r=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+r,s.push([e,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const vn=[class extends yn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},bn,class extends yn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends yn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends yn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends yn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends yn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},xn],kn=vn.length,Mn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const _n=new Set([xn.type,bn.type]);class On{constructor(t,{isCaseSensitive:e=un.isCaseSensitive,includeMatches:n=un.includeMatches,minMatchCharLength:s=un.minMatchCharLength,ignoreLocation:r=un.ignoreLocation,findAllMatches:i=un.findAllMatches,location:o=un.location,threshold:c=un.threshold,distance:l=un.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:s,findAllMatches:i,ignoreLocation:r,location:o,threshold:c,distance:l},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(Mn).filter((t=>t&&!!t.trim())),s=[];for(let t=0,r=n.length;t<r;t+=1){const r=n[t];let i=!1,o=-1;for(;!i&&++o<kn;){const t=vn[o];let n=t.isMultiMatch(r);n&&(s.push(new t(n,e)),i=!0)}if(!i)for(o=-1;++o<kn;){const t=vn[o];let n=t.isSingleMatch(r);if(n){s.push(new t(n,e));break}}}return s}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let r=0,i=[],o=0;for(let s=0,c=e.length;s<c;s+=1){const c=e[s];i.length=0,r=0;for(let e=0,s=c.length;e<s;e+=1){const s=c[e],{isMatch:l,indices:a,score:u}=s.search(t);if(!l){o=0,r=0,i.length=0;break}if(r+=1,o+=u,n){const t=s.constructor.type;_n.has(t)?i=[...i,...a]:i.push(a)}}if(r){let t={isMatch:!0,score:o/r};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const Cn=[];function Sn(t,e){for(let n=0,s=Cn.length;n<s;n+=1){let s=Cn[n];if(s.condition(t,e))return new s(t,e)}return new $n(t,e)}const jn="$and",Ln="$or",In="$path",En="$val",Pn=t=>!(!t[jn]&&!t[Ln]),Bn=t=>({[jn]:Object.keys(t).map((e=>({[e]:t[e]})))});function An(t,e,{auto:n=!0}={}){const s=t=>{let r=Object.keys(t);const i=(t=>!!t[In])(t);if(!i&&r.length>1&&!Pn(t))return s(Bn(t));if((t=>!Ue(t)&&tn(t)&&!Pn(t))(t)){const s=i?t[In]:r[0],o=i?t[En]:t[s];if(!Ye(o))throw new Error((t=>`Invalid value for key ${t}`)(s));const c={keyId:an(s),pattern:o};return n&&(c.searcher=Sn(o,e)),c}let o={children:[],operator:r[0]};return r.forEach((e=>{const n=t[e];Ue(n)&&n.forEach((t=>{o.children.push(s(t))}))})),o};return Pn(t)||(t=Bn(t)),s(t)}function zn(t,e){const n=t.matches;e.matches=[],en(n)&&n.forEach((t=>{if(!en(t.indices)||!t.indices.length)return;const{indices:n,value:s}=t;let r={indices:n,value:s};t.key&&(r.key=t.key.src),t.idx>-1&&(r.refIndex=t.idx),e.matches.push(r)}))}function Wn(t,e){e.score=t.score}class Nn{constructor(t,e={},n){this.options={...un,...e},this.options.useExtendedSearch,this._keyStore=new on(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof hn))throw new Error("Incorrect 'index' type");this._myIndex=e||fn(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){en(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,s=this._docs.length;n<s;n+=1){const r=this._docs[n];t(r,n)&&(this.removeAt(n),n-=1,s-=1,e.push(r))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:r,sortFn:i,ignoreFieldNorm:o}=this.options;let c=Ye(t)?Ye(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=un.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:s,score:r})=>{const i=t?t.weight:null;n*=Math.pow(0===r&&i?Number.EPSILON:r,(i||1)*(e?1:s))})),t.score=n}))}(c,{ignoreFieldNorm:o}),r&&c.sort(i),Ge(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=un.includeMatches,includeScore:s=un.includeScore}={}){const r=[];return n&&r.push(zn),s&&r.push(Wn),t.map((t=>{const{idx:n}=t,s={item:e[n],refIndex:n};return r.length&&r.forEach((e=>{e(t,s)})),s}))}(c,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(t){const e=Sn(t,this.options),{records:n}=this._myIndex,s=[];return n.forEach((({v:t,i:n,n:r})=>{if(!en(t))return;const{isMatch:i,score:o,indices:c}=e.searchIn(t);i&&s.push({item:t,idx:n,matches:[{score:o,value:t,norm:r,indices:c}]})})),s}_searchLogical(t){const e=An(t,this.options),n=(t,e,s)=>{if(!t.children){const{keyId:n,searcher:r}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:r});return i&&i.length?[{idx:s,item:e,matches:i}]:[]}switch(t.operator){case jn:{const r=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,s);if(!c.length)return[];r.push(...c)}return r}case Ln:{const r=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,s);if(c.length){r.push(...c);break}}return r}}},s=this._myIndex.records,r={},i=[];return s.forEach((({$:t,i:s})=>{if(en(t)){let o=n(e,t,s);o.length&&(r[s]||(r[s]={idx:s,item:t,matches:[]},i.push(r[s])),o.forEach((({matches:t})=>{r[s].matches.push(...t)})))}})),i}_searchObjectList(t){const e=Sn(t,this.options),{keys:n,records:s}=this._myIndex,r=[];return s.forEach((({$:t,i:s})=>{if(!en(t))return;let i=[];n.forEach(((n,s)=>{i.push(...this._findMatches({key:n,value:t[s],searcher:e}))})),i.length&&r.push({idx:s,item:t,matches:i})})),r}_findMatches({key:t,value:e,searcher:n}){if(!en(e))return[];let s=[];if(Ue(e))e.forEach((({v:e,i:r,n:i})=>{if(!en(e))return;const{isMatch:o,score:c,indices:l}=n.searchIn(e);o&&s.push({score:c,key:t,value:e,idx:r,norm:i,indices:l})}));else{const{v:r,n:i}=e,{isMatch:o,score:c,indices:l}=n.searchIn(r);o&&s.push({score:c,key:t,value:r,norm:i,indices:l})}return s}}Nn.version="6.4.6",Nn.createIndex=fn,Nn.parseIndex=function(t,{getFn:e=un.getFn}={}){const{keys:n,records:s}=t,r=new hn({getFn:e});return r.setKeys(n),r.setIndexRecords(s),r},Nn.config=un,Nn.parseQuery=An,function(...t){Cn.push(...t)}(On);const Rn={useExtendedSearch:!0,keys:["subject","preview","body"]};let Fn=e(ct,(t=>new Nn(t,Rn))),Dn=t(""),Tn=t(!1),Jn=e([ct,Fn,Dn,Tn],(([t,e,n,s])=>n?e.search((s?"":"'")+n).map((t=>t.item)):t));function Vn(t){let e,n,s;return{c(){e=i("span"),n=o(t[0]),s=o("건"),l(e,"class","bg-red-100 rounded pr-1")},m(t,r){a(t,e,r),u(e,n),u(e,s)},p(t,e){1&e&&b(n,t[0])},d(t){t&&f(e)}}}function qn(t){let e,n,s,r,o,c,h,$,y,w,x=t[1]&&Vn(t);return{c(){e=i("span"),n=i("label"),n.textContent="부분 일치",s=p(),r=i("input"),o=p(),c=i("input"),h=p(),x&&x.c(),$=g(),l(n,"for","fuzzy"),l(r,"id","fuzzy"),l(r,"type","checkbox"),l(e,"class","bg-red-100 rounded p-0.5 m-1"),l(c,"class","m-1 border-1 border-gray-400 rounded w-28"),l(c,"type","text"),l(c,"placeholder","검색")},m(i,l){a(i,e,l),u(e,n),u(e,s),u(e,r),r.checked=t[2],a(i,o,l),a(i,c,l),v(c,t[1]),a(i,h,l),x&&x.m(i,l),a(i,$,l),y||(w=[d(r,"change",t[4]),d(c,"change",t[3]),d(c,"input",t[5])],y=!0)},p(t,[e]){4&e&&(r.checked=t[2]),2&e&&c.value!==t[1]&&v(c,t[1]),t[1]?x?x.p(t,e):(x=Vn(t),x.c(),x.m($.parentNode,$)):x&&(x.d(1),x=null)},i:m,o:m,d(t){t&&f(e),t&&f(o),t&&f(c),t&&f(h),x&&x.d(t),t&&f($),y=!1,k(w)}}}function Hn(t,e,n){let s,r,i,o,c;$(t,Dn,(t=>n(1,s=t))),$(t,dt,(t=>n(6,r=t))),$(t,y,(t=>n(7,i=t))),$(t,w,(t=>n(8,o=t))),$(t,Tn,(t=>n(2,c=t)));let{search_length:l}=e;w.subscribe((t=>{s!=t.search&&x(Dn,s=t.search||"",s)}));return t.$$set=t=>{"search_length"in t&&n(0,l=t.search_length)},[l,s,c,()=>{x(dt,r=1,r),i("./",Object.assign(Object.assign({},o),{search:s}))},function(){c=this.checked,Tn.set(c)},function(){s=this.value,Dn.set(s)}]}class Kn extends n{constructor(t){super(),s(this,t,Hn,qn,r,{search_length:0})}}function Zn(t,e,n){const s=t.slice();return s[43]=e[n],s[45]=n,s}function Qn(t,e,n){const s=t.slice();return s[43]=e[n],s[45]=n,s}function Un(t){let e,n,s,r,c,h,g,$=t[2]?"on":"off";return{c(){e=i("label"),n=o("리스트뷰 "),s=o($),r=p(),c=i("input"),l(c,"id","isListView"),l(c,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,s),u(e,r),u(e,c),c.checked=t[2],h||(g=d(c,"change",t[28]),h=!0)},p(t,e){4&e[0]&&$!==($=t[2]?"on":"off")&&b(s,$),4&e[0]&&(c.checked=t[2])},i:m,o:m,d(t){t&&f(e),h=!1,g()}}}function Yn(t){let e,n,s,r,c,h,m,$,y=t[4].value&&Gn(t);return{c(){e=i("label"),n=o("태그 목록\r\n                "),s=i("input"),r=p(),y&&y.c(),c=g(),l(s,"id","isListView"),l(s,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,s),s.checked=t[6],a(i,r,o),y&&y.m(i,o),a(i,c,o),h=!0,m||($=d(s,"change",t[27]),m=!0)},p(t,e){64&e[0]&&(s.checked=t[6]),t[4].value?y?(y.p(t,e),16&e[0]&&O(y,1)):(y=Gn(t),y.c(),O(y,1),y.m(c.parentNode,c)):y&&(A(),C(y,1,1,(()=>{y=null})),z())},i(t){h||(O(y),h=!0)},o(t){C(y),h=!1},d(t){t&&f(e),t&&f(r),y&&y.d(t),t&&f(c),m=!1,$()}}}function Gn(t){let e,n,s,r;return s=new xt({props:{tag:t[4],canDelete:!0,onRemove:t[11]}}),{c(){e=i("span"),e.textContent="현재 :",n=p(),M(s.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),_(s,t,i),r=!0},p(t,e){const n={};16&e[0]&&(n.tag=t[4]),s.$set(n)},i(t){r||(O(s.$$.fragment,t),r=!0)},o(t){C(s.$$.fragment,t),r=!1},d(t){t&&f(e),t&&f(n),S(s,t)}}}function Xn(t){let e,n,s=t[7],r=[];for(let e=0;e<s.length;e+=1)r[e]=es(Zn(t,s,e));const o=t=>C(r[t],1,1,(()=>{r[t]=null}));return{c(){e=i("ul");for(let t=0;t<r.length;t+=1)r[t].c();l(e,"id","MailItemList"),c(e,"max-width","728px"),l(e,"class","bg-white rounded shadow-xl mb-3")},m(t,s){a(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(226&n[0]){let i;for(s=t[7],i=0;i<s.length;i+=1){const o=Zn(t,s,i);r[i]?(r[i].p(o,n),O(r[i],1)):(r[i]=es(o),r[i].c(),O(r[i],1),r[i].m(e,null))}for(A(),i=s.length;i<r.length;i+=1)o(i);z()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)O(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)C(r[t]);n=!1},d(t){t&&f(e),j(r,t)}}}function ts(t){let e,n,s=t[7],r=[];for(let e=0;e<s.length;e+=1)r[e]=ns(Qn(t,s,e));const o=t=>C(r[t],1,1,(()=>{r[t]=null}));return{c(){e=i("div");for(let t=0;t<r.length;t+=1)r[t].c();l(e,"id","MailCardView"),l(e,"class","\r\n        mb-3 flex flex-wrap")},m(t,s){a(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(128&n[0]){let i;for(s=t[7],i=0;i<s.length;i+=1){const o=Qn(t,s,i);r[i]?(r[i].p(o,n),O(r[i],1)):(r[i]=ns(o),r[i].c(),O(r[i],1),r[i].m(e,null))}for(A(),i=s.length;i<r.length;i+=1)o(i);z()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)O(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)C(r[t]);n=!1},d(t){t&&f(e),j(r,t)}}}function es(t){let e,n;return e=new De({props:{index:t[45],pm:t[43],hidden:t[5]&&(t[1]<400||t[6])&&t[45]>0}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};128&n[0]&&(s.pm=t[43]),98&n[0]&&(s.hidden=t[5]&&(t[1]<400||t[6])&&t[45]>0),e.$set(s)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function ns(t){let e,n;return e=new Qe({props:{pm:t[43],index:t[45]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};128&n[0]&&(s.pm=t[43]),e.$set(s)},i(t){n||(O(e.$$.fragment,t),n=!0)},o(t){C(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function ss(t){let e,n,s,r,o,d,h,g,m,$,y,w,x,b,v,k,j,L,I,P;const N=[Yn,Un],R=[];function F(t,e){return t[5]?0:1}s=F(t),r=R[s]=N[s](t);g=new le({});const D=[ts,Xn],T=[];function J(t,e){return!t[2]&&t[10]?0:1}return $=J(t),y=T[$]=D[$](t),x=new je({props:{maxPage:t[8]}}),j=new Kn({props:{search_length:t[3].length}}),{c(){e=i("section"),n=i("div"),r.c(),o=p(),d=p(),h=i("div"),M(g.$$.fragment),m=p(),y.c(),w=p(),M(x.$$.fragment),b=p(),v=i("br"),k=p(),M(j.$$.fragment),l(n,"class","mb-1 flex flex-row"),l(h,"class","\r\n    h-36 p-2 mb-3\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),W(h,"hidden",!(t[5]&&t[6])),l(e,"id","MailListSection"),c(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),l(e,"class",L="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2 svelte-1dlnf5y"),E((()=>t[29].call(e))),W(e,"hidden",t[5]&&!t[9])},m(r,i){a(r,e,i),u(e,n),R[s].m(n,null),u(e,o),u(e,d),u(e,h),_(g,h,null),u(e,m),T[$].m(e,null),u(e,w),_(x,e,null),u(e,b),u(e,v),u(e,k),_(j,e,null),I=B(e,t[29].bind(e)),P=!0},p(t,i){let o=s;s=F(t),s===o?R[s].p(t,i):(A(),C(R[o],1,1,(()=>{R[o]=null})),z(),r=R[s],r?r.p(t,i):(r=R[s]=N[s](t),r.c()),O(r,1),r.m(n,null)),96&i[0]&&W(h,"hidden",!(t[5]&&t[6]));let a=$;$=J(t),$===a?T[$].p(t,i):(A(),C(T[a],1,1,(()=>{T[a]=null})),z(),y=T[$],y?y.p(t,i):(y=T[$]=D[$](t),y.c()),O(y,1),y.m(e,w));const u={};256&i[0]&&(u.maxPage=t[8]),x.$set(u);const d={};8&i[0]&&(d.search_length=t[3].length),j.$set(d),(!P||100&i[0])&&c(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),(!P||1024&i[0]&&L!==(L="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2 svelte-1dlnf5y"))&&l(e,"class",L),1568&i[0]&&W(e,"hidden",t[5]&&!t[9])},i(t){P||(O(r),O(false),O(g.$$.fragment,t),O(y),O(x.$$.fragment,t),O(j.$$.fragment,t),P=!0)},o(t){C(r),C(false),C(g.$$.fragment,t),C(y),C(x.$$.fragment,t),C(j.$$.fragment,t),P=!1},d(t){t&&f(e),R[s].d(),S(g),T[$].d(),S(x),S(j),I()}}}function rs(t,e){fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>{console.log(e)})).catch((e=>{console.error(t+" 백업에 실패했습니다."),console.error(e)}))}function is(t,e,n){let s,r,i,o,c,l,a,u,d,h,f,p,g,m,b,v,k,M,_,O,C,S,j,L,I,E;$(t,me,(t=>n(14,g=t))),$(t,dt,(t=>n(16,m=t))),$(t,T,(t=>n(35,b=t))),$(t,w,(t=>n(36,v=t))),$(t,it,(t=>n(18,k=t))),$(t,rt,(t=>n(4,M=t))),$(t,Dn,(t=>n(21,_=t))),$(t,Jn,(t=>n(22,O=t))),$(t,pt,(t=>n(5,C=t))),$(t,y,(t=>n(37,S=t))),$(t,G,(t=>n(38,j=t))),$(t,X,(t=>n(39,L=t))),$(t,ht,(t=>n(9,I=t))),$(t,ft,(t=>n(10,E=t)));var P=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};let B,A,z=1,W=3;J((()=>{const t=p[0];if(W!=u||z==m&&B==me||(A=t),W!=u&&A){let t=0;return c.forEach(((t,e)=>{})),x(dt,m=Math.ceil((t+1)/u),m),z=m,W=u,b("./",Object.assign(Object.assign({},v),{nowPage:m})),null}if(s>new Date)return x(me,g=$e(new Date),g),alert("미래로 갈 수는 없습니다."),b("./",Object.assign(Object.assign({},v),{dateString:g})),null;if(0==p.length||!t&&1!=v.nowPage)return b("./",Object.assign(Object.assign({},v),{nowPage:1})),null;if(z!=m){z=m;const e=we(t.time);return x(me,g=e,g),B=e,b("./",Object.assign(Object.assign({},v),{nowPage:m,dateString:e})),null}if(B!==g){let t=!1;if(c.forEach(((e,n)=>{if(t||!e)return null;const r=we(e.time);ye(r)<=s&&(x(dt,m=Math.ceil((n+1)/u),m),x(me,g=r,g),t=!0)})),0==t&&c.length>0){x(dt,m=d,m);const t=c[c.length-1];x(me,g=we(t.time),g)}return B=g,b("./",Object.assign(Object.assign({},v),{nowPage:m,dateString:g})),null}}));const N=t=>{const e=t.time.split(" ")[0];"string"!=typeof e&&console.log(e);try{return e.replace(/\//g,"-")==g}catch(t){console.error(t),console.log(e)}return!0},R=t=>!0;let F,D,V=!1,q=!1;return t.$$.update=()=>{16384&t.$$.dirty[0]&&(s=ye(g)),262160&t.$$.dirty[0]&&n(17,r=k.get(M)),131072&t.$$.dirty[0]&&n(19,i=t=>r.has(t.id)),2637840&t.$$.dirty[0]&&n(20,o=M.value&&i||_&&R||g&&N||R),5242880&t.$$.dirty[0]&&n(3,c=O.filter(o)),1&t.$$.dirty[0]&&n(23,l=Math.floor((F-33)/280)),2&t.$$.dirty[0]&&n(24,a=Math.floor((D-220)/164)),25165862&t.$$.dirty[0]&&n(15,u=C?5:V?Math.floor((D-200)/62):l*a),32776&t.$$.dirty[0]&&n(8,d=Math.ceil(c.length/u)),98304&t.$$.dirty[0]&&n(25,h=(m-1)*u),33587208&t.$$.dirty[0]&&n(26,f=()=>{const t=c.slice(h,h+u);return t.length<u?t.concat(Array(u-t.length).fill({id:"",member:"",time:"",subject:"",preview:""})):t}),67108872&t.$$.dirty[0]&&n(7,p=c&&f())},[F,D,V,c,M,C,q,p,d,I,E,()=>{x(rt,M=Z,M),x(dt,m=1,m),S("./",Object.assign(Object.assign({},v),{tag:""}))},()=>{rs("/all-tag-dict/",{tag_list:[...j].map((t=>t[1]))}),rs("/mail-tag-dict/",{mail_to_tag_dict:tt(L),tag_to_mail_dict:ot(k)})},()=>P(void 0,void 0,void 0,(function*(){const t=yield fetch("/all-tag-dict/").then((t=>t.json())).then((t=>t.tag_list)),e=yield fetch("/mail-tag-dict/").then((t=>t.json())),n=e.tag_to_mail_dict,s=e.mail_to_tag_dict;x(rt,M=Z,M),x(G,j=t.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",Q]])),j),console.log("all_tag_dict 백업 다운로드 완료"),x(it,k=et(n),k),x(X,L=Y(s),L),console.log("mail_tag_dict 백업 다운로드 완료")})),g,u,m,r,k,i,o,_,O,l,a,h,f,function(){q=this.checked,n(6,q)},function(){V=this.checked,n(2,V)},function(){F=this.clientWidth,D=this.clientHeight,n(0,F),n(1,D)}]}class os extends n{constructor(t){super(),s(this,t,is,ss,r,{},[-1,-1])}}function cs(t){let e,n,s,r,o,c,g,m,$,y,w,x=t[0].closeButton&&ls(t);var b=t[1];return b&&(c=new b({})),{c(){e=i("div"),n=i("div"),s=i("div"),x&&x.c(),r=p(),o=i("div"),c&&M(c.$$.fragment),l(o,"class","content svelte-1jadkpy"),l(o,"style",t[12]),l(s,"class","window svelte-1jadkpy"),l(s,"role","dialog"),l(s,"aria-modal","true"),l(s,"style",t[11]),l(n,"class","window-wrap svelte-1jadkpy"),l(n,"style",t[10]),l(e,"class","bg svelte-1jadkpy"),l(e,"style",t[9])},m(i,l){a(i,e,l),u(e,n),u(n,s),x&&x.m(s,null),u(s,r),u(s,o),c&&_(c,o,null),t[37](s),t[38](n),t[39](e),$=!0,y||(w=[d(s,"introstart",(function(){h(t[5])&&t[5].apply(this,arguments)})),d(s,"outrostart",(function(){h(t[6])&&t[6].apply(this,arguments)})),d(s,"introend",(function(){h(t[7])&&t[7].apply(this,arguments)})),d(s,"outroend",(function(){h(t[8])&&t[8].apply(this,arguments)})),d(e,"click",t[19])],y=!0)},p(i,a){if((t=i)[0].closeButton?x?(x.p(t,a),1&a[0]&&O(x,1)):(x=ls(t),x.c(),O(x,1),x.m(s,r)):x&&(A(),C(x,1,1,(()=>{x=null})),z()),b!==(b=t[1])){if(c){A();const t=c;C(t.$$.fragment,1,0,(()=>{S(t,1)})),z()}b?(c=new b({}),M(c.$$.fragment),O(c.$$.fragment,1),_(c,o,null)):c=null}(!$||4096&a[0])&&l(o,"style",t[12]),(!$||2048&a[0])&&l(s,"style",t[11]),(!$||1024&a[0])&&l(n,"style",t[10]),(!$||512&a[0])&&l(e,"style",t[9])},i(n){$||(O(x),c&&O(c.$$.fragment,n),E((()=>{g||(g=P(s,t[15],t[0].transitionWindowProps,!0)),g.run(1)})),E((()=>{m||(m=P(e,t[14],t[0].transitionBgProps,!0)),m.run(1)})),$=!0)},o(n){C(x),c&&C(c.$$.fragment,n),g||(g=P(s,t[15],t[0].transitionWindowProps,!1)),g.run(0),m||(m=P(e,t[14],t[0].transitionBgProps,!1)),m.run(0),$=!1},d(n){n&&f(e),x&&x.d(),c&&S(c),t[37](null),n&&g&&g.end(),t[38](null),t[39](null),n&&m&&m.end(),y=!1,k(w)}}}function ls(t){let e,n,s,r,i;const o=[us,as],c=[];function l(t,n){return 1&n[0]&&(e=!!t[16](t[0].closeButton)),e?0:1}return n=l(t,[-1]),s=c[n]=o[n](t),{c(){s.c(),r=g()},m(t,e){c[n].m(t,e),a(t,r,e),i=!0},p(t,e){let i=n;n=l(t,e),n===i?c[n].p(t,e):(A(),C(c[i],1,1,(()=>{c[i]=null})),z(),s=c[n],s?s.p(t,e):(s=c[n]=o[n](t),s.c()),O(s,1),s.m(r.parentNode,r))},i(t){i||(O(s),i=!0)},o(t){C(s),i=!1},d(t){c[n].d(t),t&&f(r)}}}function as(t){let e,n,s;return{c(){e=i("button"),l(e,"class","close svelte-1jadkpy"),l(e,"style",t[13])},m(r,i){a(r,e,i),n||(s=d(e,"click",t[17]),n=!0)},p(t,n){8192&n[0]&&l(e,"style",t[13])},i:m,o:m,d(t){t&&f(e),n=!1,s()}}}function us(t){let e,n,s;var r=t[0].closeButton;function i(t){return{props:{onClose:t[17]}}}return r&&(e=new r(i(t))),{c(){e&&M(e.$$.fragment),n=g()},m(t,r){e&&_(e,t,r),a(t,n,r),s=!0},p(t,s){if(r!==(r=t[0].closeButton)){if(e){A();const t=e;C(t.$$.fragment,1,0,(()=>{S(t,1)})),z()}r?(e=new r(i(t)),M(e.$$.fragment),O(e.$$.fragment,1),_(e,n.parentNode,n)):e=null}},i(t){s||(e&&O(e.$$.fragment,t),s=!0)},o(t){e&&C(e.$$.fragment,t),s=!1},d(t){t&&f(n),e&&S(e,t)}}}function ds(t){let e,n,s,r,i=t[1]&&cs(t);const o=t[36].default,c=N(o,t,t[35],null);return{c(){i&&i.c(),e=p(),c&&c.c()},m(o,l){i&&i.m(o,l),a(o,e,l),c&&c.m(o,l),n=!0,s||(r=d(window,"keydown",t[18]),s=!0)},p(t,n){t[1]?i?(i.p(t,n),2&n[0]&&O(i,1)):(i=cs(t),i.c(),O(i,1),i.m(e.parentNode,e)):i&&(A(),C(i,1,1,(()=>{i=null})),z()),c&&c.p&&16&n[1]&&R(c,o,t,t[35],n,null,null)},i(t){n||(O(i),O(c,t),n=!0)},o(t){C(i),C(c,t),n=!1},d(t){i&&i.d(t),t&&f(e),c&&c.d(t),s=!1,r()}}}function hs(t,e,n){let s,r,i,o,c,l,a,{$$slots:u={},$$scope:d}=e;const h=V(),f=H;let{show:p=null}=e,{key:g="simple-modal"}=e,{closeButton:m=!0}=e,{closeOnEsc:$=!0}=e,{closeOnOuterClick:y=!0}=e,{styleBg:w={top:0,left:0}}=e,{styleWindowWrap:x={}}=e,{styleWindow:b={}}=e,{styleContent:v={}}=e,{styleCloseButton:k={}}=e,{setContext:M=f}=e,{transitionBg:_=Qt}=e,{transitionBgProps:O={duration:250}}=e,{transitionWindow:C=_}=e,{transitionWindowProps:S=O}=e;const j={closeButton:m,closeOnEsc:$,closeOnOuterClick:y,styleBg:w,styleWindowWrap:x,styleWindow:b,styleContent:v,styleCloseButton:k,transitionBg:_,transitionBgProps:O,transitionWindow:C,transitionWindowProps:S};let L,I,E,P={...j},B=null;const A=t=>Object.keys(t).reduce(((e,n)=>`${e}; ${(t=>t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${t[n]}`),""),z=t=>!!(t&&t.constructor&&t.call&&t.apply),W=()=>{};let N=W,R=W,F=W,D=W;const T=(t,e={},s={},r={})=>{n(1,B=function(t,e={}){return function(n){return new t({...n,props:{...e,...n.props}})}}(t,e)),n(0,P={...j,...s}),n(5,N=t=>{r.onOpen&&r.onOpen(t),h("opening")}),n(6,R=t=>{r.onClose&&r.onClose(t),h("closing")}),n(7,F=t=>{r.onOpened&&r.onOpened(t),h("opened")}),n(8,D=t=>{r.onClosed&&r.onClosed(t),h("closed")})},J=(t={})=>{n(6,R=t.onClose||R),n(8,D=t.onClosed||D),n(1,B=null)};return M(g,{open:T,close:J}),t.$$set=t=>{"show"in t&&n(20,p=t.show),"key"in t&&n(21,g=t.key),"closeButton"in t&&n(22,m=t.closeButton),"closeOnEsc"in t&&n(23,$=t.closeOnEsc),"closeOnOuterClick"in t&&n(24,y=t.closeOnOuterClick),"styleBg"in t&&n(25,w=t.styleBg),"styleWindowWrap"in t&&n(26,x=t.styleWindowWrap),"styleWindow"in t&&n(27,b=t.styleWindow),"styleContent"in t&&n(28,v=t.styleContent),"styleCloseButton"in t&&n(29,k=t.styleCloseButton),"setContext"in t&&n(30,M=t.setContext),"transitionBg"in t&&n(31,_=t.transitionBg),"transitionBgProps"in t&&n(32,O=t.transitionBgProps),"transitionWindow"in t&&n(33,C=t.transitionWindow),"transitionWindowProps"in t&&n(34,S=t.transitionWindowProps),"$$scope"in t&&n(35,d=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty[0]&&n(9,s=A(P.styleBg)),1&t.$$.dirty[0]&&n(10,r=A(P.styleWindowWrap)),1&t.$$.dirty[0]&&n(11,i=A(P.styleWindow)),1&t.$$.dirty[0]&&n(12,o=A(P.styleContent)),1&t.$$.dirty[0]&&n(13,c=A(P.styleCloseButton)),1&t.$$.dirty[0]&&n(14,l=P.transitionBg),1&t.$$.dirty[0]&&n(15,a=P.transitionWindow),1048576&t.$$.dirty[0]&&(z(p)?T(p):J())},[P,B,L,I,E,N,R,F,D,s,r,i,o,c,l,a,z,J,t=>{if(P.closeOnEsc&&B&&"Escape"===t.key&&(t.preventDefault(),J()),B&&"Tab"===t.key){const e=E.querySelectorAll("*"),n=Array.from(e).filter((t=>t.tabIndex>=0));let s=n.indexOf(document.activeElement);-1===s&&t.shiftKey&&(s=0),s+=n.length+(t.shiftKey?-1:1),s%=n.length,n[s].focus(),t.preventDefault()}},t=>{!P.closeOnOuterClick||t.target!==L&&t.target!==I||(t.preventDefault(),J())},p,g,m,$,y,w,x,b,v,k,M,_,O,C,S,d,u,function(t){q[t?"unshift":"push"]((()=>{E=t,n(4,E)}))},function(t){q[t?"unshift":"push"]((()=>{I=t,n(3,I)}))},function(t){q[t?"unshift":"push"]((()=>{L=t,n(2,L)}))}]}class fs extends n{constructor(t){super(),s(this,t,hs,ds,r,{show:20,key:21,closeButton:22,closeOnEsc:23,closeOnOuterClick:24,styleBg:25,styleWindowWrap:26,styleWindow:27,styleContent:28,styleCloseButton:29,setContext:30,transitionBg:31,transitionBgProps:32,transitionWindow:33,transitionWindowProps:34},[-1,-1])}}function ps(t){let e,n,s,r;return e=new pe({}),s=new os({}),{c(){M(e.$$.fragment),n=p(),M(s.$$.fragment)},m(t,i){_(e,t,i),a(t,n,i),_(s,t,i),r=!0},i(t){r||(O(e.$$.fragment,t),O(s.$$.fragment,t),r=!0)},o(t){C(e.$$.fragment,t),C(s.$$.fragment,t),r=!1},d(t){S(e,t),t&&f(n),S(s,t)}}}function gs(t){let e,n,s=t[1]&&ps();return{c(){s&&s.c(),e=g()},m(t,r){s&&s.m(t,r),a(t,e,r),n=!0},p(t,n){t[1]?s?2&n&&O(s,1):(s=ps(),s.c(),O(s,1),s.m(e.parentNode,e)):s&&(A(),C(s,1,1,(()=>{s=null})),z())},i(t){n||(O(s),n=!0)},o(t){C(s),n=!1},d(t){s&&s.d(t),t&&f(e)}}}function ms(t){let e,n,s,r;return n=new fs({props:{show:$s,$$slots:{default:[gs]},$$scope:{ctx:t}}}),{c(){e=i("div"),M(n.$$.fragment),l(e,"class","flex w-screen h-screen relative"),E((()=>t[4].call(e)))},m(i,o){a(i,e,o),_(n,e,null),s=B(e,t[4].bind(e)),r=!0},p(t,[e]){const s={};131074&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){r||(O(n.$$.fragment,t),r=!0)},o(t){C(n.$$.fragment,t),r=!1},d(t){t&&f(e),S(n),s()}}}let $s=null;function ys(t,e,n){let s,r,i,o,c,l,a,u,d;$(t,it,(t=>n(2,r=t))),$(t,X,(t=>n(3,i=t))),$(t,_t,(t=>n(7,o=t))),$(t,ct,(t=>n(8,c=t))),$(t,lt,(t=>n(9,l=t))),$(t,G,(t=>n(10,a=t))),$(t,y,(t=>n(11,u=t))),$(t,ht,(t=>n(12,d=t)));var h=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};K.title="IZ*ONE Private Mail Viewer";let f=!1;const p=(t,e)=>{try{console.log(`${e}차 시도`),console.log(t.slice(0,10));const n=[];for(let e=0;e<t.length;e+=2)n.push(t[e]);return JSON.parse(n.join(""))}catch(n){if(e<4)return t=t.slice(1),p(t,e+1);throw n}},g=t=>h(void 0,void 0,void 0,(function*(){try{const e=yield fetch(t);return yield e.json()}catch(e){console.log("json 로드 실패");const n=yield fetch(t),s=yield n.text();return p(s,0)}}));let m;return function(){return h(this,void 0,void 0,(function*(){console.log("메일 리스트 로딩 시작");const t=yield g("./pm_list.json");console.log("메일 리스트 로딩 완료"),console.log("이름 dict 로딩 시작"),x(_t,o=yield g("./member_name.json"),o),console.log("이름 dict 로딩 끝"),console.log(o);const e=yield fetch("./mail_to_num_dict.json"),n=yield e.json(),d=yield g("./mail_body_dict.json");x(ct,c=t.map(((t,e)=>{"m20731"==t.id&&x(lt,l=t,l),t.nick=t.member;const s=o[t.nick];if(t.member=Ot[s],!t.member&&e<5700){const e=n[t.id];x(_t,o[t.nick]=e,o),t.member=Ot[e],console.log(t.nick,t.member)}return d&&(t.body=d[t.id]),t})),c),console.log("all_tag_dict",a);let h=0;const f=a.get("혼다 히토미");if(r.has(f)&&(c.forEach((t=>{const e=a.get(t.member),n=r.get(e);n?n.add(t.id):(console.log(t.id,t.nick),h+=1)})),it.set(r)),console.log("누락",h),!a.has("생일")){const t={value:"생일",color:"LightPink"};a.set(t.value,t),G.set(a),r.set(t,new Set),c.map((e=>{"b"==e.id.slice(0,1)&&s(t,e)})),it.set(r),X.set(i)}u("./",{dateString:ge,nowPage:1,tag:"",search:"",showList:!0})}))}().then((()=>{n(1,f=!0)})),w.subscribe((t=>{const e="true"==t.showList;e!=d&&x(ht,d=e,d)})),t.$$.update=()=>{12&t.$$.dirty&&(s=(t,e)=>{r.get(t).add(e.id),i.has(e.id)?i.get(e.id).add(t):i.set(e.id,new Set([t]))}),1&t.$$.dirty&&ft.set(m>800)},[m,f,r,i,function(){m=this.clientWidth,n(0,m)}]}export default class extends n{constructor(t){super(),s(this,t,ys,ms,r,{})}}
//# sourceMappingURL=index-f225274b.js.map
