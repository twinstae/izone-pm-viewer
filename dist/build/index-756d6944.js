import{w as t,h as e,S as n,i as s,s as r,e as i,t as o,j as c,b as l,c as a,d as u,l as d,k as h,f,a as g,m as p,n as m,g as $,o as y,p as w,q as x,r as b,v,x as k,y as M,z as _,A as C,B as O,C as S,D as j,E as L,F as I,G as E,H as P,I as B,J as A,K as z,L as W,M as N,N as R,O as F,P as D,Q as T,R as J,T as V,U as H,V as K}from"./main.js";const q={value:null,color:null},Z={value:"💖",color:"#fff"},Q=[{value:"권은비",color:"#bbb0dc"},{value:"미야와키 사쿠라",color:"#f1d2e7"},{value:"강혜원",color:"#db706c"},{value:"최예나",color:"#fcf695"},{value:"이채연",color:"#a7e0e1"},{value:"김채원",color:"#cee5d5"},{value:"야부키 나코",color:"#b7d3e9"},{value:"혼다 히토미",color:"#f1c3aa"},{value:"김민주",color:"#fff"},{value:"조유리",color:"#f3aa51"},{value:"안유진",color:"#567ace"},{value:"장원영",color:"#d9598c"},{value:"운영팀",color:"gray"}];let U,Y=t(function(){let t=Q.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",Z]]));const e=localStorage.getItem("all_tag_dict");return e&&(console.log("all tag backup loaded"),t=[...t].reduce(((t,e)=>(t.set(e[0],e[1]),t)),new Map(JSON.parse(e)))),t}());Y.subscribe((t=>{var e;localStorage.setItem("all_tag_dict",(e=t,JSON.stringify([...e])))})),Y.subscribe((t=>{U=e=>{const n=e.map((e=>[e[0],new Set(e[1].map((e=>t.get(e))))]));return new Map(n)}}));let G=t((()=>{const t=localStorage.getItem("mail_to_tag_dict");let e=new Map([["m0",new Set([Z])]]);if(t){const n=JSON.parse(t);e=U(n)}return e})());function X(t){return[...t].map((t=>[t[0],[...t[1]].map((t=>t.value))]))}G.subscribe((t=>{if(!t)return null;[...t].forEach((t=>{0==t[1].size&&G.update((e=>(e.delete(t[0]),e)))}));const e=X(t);localStorage.setItem("mail_to_tag_dict",JSON.stringify(e))}));let tt,et=t(""),nt=t(Math.floor(12*Math.random())),st=t({color:null,value:null});Y.subscribe((t=>{tt=e=>new Map(e.map((e=>[t.get(e[0]),new Set(e[1])])))}));let rt=t((()=>{let t=Q.reduce(((t,e)=>(t.set(e,new Set),t)),new Map([[Z,new Set]]));const e=localStorage.getItem("tag_to_mail_dict");if(e){const n=JSON.parse(e);t=[...tt(n)].reduce(((t,e)=>(t.set(e[0],e[1]),t)),t)}return t})());function it(t){return[...t].map((t=>[t[0].value,[...t[1]]]))}rt.subscribe((t=>{if([...t].forEach((([t,e])=>{if(0==e.size&&"💖"!=t.value&&!Q.includes(t)){const e=t.value;rt.update((e=>(e.delete(t),e))),Y.update((t=>(t.delete(e),fetch(`/all-tag-dict/tag/${e}`,{method:"DELETE"}).then((t=>{console.log("서버에서 태그 삭제 완료")})),t))),st.update((e=>e==t?{color:null,value:null}:e))}})),!t)return null;const e=it(t);localStorage.setItem("tag_to_mail_dict",JSON.stringify(e))}));let ot=t([{id:"",member:"",time:"",subject:"",preview:"",n:1}]),ct=t({id:"m20731",member:"광배",time:"2021/03/09 19:23",subject:"사탕",preview:"위즈원 사탕 푸딩 맛 있는거 알았어?? 맛있어보여서 사서 언제먹을지 고민중이야 ."});let lt=t(""),at=e(lt,(t=>"https://papago.naver.com/?sk=ja&tk=ko&hn=1&st="+t.replace(/\&nbsp;<\/div>/g,"\n").replace(/<\/div>/g,"\n").replace(/&nbsp;/g,"").replace(/<(\/)?([a-zA-Z]*)(\s[a-zA-Z]*=[^>]*)?(\s)*(\/)?>/gi,"").replace(/\n\n/g,"\n").replace(/\n/g,"%0A"))),ut=t(1),dt=t(!0),ht=t(!0),ft=e(ht,(t=>!t));function gt(t){let e,n=t[0].value+"";return{c(){e=o(n)},m(t,n){a(t,e,n)},p(t,s){1&s&&n!==(n=t[0].value+"")&&b(e,n)},d(t){t&&f(e)}}}function pt(t){let e,n,s;return{c(){e=i("img"),l(e,"class",n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none"),e.src!==(s="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","파파고 번역하기")},m(t,n){a(t,e,n)},p(t,s){4&s&&n!==(n=("xs"==t[2]?"w-4 h-4":"w-5 h-5")+" float-none")&&l(e,"class",n)},d(t){t&&f(e)}}}function mt(t){let e,n,s,r,g;return{c(){e=i("span"),n=o("X"),c(e,"background-color",t[0].color),l(e,"class",s="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])},m(s,i){a(s,e,i),u(e,n),r||(g=d(e,"click",(function(){h(t[3]?t[3]:t[5])&&(t[3]?t[3]:t[5]).apply(this,arguments)})),r=!0)},p(n,r){t=n,1&r&&c(e,"background-color",t[0].color),5&r&&s!==(s="\r\n"+("#fff"==t[0].color?"border-2 border-l-0 p-0.5 pl-1":"p-1")+"\r\nrounded-r\r\n-ml-2 mt-1 mb-1 p-1\r\ntext-"+t[2])&&l(e,"class",s)},d(t){t&&f(e),r=!1,g()}}}function $t(t){let e,n,s,r,o,u;function $(t,e){return"💖"==t[0].value?pt:gt}let y=$(t),w=y(t),x=(t[3]||t[1]&&"생일"!=t[0].value)&&mt(t);return{c(){e=i("span"),w.c(),s=g(),x&&x.c(),r=p(),c(e,"background-color",t[0].color),l(e,"class",n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\nm-1\r\n"+(t[1]&&"생일"!=t[0].value?"rounded-l border-r-0 pr-2":"rounded")+"\r\ntext-"+t[2]+" text-"+t[4])},m(n,i){a(n,e,i),w.m(e,null),a(n,s,i),x&&x.m(n,i),a(n,r,i),o||(u=d(e,"click",(function(){h(t[3]?t[3]:t[6](t[0]))&&(t[3]?t[3]:t[6](t[0])).apply(this,arguments)})),o=!0)},p(s,[i]){y===(y=$(t=s))&&w?w.p(t,i):(w.d(1),w=y(t),w&&(w.c(),w.m(e,null))),1&i&&c(e,"background-color",t[0].color),23&i&&n!==(n="\r\n"+(""==t[2]?"p-0.5":"#fff"==t[0].color?"border-2 p-0.5":"p-1")+"\r\nm-1\r\n"+(t[1]&&"생일"!=t[0].value?"rounded-l border-r-0 pr-2":"rounded")+"\r\ntext-"+t[2]+" text-"+t[4])&&l(e,"class",n),t[3]||t[1]&&"생일"!=t[0].value?x?x.p(t,i):(x=mt(t),x.c(),x.m(r.parentNode,r)):x&&(x.d(1),x=null)},i:m,o:m,d(t){t&&f(e),w.d(),t&&f(s),x&&x.d(t),t&&f(r),o=!1,u()}}}function yt(t,e,n){let s,r,i,o,c,l,a,u,d;$(t,Y,(t=>n(7,i=t))),$(t,ct,(t=>n(8,o=t))),$(t,rt,(t=>n(9,c=t))),$(t,G,(t=>n(10,l=t))),$(t,st,(t=>n(11,a=t))),$(t,y,(t=>n(12,u=t))),$(t,w,(t=>n(13,d=t)));var h=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};let{tag:f}=e,{canDelete:g=!1}=e,{size:p="xs"}=e,{onRemove:m=null}=e;w.subscribe((t=>{null==t.tag&&a!=q&&x(st,a=q,a),t.tag&&a.value!=t.tag&&x(st,a=i.get(t.tag),a)}));return t.$$set=t=>{"tag"in t&&n(0,f=t.tag),"canDelete"in t&&n(1,g=t.canDelete),"size"in t&&n(2,p=t.size),"onRemove"in t&&n(3,m=t.onRemove)},t.$$.update=()=>{1&t.$$.dirty&&n(4,s="강혜원"==f.value||"장원영"==f.value||"안유진"==f.value||"운영팀"==f.value?"black":"gray-700"),1921&t.$$.dirty&&n(5,r=()=>h(void 0,void 0,void 0,(function*(){const t=i.get(f.value);yield fetch(`/mail-tag-dict/mail/${o.id}/tag/${t.value}`,{method:"DELETE"}),c.get(t).delete(o.id),rt.set(c),l.get(o.id).delete(t),G.set(l)})))},[f,g,p,m,s,r,t=>()=>{st.set(t),u("./",Object.assign(Object.assign({},d),{tag:a.value,nowPage:1}))},i,o,c,l]}class wt extends n{constructor(t){super(),s(this,t,yt,$t,r,{tag:0,canDelete:1,size:2,onRemove:3})}}function xt(t){let e,n,s;return{c(){e=i("span"),n=o(t[0]),c(e,"background-color","pink"),l(e,"class",s="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])},m(t,s){a(t,e,s),u(e,n)},p(t,[r]){1&r&&b(n,t[0]),2&r&&s!==(s="border-1 m-1 rounded\r\n"+(""==t[1]?"p-0.5":"p-1")+"\r\ntext-"+t[1])&&l(e,"class",s)},i:m,o:m,d(t){t&&f(e)}}}function bt(t,e,n){let{time:s}=e,{size:r="xs"}=e;return t.$$set=t=>{"time"in t&&n(0,s=t.time),"size"in t&&n(1,r=t.size)},[s,r]}class vt extends n{constructor(t){super(),s(this,t,bt,xt,r,{time:0,size:1})}}const kt={0:"#d9598c",1:"#f1d2e7",2:"#f3aa51",3:"#fcf695",4:"#567ace",5:"#b7d3e9",6:"#bbb0dc",7:"#db706c",8:"#f1c3aa",9:"#cee5d5",10:"#fff",11:"#a7e0e1",12:"gray"};let Mt=t({});e(Mt,(t=>Object.keys(t).reduce(((t,e)=>({...t,[Mt[e]]:e})),{0:"장원영"})));const _t={0:"장원영",1:"미야와키 사쿠라",2:"조유리",3:"최예나",4:"안유진",5:"야부키 나코",6:"권은비",7:"강혜원",8:"혼다 히토미",9:"김채원",10:"김민주",11:"이채연",12:"운영팀"};function Ct(t){let e,n,s;return{c(){e=i("button"),e.textContent="추가",l(e,"class","text-xs shadow rounded bg-red-400 p-1 m-1")},m(r,i){a(r,e,i),n||(s=d(e,"click",t[2]),n=!0)},p:m,d(t){t&&f(e),n=!1,s()}}}function Ot(t){let e,n,s,r,o,c=t[1]&&Ct(t);return{c(){e=i("input"),n=g(),c&&c.c(),s=p(),l(e,"type","text"),l(e,"class","\r\nborder-2 border-gray\r\nm-1 p-1\r\nrounded w-16\r\ntext-xs"),l(e,"placeholder","새 태그")},m(i,l){a(i,e,l),v(e,t[0]),a(i,n,l),c&&c.m(i,l),a(i,s,l),r||(o=[d(e,"input",t[5]),d(e,"keypress",t[3])],r=!0)},p(t,[n]){1&n&&e.value!==t[0]&&v(e,t[0]),t[1]?c?c.p(t,n):(c=Ct(t),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},i:m,o:m,d(t){t&&f(e),t&&f(n),c&&c.d(t),t&&f(s),r=!1,k(o)}}}function St(t,e,n){let s,r,i,o,c,l,a,u;$(t,et,(t=>n(0,r=t))),$(t,nt,(t=>n(4,i=t))),$(t,Y,(t=>n(7,o=t))),$(t,rt,(t=>n(8,c=t))),$(t,ct,(t=>n(9,l=t))),$(t,G,(t=>n(10,a=t))),$(t,ft,(t=>n(1,u=t)));var d=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};const h=()=>d(void 0,void 0,void 0,(function*(){let t=s;o.has(r)?(t=o.get(r),c.get(t).add(l.id)):(c.set(s,new Set([l.id])),o.set(r,s),Y.set(o),yield fetch("/all-tag-dict/tag",{method:"POST",body:JSON.stringify(s)})),rt.set(c),a.has(l.id)?a.get(l.id).add(t):a.set(l.id,new Set([t])),G.set(a),fetch(`/mail-tag-dict/mail/${l.id}/tag/${s.value}`,{method:"POST"}).then((t=>{console.log("서버에 태그 추가 완료.")})),x(et,r="",r),x(nt,i=(i+1)%12,i)}));return t.$$.update=()=>{17&t.$$.dirty&&(s={value:r,color:kt[i]})},[r,u,h,t=>{"Enter"===t.code&&h()},i,function(){r=this.value,et.set(r)}]}class jt extends n{constructor(t){super(),s(this,t,St,Ot,r,{})}}function Lt(t){let e,n;return{c(){e=i("img"),l(e,"class",Pt),e.src!==(n="./img/empty-star.png")&&l(e,"src","./img/empty-star.png"),l(e,"alt","좋아요 하실래요?")},m(t,n){a(t,e,n)},p:m,d(t){t&&f(e)}}}function It(t){let e,n;return{c(){e=i("img"),l(e,"class",Pt),e.src!==(n="./img/yellow-star.png")&&l(e,"src","./img/yellow-star.png"),l(e,"alt","좋아요 했어요")},m(t,n){a(t,e,n)},p:m,d(t){t&&f(e)}}}function Et(t){let e,n,s,r,o,c;function u(t,e){return(null==n||3&e)&&(n=!!t[1](t[0])),n?It:Lt}let p=u(t,-1),$=p(t);return{c(){e=i("label"),$.c(),s=g(),r=i("input"),l(e,"for","favorite"),l(r,"type","checkbox"),l(r,"class","hidden"),l(r,"id","favorite")},m(n,i){a(n,e,i),$.m(e,null),a(n,s,i),a(n,r,i),o||(c=d(e,"click",(function(){h(t[2](t[0]))&&t[2](t[0]).apply(this,arguments)})),o=!0)},p(n,[s]){p===(p=u(t=n,s))&&$?$.p(t,s):($.d(1),$=p(t),$&&($.c(),$.m(e,null)))},i:m,o:m,d(t){t&&f(e),$.d(),t&&f(s),t&&f(r),o=!1,c()}}}const Pt="w-5 h-5 mt-0.5 float-left";function Bt(t,e,n){let s,r,i,o,c;$(t,Y,(t=>n(4,o=t))),$(t,rt,(t=>n(5,c=t)));let{pm:l}=e;return t.$$set=t=>{"pm"in t&&n(0,l=t.pm)},t.$$.update=()=>{16&t.$$.dirty&&n(3,s=o.get("💖")),40&t.$$.dirty&&n(2,i=t=>()=>{const e=c.get(s);e.has(t.id)?e.delete(t.id):e.add(t.id),rt.set(c)}),40&t.$$.dirty&&n(1,r=t=>c.get(s).has(t.id))},[l,r,i,s,o,c]}class At extends n{constructor(t){super(),s(this,t,Bt,Et,r,{pm:0})}}function zt(t){let e,n;return e=new wt({props:{tag:t[1],size:t[0]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,[n]){const s={};2&n&&(s.tag=t[1]),1&n&&(s.size=t[0]),e.$set(s)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Wt(t,e,n){let s,r;$(t,Y,(t=>n(3,r=t)));let{pm:i}=e,{size:o="xs"}=e;return t.$$set=t=>{"pm"in t&&n(2,i=t.pm),"size"in t&&n(0,o=t.size)},t.$$.update=()=>{12&t.$$.dirty&&n(1,s=r.get(i.member))},[o,s,i,r]}class Nt extends n{constructor(t){super(),s(this,t,Wt,zt,r,{pm:2,size:0})}}let Rt=t(function(){const t=localStorage.getItem("preferences-profile");return t||"latest"}());function Ft(t,e,n){const s=t.slice();return s[4]=e[n],s}function Dt(t){let e,n,s,r,c,h,p,m=t[4].name+"";return{c(){e=i("label"),n=i("input"),s=g(),r=o(m),c=g(),l(n,"type","radio"),n.__value=t[4].path,n.value=n.__value,t[3][0].push(n)},m(i,o){a(i,e,o),u(e,n),n.checked=n.__value===t[0],u(e,s),u(e,r),u(e,c),h||(p=d(n,"change",t[2]),h=!0)},p(t,e){1&e&&(n.checked=n.__value===t[0])},d(s){s&&f(e),t[3][0].splice(t[3][0].indexOf(n),1),h=!1,p()}}}function Tt(t){let e,n,s,r=t[1],o=[];for(let e=0;e<r.length;e+=1)o[e]=Dt(Ft(t,r,e));return{c(){e=i("h3"),e.textContent="프로필 사진을 변경합니다.",n=g(),s=i("div");for(let t=0;t<o.length;t+=1)o[t].c();l(e,"class","svelte-qli48t"),l(s,"class","flex flex-col p-4")},m(t,r){a(t,e,r),a(t,n,r),a(t,s,r);for(let t=0;t<o.length;t+=1)o[t].m(s,null)},p(t,[e]){if(3&e){let n;for(r=t[1],n=0;n<r.length;n+=1){const i=Ft(t,r,n);o[n]?o[n].p(i,e):(o[n]=Dt(i),o[n].c(),o[n].m(s,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i:m,o:m,d(t){t&&f(e),t&&f(n),t&&f(s),j(o,t)}}}function Jt(t,e,n){let s;$(t,Rt,(t=>n(0,s=t)));return[s,[{path:"la-vie-en-rose",name:"라비앙 로즈"},{path:"one-the-story",name:"One The Story 포스터"},{path:"latest",name:"최신 프메"}],function(){s=this.__value,Rt.set(s)},[[]]]}Rt.subscribe((t=>{localStorage.setItem("preferences-profile",t)}));class Vt extends n{constructor(t){super(),s(this,t,Jt,Tt,r,{})}}function Ht(t){let e,n,s,r;return{c(){e=i("img"),e.src!==(n="./img/"+t[1])&&l(e,"src",n),l(e,"class","w-11 h-11 rounded-full \r\nml-1 mt-1 mr-2\r\nfloat-left\r\nborder-gray-100 border-2"),l(e,"alt","")},m(n,i){a(n,e,i),s||(r=[d(e,"pointerdown",t[5]),d(e,"pointerup",t[6]),d(e,"mousedown",t[7]),d(e,"mouseup",t[8])],s=!0)},p(t,[s]){2&s&&e.src!==(n="./img/"+t[1])&&l(e,"src",n)},i:m,o:m,d(t){t&&f(e),s=!1,k(r)}}}function Kt(t,e,n){let s,r;$(t,Rt,(t=>n(4,r=t)));let{pm:i}=e;const{open:o}=L("simple-modal"),c=()=>{o(Vt,{})};let l;return t.$$set=t=>{"pm"in t&&n(3,i=t.pm)},t.$$.update=()=>{24&t.$$.dirty&&n(1,s="운영팀"==i.member?"izone-logo.png":`profile/${r}/${i.member}.jpg`)},[l,s,c,i,r,()=>{n(0,l=setTimeout(c,300))},t=>{clearTimeout(l)},()=>{n(0,l=setTimeout(c,500))},t=>{clearTimeout(l)}]}class qt extends n{constructor(t){super(),s(this,t,Kt,Ht,r,{pm:3})}}function Zt(t){const e=t-1;return e*e*e+1}function Qt(t,{delay:e=0,duration:n=400,easing:s=I}={}){const r=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:s,css:t=>"opacity: "+t*r}}function Ut(t,{delay:e=0,duration:n=400,easing:s=Zt,x:r=0,y:i=0,opacity:o=0}={}){const c=getComputedStyle(t),l=+c.opacity,a="none"===c.transform?"":c.transform,u=l*(1-o);return{delay:e,duration:n,easing:s,css:(t,e)=>`\n\t\t\ttransform: ${a} translate(${(1-t)*r}px, ${(1-t)*i}px);\n\t\t\topacity: ${l-u*e}`}}function Yt(t,e,n){const s=t.slice();return s[14]=e[n],s}function Gt(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Xt(t){let e,n;return e=new wt({props:{tag:t[14],canDelete:!0,size:"sm"}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};8&n&&(s.tag=t[14]),e.$set(s)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function te(t){let e,n,s,r,o,c,h,p=t[7]&&ee(t);return{c(){e=i("div"),n=i("div"),r=g(),p&&p.c(),l(n,"contenteditable","false"),void 0===t[4]&&E((()=>t[12].call(n))),l(e,"class","h-5/6 overflow-scroll p-1")},m(s,i){a(s,e,i),u(e,n),void 0!==t[4]&&(n.innerHTML=t[4]),u(e,r),p&&p.m(e,null),o=!0,c||(h=d(n,"input",t[12]),c=!0)},p(t,s){16&s&&t[4]!==n.innerHTML&&(n.innerHTML=t[4]),t[7]?p?p.p(t,s):(p=ee(t),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(t){o||(E((()=>{s||(s=P(n,Qt,{duration:200},!0)),s.run(1)})),o=!0)},o(t){s||(s=P(n,Qt,{duration:200},!1)),s.run(0),o=!1},d(t){t&&f(e),t&&s&&s.end(),p&&p.d(),c=!1,h()}}}function ee(t){let e,n,s;return{c(){e=i("button"),e.textContent="목록으로 돌아가기🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mt-2")},m(r,i){a(r,e,i),n||(s=d(e,"click",t[13]),n=!0)},p:m,d(t){t&&f(e),n=!1,s()}}}function ne(t){let e,n,s,r,d,h,p,m,$,y,w,x,v,k,L,I,P,W,N,R,F,D,T=t[2].subject+"";r=new qt({props:{pm:t[2]}});let J=t[5]&&Gt();x=new At({props:{pm:t[2]}}),L=new Nt({props:{pm:t[2],size:"sm"}}),P=new vt({props:{time:t[2].time,size:"sm"}});let V=t[3],H=[];for(let e=0;e<V.length;e+=1)H[e]=Xt(Yt(t,V,e));const K=t=>O(H[t],1,1,(()=>{H[t]=null}));R=new jt({});let q=t[4]&&te(t);return{c(){e=i("div"),n=i("div"),s=i("div"),M(r.$$.fragment),d=g(),h=i("h4"),p=o(T),$=g(),J&&J.c(),y=g(),w=i("div"),M(x.$$.fragment),v=g(),k=i("div"),M(L.$$.fragment),I=g(),M(P.$$.fragment),W=g();for(let t=0;t<H.length;t+=1)H[t].c();N=g(),M(R.$$.fragment),F=g(),q&&q.c(),l(h,"class","text-xl m-1 w-4/5"),l(s,"class","relative"),E((()=>t[11].call(s))),l(w,"class","absolute inset-y-0 right-0 m-1 h-8"),l(k,"class","flex flex-wrap"),l(n,"class","relative w-full"),c(e,"max-height",t[6]&&t[0]?"70%":"90%"),l(e,"class","\r\nshadow-2xl rounded-md bg-white \r\nw-full mt-2 p-2\r\nflex flex-col")},m(i,o){a(i,e,o),u(e,n),u(n,s),_(r,s,null),u(s,d),u(s,h),u(h,p),m=B(s,t[11].bind(s)),u(n,$),J&&J.m(n,null),u(n,y),u(n,w),_(x,w,null),u(n,v),u(n,k),_(L,k,null),u(k,I),_(P,k,null),u(k,W);for(let t=0;t<H.length;t+=1)H[t].m(k,null);u(k,N),_(R,k,null),u(e,F),q&&q.m(e,null),D=!0},p(t,[s]){const i={};4&s&&(i.pm=t[2]),r.$set(i),(!D||4&s)&&T!==(T=t[2].subject+"")&&b(p,T),t[5]?J||(J=Gt(),J.c(),J.m(n,y)):J&&(J.d(1),J=null);const o={};4&s&&(o.pm=t[2]),x.$set(o);const l={};4&s&&(l.pm=t[2]),L.$set(l);const a={};if(4&s&&(a.time=t[2].time),P.$set(a),8&s){let e;for(V=t[3],e=0;e<V.length;e+=1){const n=Yt(t,V,e);H[e]?(H[e].p(n,s),C(H[e],1)):(H[e]=Xt(n),H[e].c(),C(H[e],1),H[e].m(k,N))}for(A(),e=V.length;e<H.length;e+=1)K(e);z()}t[4]?q?(q.p(t,s),16&s&&C(q,1)):(q=te(t),q.c(),C(q,1),q.m(e,null)):q&&(A(),O(q,1,1,(()=>{q=null})),z()),(!D||65&s)&&c(e,"max-height",t[6]&&t[0]?"70%":"90%")},i(t){if(!D){C(r.$$.fragment,t),C(x.$$.fragment,t),C(L.$$.fragment,t),C(P.$$.fragment,t);for(let t=0;t<V.length;t+=1)C(H[t]);C(R.$$.fragment,t),C(q),D=!0}},o(t){O(r.$$.fragment,t),O(x.$$.fragment,t),O(L.$$.fragment,t),O(P.$$.fragment,t),H=H.filter(Boolean);for(let t=0;t<H.length;t+=1)O(H[t]);O(R.$$.fragment,t),O(q),D=!1},d(t){t&&f(e),S(r),m(),J&&J.d(),S(x),S(L),S(P),j(H,t),S(R),q&&q.d()}}}function se(t,e,n){let s,r,i,o,c,l,a,u,d;$(t,G,(t=>n(9,o=t))),$(t,ct,(t=>n(2,c=t))),$(t,lt,(t=>n(4,l=t))),$(t,ht,(t=>n(6,a=t))),$(t,ft,(t=>n(7,u=t))),$(t,dt,(t=>n(8,d=t)));let h,{show:f}=e;return t.$$set=t=>{"show"in t&&n(0,f=t.show)},t.$$.update=()=>{516&t.$$.dirty&&n(3,s=o.has(c.id)?Array.from(o.get(c.id)):[]),4&t.$$.dirty&&n(10,r=()=>{x(lt,l="",l),async function(t){const e=await fetch(`./mail/${t}.html`).then((t=>t.text())),n=e.search('<div class="main-contents" id="mail-detail"><html><head></head><body>')+69,s=e.search("</body></html></div>");return e.slice(n,s)}(c.id).then((t=>{setTimeout((()=>{x(lt,l=t,l)}),100)}))}),1024&t.$$.dirty&&r(),2&t.$$.dirty&&n(5,i=h<40)},[f,h,c,s,l,i,a,u,d,o,r,function(){h=this.clientHeight,n(1,h)},function(){l=this.innerHTML,lt.set(l)},()=>{x(dt,d=!0,d)}]}class re extends n{constructor(t){super(),s(this,t,se,ne,r,{show:0})}}function ie(t,e,n){const s=t.slice();return s[5]=e[n],s}function oe(t){let e,n;return e=new wt({props:{tag:t[5],size:t[1]?"xs":"sm"}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};1&n&&(s.tag=t[5]),2&n&&(s.size=t[1]?"xs":"sm"),e.$set(s)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function ce(t){let e,n,s=t[0],r=[];for(let e=0;e<s.length;e+=1)r[e]=oe(ie(t,s,e));const o=t=>O(r[t],1,1,(()=>{r[t]=null}));return{c(){e=i("div");for(let t=0;t<r.length;t+=1)r[t].c();l(e,"class","flex flex-wrap")},m(t,s){a(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,[n]){if(3&n){let i;for(s=t[0],i=0;i<s.length;i+=1){const o=ie(t,s,i);r[i]?(r[i].p(o,n),C(r[i],1)):(r[i]=oe(o),r[i].c(),C(r[i],1),r[i].m(e,null))}for(A(),i=s.length;i<r.length;i+=1)o(i);z()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)C(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)O(r[t]);n=!1},d(t){t&&f(e),j(r,t)}}}function le(t,e,n){let s,r,i,o;return $(t,Y,(t=>n(2,r=t))),$(t,st,(t=>n(3,i=t))),$(t,ht,(t=>n(1,o=t))),t.$$.update=()=>{4&t.$$.dirty&&n(0,s=Array.from(r.values()))},r.has(i.value)&&x(st,i=q,i),[s,o,r]}class ae extends n{constructor(t){super(),s(this,t,le,ce,r,{})}}function ue(t){let e,n,s;return{c(){e=i("button"),e.textContent="목록🗃️",l(e,"class","shadow rounded bg-red-200 p-1 mr-1")},m(r,i){a(r,e,i),n||(s=d(e,"click",t[10]),n=!0)},p:m,d(t){t&&f(e),n=!1,s()}}}function de(t){let e,n,s,r,c;return{c(){e=i("label"),n=o("태그 목록 "),s=i("input"),l(s,"id","isListView"),l(s,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,s),s.checked=t[1],r||(c=d(s,"change",t[11]),r=!0)},p(t,e){2&e&&(s.checked=t[1])},d(t){t&&f(e),r=!1,c()}}}function he(t){let e,n,s,r;return s=new wt({props:{tag:t[2],canDelete:!0,onRemove:t[9]}}),{c(){e=i("span"),e.textContent="현재 :",n=g(),M(s.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),_(s,t,i),r=!0},p(t,e){const n={};4&e&&(n.tag=t[2]),s.$set(n)},i(t){r||(C(s.$$.fragment,t),r=!0)},o(t){O(s.$$.fragment,t),r=!1},d(t){t&&f(e),t&&f(n),S(s,t)}}}function fe(t){let e,n,s,r,d,h,p,m,$,y,w,x,b,v,k,j,L,I,N,R=t[5]&&ue(t),F=650>=t[0]&&t[7]&&de(t),D=t[2].value&&he(t);return b=new ae({}),k=new re({props:{show:650<t[0]||t[1]}}),{c(){e=i("section"),n=i("div"),R&&R.c(),s=g(),r=i("div"),d=i("a"),h=o("번역"),p=i("img"),$=g(),F&&F.c(),y=g(),D&&D.c(),w=g(),x=i("div"),M(b.$$.fragment),v=g(),M(k.$$.fragment),l(p,"class","w-5 h-5 mt-0.5 float-right"),p.src!==(m="./img/papago.png")&&l(p,"src","./img/papago.png"),l(p,"alt","파파고 번역하기"),l(d,"href",t[8]),l(d,"target","_blank"),l(r,"class","w-16 p-1 shadow rounded bg-red-100 mr-1"),l(n,"class","flex flex-row"),c(x,"min-height","43px"),l(x,"class","\r\n    h-36 mt-3 mb-3 p-2\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),W(x,"hidden",!((650<t[0]||t[1])&&t[7])),l(e,"class",j="h-full p-3 "+(t[7]?"w-4/12":"w-full")+" flex flex-col"),E((()=>t[12].call(e))),W(e,"hidden",t[5]&&t[6])},m(i,o){a(i,e,o),u(e,n),R&&R.m(n,null),u(n,s),u(n,r),u(r,d),u(d,h),u(d,p),u(n,$),F&&F.m(n,null),u(n,y),D&&D.m(n,null),u(e,w),u(e,x),_(b,x,null),u(e,v),_(k,e,null),L=B(e,t[12].bind(e)),N=!0},p(t,[r]){t[5]?R?R.p(t,r):(R=ue(t),R.c(),R.m(n,s)):R&&(R.d(1),R=null),(!N||256&r)&&l(d,"href",t[8]),650>=t[0]&&t[7]?F?F.p(t,r):(F=de(t),F.c(),F.m(n,y)):F&&(F.d(1),F=null),t[2].value?D?(D.p(t,r),4&r&&C(D,1)):(D=he(t),D.c(),C(D,1),D.m(n,null)):D&&(A(),O(D,1,1,(()=>{D=null})),z()),131&r&&W(x,"hidden",!((650<t[0]||t[1])&&t[7]));const i={};3&r&&(i.show=650<t[0]||t[1]),k.$set(i),(!N||128&r&&j!==(j="h-full p-3 "+(t[7]?"w-4/12":"w-full")+" flex flex-col"))&&l(e,"class",j),224&r&&W(e,"hidden",t[5]&&t[6])},i(t){N||(C(D),C(b.$$.fragment,t),C(k.$$.fragment,t),E((()=>{I||(I=P(e,Ut,{x:-400,duration:400},!0)),I.run(1)})),N=!0)},o(t){O(D),O(b.$$.fragment,t),O(k.$$.fragment,t),I||(I=P(e,Ut,{x:-400,duration:400},!1)),I.run(0),N=!1},d(t){t&&f(e),R&&R.d(),F&&F.d(),D&&D.d(),S(b),S(k),L(),t&&I&&I.end()}}}function ge(t,e,n){let s,r,i,o,c,l,a,u;$(t,st,(t=>n(2,s=t))),$(t,ut,(t=>n(13,r=t))),$(t,y,(t=>n(3,i=t))),$(t,w,(t=>n(4,o=t))),$(t,ft,(t=>n(5,c=t))),$(t,dt,(t=>n(6,l=t))),$(t,ht,(t=>n(7,a=t))),$(t,at,(t=>n(8,u=t)));let d,h;return[d,h,s,i,o,c,l,a,u,()=>{x(st,s=q,s),x(ut,r=1,r),i("./",Object.assign(Object.assign({},o),{tag:""}))},()=>{x(dt,l=!0,l),i("./",{...o,showList:!0})},function(){h=this.checked,n(1,h)},function(){d=this.clientHeight,n(0,d)}]}class pe extends n{constructor(t){super(),s(this,t,ge,fe,r,{})}}const me=ye(new Date(2021,2,20));let $e=t(me);function ye(t){let e=""+(t.getMonth()+1),n=""+t.getDate();const s=t.getFullYear();return e.length<2&&(e="0"+e),n.length<2&&(n="0"+n),[s,e,n].join("-")}function we(t){const[e,n,s]=t.split("-").map((t=>parseInt(t)));return new Date(e,n-1,s)}const xe=t=>t.split(" ")[0].replace(/\//g,"-");function be(t){let e,n,s,r;const o=t[3].default,c=N(o,t,t[2],null);return{c(){e=i("button"),c&&c.c(),l(e,"id",t[1]),l(e,"class","rounded bg-red-100 m-2 pl-1 pr-1")},m(i,o){a(i,e,o),c&&c.m(e,null),n=!0,s||(r=d(e,"click",(function(){h(t[0])&&t[0].apply(this,arguments)})),s=!0)},p(s,[r]){t=s,c&&c.p&&4&r&&R(c,o,t,t[2],r,null,null),(!n||2&r)&&l(e,"id",t[1])},i(t){n||(C(c,t),n=!0)},o(t){O(c,t),n=!1},d(t){t&&f(e),c&&c.d(t),s=!1,r()}}}function ve(t,e,n){let{$$slots:s={},$$scope:r}=e,{onClick:i}=e,{id:o}=e;return t.$$set=t=>{"onClick"in t&&n(0,i=t.onClick),"id"in t&&n(1,o=t.id),"$$scope"in t&&n(2,r=t.$$scope)},[i,o,r,s]}class ke extends n{constructor(t){super(),s(this,t,ve,be,r,{onClick:0,id:1})}}function Me(t){let e;return{c(){e=o("이전")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function _e(t){let e;return{c(){e=o("다음")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Ce(t){let e;return{c(){e=o("어제")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Oe(t){let e;return{c(){e=o("내일")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Se(t){let e,n,s,r,c,h,p,m,$,y,w,x,j,L,I,E,P,B,A,z,N;return e=new ke({props:{id:"BackPageButton",onClick:t[8],$$slots:{default:[Me]},$$scope:{ctx:t}}}),y=new ke({props:{id:"NextPageButton",onClick:t[7],$$slots:{default:[_e]},$$scope:{ctx:t}}}),L=new ke({props:{id:"toYesterdayButton",onClick:t[5],$$slots:{default:[Ce]},$$scope:{ctx:t}}}),B=new ke({props:{id:"toTomorrowButton",onClick:t[6],$$slots:{default:[Oe]},$$scope:{ctx:t}}}),{c(){M(e.$$.fragment),n=g(),s=i("span"),r=i("input"),c=g(),h=i("span"),p=o("/ "),m=o(t[0]),$=g(),M(y.$$.fragment),w=g(),x=i("br"),j=g(),M(L.$$.fragment),I=g(),E=i("input"),P=g(),M(B.$$.fragment),l(r,"id","NowPageInput"),l(r,"type","number"),l(r,"class","w-9"),l(r,"min","1"),l(r,"max",t[0]),W(r,"bg-red-300",t[0]<=t[1]),l(s,"id","NowPageSpan"),l(s,"class","bg-white border-2 border-gray-400 rounded w-24 p-1"),W(s,"bg-red-300",t[0]<=t[1]),W(s,"border-red-300",t[0]<=t[1]),l(E,"type","date"),l(E,"class","border-1 w-36 border-gray-400 rounded")},m(i,o){_(e,i,o),a(i,n,o),a(i,s,o),u(s,r),v(r,t[1]),u(s,c),u(s,h),u(h,p),u(h,m),a(i,$,o),_(y,i,o),a(i,w,o),a(i,x,o),a(i,j,o),_(L,i,o),a(i,I,o),a(i,E,o),v(E,t[2]),a(i,P,o),_(B,i,o),A=!0,z||(N=[d(r,"input",t[9]),d(E,"input",t[10]),d(E,"change",t[11])],z=!0)},p(t,[n]){const i={};8192&n&&(i.$$scope={dirty:n,ctx:t}),e.$set(i),(!A||1&n)&&l(r,"max",t[0]),2&n&&F(r.value)!==t[1]&&v(r,t[1]),3&n&&W(r,"bg-red-300",t[0]<=t[1]),(!A||1&n)&&b(m,t[0]),3&n&&W(s,"bg-red-300",t[0]<=t[1]),3&n&&W(s,"border-red-300",t[0]<=t[1]);const o={};8192&n&&(o.$$scope={dirty:n,ctx:t}),y.$set(o);const c={};8192&n&&(c.$$scope={dirty:n,ctx:t}),L.$set(c),4&n&&v(E,t[2]);const a={};8192&n&&(a.$$scope={dirty:n,ctx:t}),B.$set(a)},i(t){A||(C(e.$$.fragment,t),C(y.$$.fragment,t),C(L.$$.fragment,t),C(B.$$.fragment,t),A=!0)},o(t){O(e.$$.fragment,t),O(y.$$.fragment,t),O(L.$$.fragment,t),O(B.$$.fragment,t),A=!1},d(t){S(e,t),t&&f(n),t&&f(s),t&&f($),S(y,t),t&&f(w),t&&f(x),t&&f(j),S(L,t),t&&f(I),t&&f(E),t&&f(P),S(B,t),z=!1,k(N)}}}function je(t,e,n){let s,r,i,o,c;$(t,st,(t=>n(12,s=t))),$(t,ut,(t=>n(1,r=t))),$(t,$e,(t=>n(2,i=t))),$(t,y,(t=>n(3,o=t))),$(t,w,(t=>n(4,c=t)));let{maxPage:l}=e;w.subscribe((t=>{const e=parseInt(t.nowPage);r!=e&&x(ut,r=t.nowPage?e:1,r),i!=t.dateString&&x($e,i=t.dateString||me,i)}));return t.$$set=t=>{"maxPage"in t&&n(0,l=t.maxPage)},[l,r,i,o,c,function(){if(s.value)return r<l&&x(ut,r+=1,r),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),a=new Date(t,e-1,n-1);x($e,i=ye(a),i),x(ut,r=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r,dateString:i}))},function(){if(s.value)return r>1&&x(ut,r-=1,r),null;const[t,e,n]=i.split("-").map((t=>parseInt(t))),l=new Date(t,e-1,n+1);x($e,i=ye(l),i),x(ut,r=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r,dateString:i}))},function(){r<l?(x(ut,r+=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r}))):alert("마지막 페이지입니다.")},function(){r>1?(x(ut,r-=1,r),o("./",Object.assign(Object.assign({},c),{nowPage:r}))):alert("시작 페이지입니다.")},function(){r=F(this.value),ut.set(r)},function(){i=this.value,$e.set(i)},()=>{x(ut,r=1,r),o("./",{...c,nowPage:r,dateString:i})}]}class Le extends n{constructor(t){super(),s(this,t,je,Se,r,{maxPage:0})}}function Ie(t,e,n){const s=t.slice();return s[12]=e[n],s}function Ee(t){let e;return{c(){e=i("span"),l(e,"class","\r\n        border-1 text-lg\r\n        rounded bg-white text-white")},m(t,n){a(t,e,n)},p:m,i:m,o:m,d(t){t&&f(e)}}}function Pe(t){let e,n,s,r,c,p,m,$,y,w,x,v,k,L,I,E,P,B,W=t[0].subject+"",N=(t[0].preview||"...")+"";e=new qt({props:{pm:t[0]}}),r=new At({props:{pm:t[0]}}),p=new Nt({props:{pm:t[0]}}),$=new vt({props:{time:t[0].time}});let R=t[6]&&Be(),F=t[4](t[0]),D=[];for(let e=0;e<F.length;e+=1)D[e]=Ae(Ie(t,F,e));const T=t=>O(D[t],1,1,(()=>{D[t]=null}));return{c(){M(e.$$.fragment),n=g(),s=i("p"),M(r.$$.fragment),c=g(),M(p.$$.fragment),m=g(),M($.$$.fragment),y=g(),R&&R.c(),w=g();for(let t=0;t<D.length;t+=1)D[t].c();x=g(),v=o(W),k=g(),L=i("p"),I=o(N),l(s,"class","truncate"),l(L,"class","ml-1 mt-1 text-sm truncate")},m(i,o){_(e,i,o),a(i,n,o),a(i,s,o),_(r,s,null),u(s,c),_(p,s,null),u(s,m),_($,s,null),u(s,y),R&&R.m(s,null),u(s,w);for(let t=0;t<D.length;t+=1)D[t].m(s,null);u(s,x),u(s,v),a(i,k,o),a(i,L,o),u(L,I),E=!0,P||(B=d(L,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),P=!0)},p(n,i){t=n;const o={};1&i&&(o.pm=t[0]),e.$set(o);const c={};1&i&&(c.pm=t[0]),r.$set(c);const l={};1&i&&(l.pm=t[0]),p.$set(l);const a={};if(1&i&&(a.time=t[0].time),$.$set(a),t[6]?R||(R=Be(),R.c(),R.m(s,w)):R&&(R.d(1),R=null),17&i){let e;for(F=t[4](t[0]),e=0;e<F.length;e+=1){const n=Ie(t,F,e);D[e]?(D[e].p(n,i),C(D[e],1)):(D[e]=Ae(n),D[e].c(),C(D[e],1),D[e].m(s,x))}for(A(),e=F.length;e<D.length;e+=1)T(e);z()}(!E||1&i)&&W!==(W=t[0].subject+"")&&b(v,W),(!E||1&i)&&N!==(N=(t[0].preview||"...")+"")&&b(I,N)},i(t){if(!E){C(e.$$.fragment,t),C(r.$$.fragment,t),C(p.$$.fragment,t),C($.$$.fragment,t);for(let t=0;t<F.length;t+=1)C(D[t]);E=!0}},o(t){O(e.$$.fragment,t),O(r.$$.fragment,t),O(p.$$.fragment,t),O($.$$.fragment,t),D=D.filter(Boolean);for(let t=0;t<D.length;t+=1)O(D[t]);E=!1},d(t){S(e,t),t&&f(n),t&&f(s),S(r),S(p),S($),R&&R.d(),j(D,t),t&&f(k),t&&f(L),P=!1,B()}}}function Be(t){let e;return{c(){e=i("br")},m(t,n){a(t,e,n)},d(t){t&&f(e)}}}function Ae(t){let e,n;return e=new wt({props:{tag:t[12]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};17&n&&(s.tag=t[12]),e.$set(s)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function ze(t){let e,n,s=t[0].member&&We(t);return{c(){e=i("li"),s&&s.c(),l(e,"class","border-b-2 rounded w-full text-gray-500 truncate"),c(e,"font-size","10px"),c(e,"height","20px")},m(t,r){a(t,e,r),s&&s.m(e,null),n=!0},p(t,n){t[0].member?s?(s.p(t,n),1&n&&C(s,1)):(s=We(t),s.c(),C(s,1),s.m(e,null)):s&&(A(),O(s,1,1,(()=>{s=null})),z())},i(t){n||(C(s),n=!0)},o(t){O(s),n=!1},d(t){t&&f(e),s&&s.d()}}}function We(t){let e,n,s,r,c,l,d,h,p=t[0].subject+"",m=" "+t[0].preview;return e=new Nt({props:{pm:t[0],size:""}}),s=new vt({props:{time:t[0].time,size:""}}),{c(){M(e.$$.fragment),n=g(),M(s.$$.fragment),r=g(),c=i("strong"),l=o(p),d=o(m)},m(t,i){_(e,t,i),a(t,n,i),_(s,t,i),a(t,r,i),a(t,c,i),u(c,l),a(t,d,i),h=!0},p(t,n){const r={};1&n&&(r.pm=t[0]),e.$set(r);const i={};1&n&&(i.time=t[0].time),s.$set(i),(!h||1&n)&&p!==(p=t[0].subject+"")&&b(l,p),(!h||1&n)&&m!==(m=" "+t[0].preview)&&b(d,m)},i(t){h||(C(e.$$.fragment,t),C(s.$$.fragment,t),h=!0)},o(t){O(e.$$.fragment,t),O(s.$$.fragment,t),h=!1},d(t){S(e,t),t&&f(n),S(s,t),t&&f(r),t&&f(c),t&&f(d)}}}function Ne(t){let e,n,s,r,o,d,h,m;const $=[Pe,Ee],y=[];function w(t,e){return t[0].member?0:1}s=w(t),r=y[s]=$[s](t);let x=t[1]&&ze(t);return{c(){e=i("li"),n=i("div"),r.c(),d=g(),x&&x.c(),h=p(),l(e,"id",o="MailItem-"+t[2]),c(e,"height",t[5]?"62px":"84px"),l(e,"class","border-b-2 rounded p-1 w-full"),W(e,"hidden",t[1])},m(t,r){a(t,e,r),u(e,n),y[s].m(n,null),a(t,d,r),x&&x.m(t,r),a(t,h,r),m=!0},p(t,[i]){let a=s;s=w(t),s===a?y[s].p(t,i):(A(),O(y[a],1,1,(()=>{y[a]=null})),z(),r=y[s],r?r.p(t,i):(r=y[s]=$[s](t),r.c()),C(r,1),r.m(n,null)),(!m||4&i&&o!==(o="MailItem-"+t[2]))&&l(e,"id",o),(!m||32&i)&&c(e,"height",t[5]?"62px":"84px"),2&i&&W(e,"hidden",t[1]),t[1]?x?(x.p(t,i),2&i&&C(x,1)):(x=ze(t),x.c(),C(x,1),x.m(h.parentNode,h)):x&&(A(),O(x,1,1,(()=>{x=null})),z())},i(t){m||(C(r),C(x),m=!0)},o(t){O(r),O(x),m=!1},d(t){t&&f(e),y[s].d(),t&&f(d),x&&x.d(t),t&&f(h)}}}function Re(t,e,n){let s,r,i,o,c,l,a,u,d;$(t,ct,(t=>n(10,i=t))),$(t,dt,(t=>n(11,o=t))),$(t,y,(t=>n(7,c=t))),$(t,w,(t=>n(8,l=t))),$(t,G,(t=>n(9,a=t))),$(t,ht,(t=>n(5,u=t))),$(t,ft,(t=>n(6,d=t)));let{pm:h}=e,{hidden:f}=e,{index:g}=e;return t.$$set=t=>{"pm"in t&&n(0,h=t.pm),"hidden"in t&&n(1,f=t.hidden),"index"in t&&n(2,g=t.index)},t.$$.update=()=>{385&t.$$.dirty&&n(3,s=()=>{h&&(x(ct,i=h,i),x(dt,o=!1,o),c("./",Object.assign(Object.assign({},l),{showList:!1})))}),512&t.$$.dirty&&n(4,r=t=>a.has(t.id)?Array.from(a.get(t.id)):[])},[h,f,g,s,r,u,d,c,l,a]}class Fe extends n{constructor(t){super(),s(this,t,Re,Ne,r,{pm:0,hidden:1,index:2})}}function De(t,e,n){const s=t.slice();return s[9]=e[n],s}function Te(t){let e,n;return{c(){e=i("img"),l(e,"class","ml-5 m-3 w-10/12"),l(e,"alt","no mail"),e.src!==(n="./img/izone-logo-card.png")&&l(e,"src","./img/izone-logo-card.png")},m(t,n){a(t,e,n)},p:m,i:m,o:m,d(t){t&&f(e)}}}function Je(t){let e,n,s,r,c,p,m,$,y,w,x,v,L,I,E,P,B,W,N,R,F=t[0].subject+"",D=t[0].preview+"";n=new qt({props:{pm:t[0]}}),$=new At({props:{pm:t[0]}}),x=new Nt({props:{pm:t[0]}}),L=new vt({props:{time:t[0].time}});let T=t[2](t[0]),J=[];for(let e=0;e<T.length;e+=1)J[e]=Ve(De(t,T,e));const V=t=>O(J[t],1,1,(()=>{J[t]=null}));return{c(){e=i("div"),M(n.$$.fragment),s=g(),r=i("h4"),c=o(F),p=g(),m=i("div"),M($.$$.fragment),y=g(),w=i("div"),M(x.$$.fragment),v=g(),M(L.$$.fragment),I=g();for(let t=0;t<J.length;t+=1)J[t].c();E=g(),P=i("p"),B=o(D),l(r,"class","w-10/12 h-12"),l(m,"class","absolute inset-y-0 right-0 m-2"),l(w,"class","flex flex-wrap"),l(P,"class","m-1 text-sm")},m(i,o){a(i,e,o),_(n,e,null),u(e,s),u(e,r),u(r,c),a(i,p,o),a(i,m,o),_($,m,null),a(i,y,o),a(i,w,o),_(x,w,null),u(w,v),_(L,w,null),u(w,I);for(let t=0;t<J.length;t+=1)J[t].m(w,null);a(i,E,o),a(i,P,o),u(P,B),W=!0,N||(R=[d(e,"click",(function(){h(t[3])&&t[3].apply(this,arguments)})),d(P,"click",(function(){h(t[3])&&t[3].apply(this,arguments)}))],N=!0)},p(e,s){t=e;const r={};1&s&&(r.pm=t[0]),n.$set(r),(!W||1&s)&&F!==(F=t[0].subject+"")&&b(c,F);const i={};1&s&&(i.pm=t[0]),$.$set(i);const o={};1&s&&(o.pm=t[0]),x.$set(o);const l={};if(1&s&&(l.time=t[0].time),L.$set(l),5&s){let e;for(T=t[2](t[0]),e=0;e<T.length;e+=1){const n=De(t,T,e);J[e]?(J[e].p(n,s),C(J[e],1)):(J[e]=Ve(n),J[e].c(),C(J[e],1),J[e].m(w,null))}for(A(),e=T.length;e<J.length;e+=1)V(e);z()}(!W||1&s)&&D!==(D=t[0].preview+"")&&b(B,D)},i(t){if(!W){C(n.$$.fragment,t),C($.$$.fragment,t),C(x.$$.fragment,t),C(L.$$.fragment,t);for(let t=0;t<T.length;t+=1)C(J[t]);W=!0}},o(t){O(n.$$.fragment,t),O($.$$.fragment,t),O(x.$$.fragment,t),O(L.$$.fragment,t),J=J.filter(Boolean);for(let t=0;t<J.length;t+=1)O(J[t]);W=!1},d(t){t&&f(e),S(n),t&&f(p),t&&f(m),S($),t&&f(y),t&&f(w),S(x),S(L),j(J,t),t&&f(E),t&&f(P),N=!1,k(R)}}}function Ve(t){let e,n;return e=new wt({props:{tag:t[9]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};5&n&&(s.tag=t[9]),e.$set(s)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function He(t){let e,n,s,r,o;const u=[Je,Te],d=[];function h(t,e){return t[0].member?0:1}return n=h(t),s=d[n]=u[n](t),{c(){e=i("div"),s.c(),l(e,"id",r="MailCard-"+t[1]),c(e,"height","156px"),l(e,"class","\r\nw-64 m-3 p-1\r\nrelative overflow-y-scroll\r\nbg-white shadow-md rounded-md")},m(t,s){a(t,e,s),d[n].m(e,null),o=!0},p(t,[i]){let c=n;n=h(t),n===c?d[n].p(t,i):(A(),O(d[c],1,1,(()=>{d[c]=null})),z(),s=d[n],s?s.p(t,i):(s=d[n]=u[n](t),s.c()),C(s,1),s.m(e,null)),(!o||2&i&&r!==(r="MailCard-"+t[1]))&&l(e,"id",r)},i(t){o||(C(s),o=!0)},o(t){O(s),o=!1},d(t){t&&f(e),d[n].d()}}}function Ke(t,e,n){let s,r,i,o,c,l,a;$(t,G,(t=>n(4,i=t))),$(t,ct,(t=>n(7,o=t))),$(t,dt,(t=>n(8,c=t))),$(t,y,(t=>n(5,l=t))),$(t,w,(t=>n(6,a=t)));let{pm:u}=e,{index:d}=e;return t.$$set=t=>{"pm"in t&&n(0,u=t.pm),"index"in t&&n(1,d=t.index)},t.$$.update=()=>{16&t.$$.dirty&&n(2,s=t=>i.has(t.id)?Array.from(i.get(t.id)):[]),97&t.$$.dirty&&n(3,r=()=>{u&&(x(ct,o=u,o),x(dt,c=!1,c),l("./",Object.assign(Object.assign({},a),{showList:!1})))})},[u,d,s,r,i,l,a]}class qe extends n{constructor(t){super(),s(this,t,Ke,He,r,{pm:0,index:1})}}function Ze(t){return Array.isArray?Array.isArray(t):"[object Array]"===en(t)}function Qe(t){return"string"==typeof t}function Ue(t){return"number"==typeof t}function Ye(t){return!0===t||!1===t||function(t){return Ge(t)&&null!==t}(t)&&"[object Boolean]"==en(t)}function Ge(t){return"object"==typeof t}function Xe(t){return null!=t}function tn(t){return!t.trim().length}function en(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const nn=Object.prototype.hasOwnProperty;class sn{constructor(t){this._keys=[],this._keyMap={};let e=0;t.forEach((t=>{let n=rn(t);e+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,e+=n.weight})),this._keys.forEach((t=>{t.weight/=e}))}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function rn(t){let e=null,n=null,s=null,r=1;if(Qe(t)||Ze(t))s=t,e=on(t),n=cn(t);else{if(!nn.call(t,"name"))throw new Error((t=>`Missing ${t} property in key`)("name"));const i=t.name;if(s=i,nn.call(t,"weight")&&(r=t.weight,r<=0))throw new Error((t=>`Property 'weight' in key '${t}' must be a positive integer`)(i));e=on(i),n=cn(i)}return{path:e,id:n,weight:r,src:s}}function on(t){return Ze(t)?t:t.split(".")}function cn(t){return Ze(t)?t.join("."):t}var ln={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...{useExtendedSearch:!1,getFn:function(t,e){let n=[],s=!1;const r=(t,e,i)=>{if(Xe(t))if(e[i]){const o=t[e[i]];if(!Xe(o))return;if(i===e.length-1&&(Qe(o)||Ue(o)||Ye(o)))n.push(function(t){return null==t?"":function(t){if("string"==typeof t)return t;let e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}(o));else if(Ze(o)){s=!0;for(let t=0,n=o.length;t<n;t+=1)r(o[t],e,i+1)}else e.length&&r(o,e,i+1)}else n.push(t)};return r(t,Qe(e)?e.split("."):e,0),s?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1}};const an=/[^ ]+/g;class un{constructor({getFn:t=ln.getFn}={}){this.norm=function(t=3){const e=new Map,n=Math.pow(10,t);return{get(t){const s=t.match(an).length;if(e.has(s))return e.get(s);const r=1/Math.sqrt(s),i=parseFloat(Math.round(r*n)/n);return e.set(s,i),i},clear(){e.clear()}}}(3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach(((t,e)=>{this._keysMap[t.id]=e}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Qe(this.docs[0])?this.docs.forEach(((t,e)=>{this._addString(t,e)})):this.docs.forEach(((t,e)=>{this._addObject(t,e)})),this.norm.clear())}add(t){const e=this.size();Qe(t)?this._addString(t,e):this._addObject(t,e)}removeAt(t){this.records.splice(t,1);for(let e=t,n=this.size();e<n;e+=1)this.records[e].i-=1}getValueForItemAtKeyId(t,e){return t[this._keysMap[e]]}size(){return this.records.length}_addString(t,e){if(!Xe(t)||tn(t))return;let n={v:t,i:e,n:this.norm.get(t)};this.records.push(n)}_addObject(t,e){let n={i:e,$:{}};this.keys.forEach(((e,s)=>{let r=this.getFn(t,e.path);if(Xe(r))if(Ze(r)){let t=[];const e=[{nestedArrIndex:-1,value:r}];for(;e.length;){const{nestedArrIndex:n,value:s}=e.pop();if(Xe(s))if(Qe(s)&&!tn(s)){let e={v:s,i:n,n:this.norm.get(s)};t.push(e)}else Ze(s)&&s.forEach(((t,n)=>{e.push({nestedArrIndex:n,value:t})}))}n.$[s]=t}else if(!tn(r)){let t={v:r,n:this.norm.get(r)};n.$[s]=t}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function dn(t,e,{getFn:n=ln.getFn}={}){const s=new un({getFn:n});return s.setKeys(t.map(rn)),s.setSources(e),s.create(),s}function hn(t,{errors:e=0,currentLocation:n=0,expectedLocation:s=0,distance:r=ln.distance,ignoreLocation:i=ln.ignoreLocation}={}){const o=e/t.length;if(i)return o;const c=Math.abs(s-n);return r?o+c/r:c?1:o}function fn(t,e,n,{location:s=ln.location,distance:r=ln.distance,threshold:i=ln.threshold,findAllMatches:o=ln.findAllMatches,minMatchCharLength:c=ln.minMatchCharLength,includeMatches:l=ln.includeMatches,ignoreLocation:a=ln.ignoreLocation}={}){if(e.length>32)throw new Error(`Pattern length exceeds max of ${32}.`);const u=e.length,d=t.length,h=Math.max(0,Math.min(s,d));let f=i,g=h;const p=c>1||l,m=p?Array(d):[];let $;for(;($=t.indexOf(e,g))>-1;){let t=hn(e,{currentLocation:$,expectedLocation:h,distance:r,ignoreLocation:a});if(f=Math.min(t,f),g=$+u,p){let t=0;for(;t<u;)m[$+t]=1,t+=1}}g=-1;let y=[],w=1,x=u+d;const b=1<<u-1;for(let s=0;s<u;s+=1){let i=0,c=x;for(;i<c;){hn(e,{errors:s,currentLocation:h+c,expectedLocation:h,distance:r,ignoreLocation:a})<=f?i=c:x=c,c=Math.floor((x-i)/2+i)}x=c;let l=Math.max(1,h-c+1),$=o?d:Math.min(h+c,d)+u,v=Array($+2);v[$+1]=(1<<s)-1;for(let i=$;i>=l;i-=1){let o=i-1,c=n[t.charAt(o)];if(p&&(m[o]=+!!c),v[i]=(v[i+1]<<1|1)&c,s&&(v[i]|=(y[i+1]|y[i])<<1|1|y[i+1]),v[i]&b&&(w=hn(e,{errors:s,currentLocation:o,expectedLocation:h,distance:r,ignoreLocation:a}),w<=f)){if(f=w,g=o,g<=h)break;l=Math.max(1,2*h-g)}}if(hn(e,{errors:s+1,currentLocation:h,expectedLocation:h,distance:r,ignoreLocation:a})>f)break;y=v}const v={isMatch:g>=0,score:Math.max(.001,w)};if(p){const t=function(t=[],e=ln.minMatchCharLength){let n=[],s=-1,r=-1,i=0;for(let o=t.length;i<o;i+=1){let o=t[i];o&&-1===s?s=i:o||-1===s||(r=i-1,r-s+1>=e&&n.push([s,r]),s=-1)}return t[i-1]&&i-s>=e&&n.push([s,i-1]),n}(m,c);t.length?l&&(v.indices=t):v.isMatch=!1}return v}function gn(t){let e={};for(let n=0,s=t.length;n<s;n+=1){const r=t.charAt(n);e[r]=(e[r]||0)|1<<s-n-1}return e}class pn{constructor(t,{location:e=ln.location,threshold:n=ln.threshold,distance:s=ln.distance,includeMatches:r=ln.includeMatches,findAllMatches:i=ln.findAllMatches,minMatchCharLength:o=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreLocation:l=ln.ignoreLocation}={}){if(this.options={location:e,threshold:n,distance:s,includeMatches:r,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const a=(t,e)=>{this.chunks.push({pattern:t,alphabet:gn(t),startIndex:e})},u=this.pattern.length;if(u>32){let t=0;const e=u%32,n=u-e;for(;t<n;)a(this.pattern.substr(t,32),t),t+=32;if(e){const t=u-32;a(this.pattern.substr(t),t)}}else a(this.pattern,0)}searchIn(t){const{isCaseSensitive:e,includeMatches:n}=this.options;if(e||(t=t.toLowerCase()),this.pattern===t){let e={isMatch:!0,score:0};return n&&(e.indices=[[0,t.length-1]]),e}const{location:s,distance:r,threshold:i,findAllMatches:o,minMatchCharLength:c,ignoreLocation:l}=this.options;let a=[],u=0,d=!1;this.chunks.forEach((({pattern:e,alphabet:h,startIndex:f})=>{const{isMatch:g,score:p,indices:m}=fn(t,e,h,{location:s+f,distance:r,threshold:i,findAllMatches:o,minMatchCharLength:c,includeMatches:n,ignoreLocation:l});g&&(d=!0),u+=p,g&&m&&(a=[...a,...m])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=a),h}}class mn{constructor(t){this.pattern=t}static isMultiMatch(t){return $n(t,this.multiRegex)}static isSingleMatch(t){return $n(t,this.singleRegex)}search(){}}function $n(t,e){const n=t.match(e);return n?n[1]:null}class yn extends mn{constructor(t,{location:e=ln.location,threshold:n=ln.threshold,distance:s=ln.distance,includeMatches:r=ln.includeMatches,findAllMatches:i=ln.findAllMatches,minMatchCharLength:o=ln.minMatchCharLength,isCaseSensitive:c=ln.isCaseSensitive,ignoreLocation:l=ln.ignoreLocation}={}){super(t),this._bitapSearch=new pn(t,{location:e,threshold:n,distance:s,includeMatches:r,findAllMatches:i,minMatchCharLength:o,isCaseSensitive:c,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class wn extends mn{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let e,n=0;const s=[],r=this.pattern.length;for(;(e=t.indexOf(this.pattern,n))>-1;)n=e+r,s.push([e,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const xn=[class extends mn{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const e=t===this.pattern;return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},wn,class extends mn{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const e=t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,this.pattern.length-1]}}},class extends mn{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const e=!t.startsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends mn{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const e=!t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},class extends mn{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const e=t.endsWith(this.pattern);return{isMatch:e,score:e?0:1,indices:[t.length-this.pattern.length,t.length-1]}}},class extends mn{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const e=-1===t.indexOf(this.pattern);return{isMatch:e,score:e?0:1,indices:[0,t.length-1]}}},yn],bn=xn.length,vn=/ +(?=([^\"]*\"[^\"]*\")*[^\"]*$)/;const kn=new Set([yn.type,wn.type]);class Mn{constructor(t,{isCaseSensitive:e=ln.isCaseSensitive,includeMatches:n=ln.includeMatches,minMatchCharLength:s=ln.minMatchCharLength,ignoreLocation:r=ln.ignoreLocation,findAllMatches:i=ln.findAllMatches,location:o=ln.location,threshold:c=ln.threshold,distance:l=ln.distance}={}){this.query=null,this.options={isCaseSensitive:e,includeMatches:n,minMatchCharLength:s,findAllMatches:i,ignoreLocation:r,location:o,threshold:c,distance:l},this.pattern=e?t:t.toLowerCase(),this.query=function(t,e={}){return t.split("|").map((t=>{let n=t.trim().split(vn).filter((t=>t&&!!t.trim())),s=[];for(let t=0,r=n.length;t<r;t+=1){const r=n[t];let i=!1,o=-1;for(;!i&&++o<bn;){const t=xn[o];let n=t.isMultiMatch(r);n&&(s.push(new t(n,e)),i=!0)}if(!i)for(o=-1;++o<bn;){const t=xn[o];let n=t.isSingleMatch(r);if(n){s.push(new t(n,e));break}}}return s}))}(this.pattern,this.options)}static condition(t,e){return e.useExtendedSearch}searchIn(t){const e=this.query;if(!e)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let r=0,i=[],o=0;for(let s=0,c=e.length;s<c;s+=1){const c=e[s];i.length=0,r=0;for(let e=0,s=c.length;e<s;e+=1){const s=c[e],{isMatch:l,indices:a,score:u}=s.search(t);if(!l){o=0,r=0,i.length=0;break}if(r+=1,o+=u,n){const t=s.constructor.type;kn.has(t)?i=[...i,...a]:i.push(a)}}if(r){let t={isMatch:!0,score:o/r};return n&&(t.indices=i),t}}return{isMatch:!1,score:1}}}const _n=[];function Cn(t,e){for(let n=0,s=_n.length;n<s;n+=1){let s=_n[n];if(s.condition(t,e))return new s(t,e)}return new pn(t,e)}const On="$and",Sn="$or",jn="$path",Ln="$val",In=t=>!(!t[On]&&!t[Sn]),En=t=>({[On]:Object.keys(t).map((e=>({[e]:t[e]})))});function Pn(t,e,{auto:n=!0}={}){const s=t=>{let r=Object.keys(t);const i=(t=>!!t[jn])(t);if(!i&&r.length>1&&!In(t))return s(En(t));if((t=>!Ze(t)&&Ge(t)&&!In(t))(t)){const s=i?t[jn]:r[0],o=i?t[Ln]:t[s];if(!Qe(o))throw new Error((t=>`Invalid value for key ${t}`)(s));const c={keyId:cn(s),pattern:o};return n&&(c.searcher=Cn(o,e)),c}let o={children:[],operator:r[0]};return r.forEach((e=>{const n=t[e];Ze(n)&&n.forEach((t=>{o.children.push(s(t))}))})),o};return In(t)||(t=En(t)),s(t)}function Bn(t,e){const n=t.matches;e.matches=[],Xe(n)&&n.forEach((t=>{if(!Xe(t.indices)||!t.indices.length)return;const{indices:n,value:s}=t;let r={indices:n,value:s};t.key&&(r.key=t.key.src),t.idx>-1&&(r.refIndex=t.idx),e.matches.push(r)}))}function An(t,e){e.score=t.score}class zn{constructor(t,e={},n){this.options={...ln,...e},this.options.useExtendedSearch,this._keyStore=new sn(this.options.keys),this.setCollection(t,n)}setCollection(t,e){if(this._docs=t,e&&!(e instanceof un))throw new Error("Incorrect 'index' type");this._myIndex=e||dn(this.options.keys,this._docs,{getFn:this.options.getFn})}add(t){Xe(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=(()=>!1)){const e=[];for(let n=0,s=this._docs.length;n<s;n+=1){const r=this._docs[n];t(r,n)&&(this.removeAt(n),n-=1,s-=1,e.push(r))}return e}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:e=-1}={}){const{includeMatches:n,includeScore:s,shouldSort:r,sortFn:i,ignoreFieldNorm:o}=this.options;let c=Qe(t)?Qe(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return function(t,{ignoreFieldNorm:e=ln.ignoreFieldNorm}){t.forEach((t=>{let n=1;t.matches.forEach((({key:t,norm:s,score:r})=>{const i=t?t.weight:null;n*=Math.pow(0===r&&i?Number.EPSILON:r,(i||1)*(e?1:s))})),t.score=n}))}(c,{ignoreFieldNorm:o}),r&&c.sort(i),Ue(e)&&e>-1&&(c=c.slice(0,e)),function(t,e,{includeMatches:n=ln.includeMatches,includeScore:s=ln.includeScore}={}){const r=[];return n&&r.push(Bn),s&&r.push(An),t.map((t=>{const{idx:n}=t,s={item:e[n],refIndex:n};return r.length&&r.forEach((e=>{e(t,s)})),s}))}(c,this._docs,{includeMatches:n,includeScore:s})}_searchStringList(t){const e=Cn(t,this.options),{records:n}=this._myIndex,s=[];return n.forEach((({v:t,i:n,n:r})=>{if(!Xe(t))return;const{isMatch:i,score:o,indices:c}=e.searchIn(t);i&&s.push({item:t,idx:n,matches:[{score:o,value:t,norm:r,indices:c}]})})),s}_searchLogical(t){const e=Pn(t,this.options),n=(t,e,s)=>{if(!t.children){const{keyId:n,searcher:r}=t,i=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(e,n),searcher:r});return i&&i.length?[{idx:s,item:e,matches:i}]:[]}switch(t.operator){case On:{const r=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,s);if(!c.length)return[];r.push(...c)}return r}case Sn:{const r=[];for(let i=0,o=t.children.length;i<o;i+=1){const o=t.children[i],c=n(o,e,s);if(c.length){r.push(...c);break}}return r}}},s=this._myIndex.records,r={},i=[];return s.forEach((({$:t,i:s})=>{if(Xe(t)){let o=n(e,t,s);o.length&&(r[s]||(r[s]={idx:s,item:t,matches:[]},i.push(r[s])),o.forEach((({matches:t})=>{r[s].matches.push(...t)})))}})),i}_searchObjectList(t){const e=Cn(t,this.options),{keys:n,records:s}=this._myIndex,r=[];return s.forEach((({$:t,i:s})=>{if(!Xe(t))return;let i=[];n.forEach(((n,s)=>{i.push(...this._findMatches({key:n,value:t[s],searcher:e}))})),i.length&&r.push({idx:s,item:t,matches:i})})),r}_findMatches({key:t,value:e,searcher:n}){if(!Xe(e))return[];let s=[];if(Ze(e))e.forEach((({v:e,i:r,n:i})=>{if(!Xe(e))return;const{isMatch:o,score:c,indices:l}=n.searchIn(e);o&&s.push({score:c,key:t,value:e,idx:r,norm:i,indices:l})}));else{const{v:r,n:i}=e,{isMatch:o,score:c,indices:l}=n.searchIn(r);o&&s.push({score:c,key:t,value:r,norm:i,indices:l})}return s}}zn.version="6.4.6",zn.createIndex=dn,zn.parseIndex=function(t,{getFn:e=ln.getFn}={}){const{keys:n,records:s}=t,r=new un({getFn:e});return r.setKeys(n),r.setIndexRecords(s),r},zn.config=ln,zn.parseQuery=Pn,function(...t){_n.push(...t)}(Mn);const Wn={useExtendedSearch:!0,keys:["subject","preview"]};let Nn=e(ot,(t=>new zn(t,Wn))),Rn=t(""),Fn=t(!1),Dn=e([ot,Nn,Rn,Fn],(([t,e,n,s])=>n?e.search((s?"":"'")+n).map((t=>t.item)):t));function Tn(t){let e,n,s;return{c(){e=i("span"),n=o(t[0]),s=o("건"),l(e,"class","bg-red-100 rounded pr-1")},m(t,r){a(t,e,r),u(e,n),u(e,s)},p(t,e){1&e&&b(n,t[0])},d(t){t&&f(e)}}}function Jn(t){let e,n,s,r,o,c,h,$,y,w,x=t[1]&&Tn(t);return{c(){e=i("span"),n=i("label"),n.textContent="부분 일치",s=g(),r=i("input"),o=g(),c=i("input"),h=g(),x&&x.c(),$=p(),l(n,"for","fuzzy"),l(r,"id","fuzzy"),l(r,"type","checkbox"),l(e,"class","bg-red-100 rounded p-0.5 m-1"),l(c,"class","m-1 border-1 border-gray-400 rounded w-28"),l(c,"type","text"),l(c,"placeholder","검색")},m(i,l){a(i,e,l),u(e,n),u(e,s),u(e,r),r.checked=t[2],a(i,o,l),a(i,c,l),v(c,t[1]),a(i,h,l),x&&x.m(i,l),a(i,$,l),y||(w=[d(r,"change",t[4]),d(c,"change",t[3]),d(c,"input",t[5])],y=!0)},p(t,[e]){4&e&&(r.checked=t[2]),2&e&&c.value!==t[1]&&v(c,t[1]),t[1]?x?x.p(t,e):(x=Tn(t),x.c(),x.m($.parentNode,$)):x&&(x.d(1),x=null)},i:m,o:m,d(t){t&&f(e),t&&f(o),t&&f(c),t&&f(h),x&&x.d(t),t&&f($),y=!1,k(w)}}}function Vn(t,e,n){let s,r,i,o,c;$(t,Rn,(t=>n(1,s=t))),$(t,ut,(t=>n(6,r=t))),$(t,y,(t=>n(7,i=t))),$(t,w,(t=>n(8,o=t))),$(t,Fn,(t=>n(2,c=t)));let{search_length:l}=e;w.subscribe((t=>{s!=t.search&&x(Rn,s=t.search||"",s)}));return t.$$set=t=>{"search_length"in t&&n(0,l=t.search_length)},[l,s,c,()=>{x(ut,r=1,r),i("./",Object.assign(Object.assign({},o),{search:s}))},function(){c=this.checked,Fn.set(c)},function(){s=this.value,Rn.set(s)}]}class Hn extends n{constructor(t){super(),s(this,t,Vn,Jn,r,{search_length:0})}}function Kn(t,e,n){const s=t.slice();return s[43]=e[n],s[45]=n,s}function qn(t,e,n){const s=t.slice();return s[43]=e[n],s[45]=n,s}function Zn(t){let e,n,s,r,c,h,p,$=t[2]?"on":"off";return{c(){e=i("label"),n=o("리스트뷰 "),s=o($),r=g(),c=i("input"),l(c,"id","isListView"),l(c,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,s),u(e,r),u(e,c),c.checked=t[2],h||(p=d(c,"change",t[28]),h=!0)},p(t,e){4&e[0]&&$!==($=t[2]?"on":"off")&&b(s,$),4&e[0]&&(c.checked=t[2])},i:m,o:m,d(t){t&&f(e),h=!1,p()}}}function Qn(t){let e,n,s,r,c,h,m,$,y=t[4].value&&Un(t);return{c(){e=i("label"),n=o("태그 목록\r\n                "),s=i("input"),r=g(),y&&y.c(),c=p(),l(s,"id","isListView"),l(s,"type","checkbox"),l(e,"class","p-1"),l(e,"for","isListView")},m(i,o){a(i,e,o),u(e,n),u(e,s),s.checked=t[6],a(i,r,o),y&&y.m(i,o),a(i,c,o),h=!0,m||($=d(s,"change",t[27]),m=!0)},p(t,e){64&e[0]&&(s.checked=t[6]),t[4].value?y?(y.p(t,e),16&e[0]&&C(y,1)):(y=Un(t),y.c(),C(y,1),y.m(c.parentNode,c)):y&&(A(),O(y,1,1,(()=>{y=null})),z())},i(t){h||(C(y),h=!0)},o(t){O(y),h=!1},d(t){t&&f(e),t&&f(r),y&&y.d(t),t&&f(c),m=!1,$()}}}function Un(t){let e,n,s,r;return s=new wt({props:{tag:t[4],canDelete:!0,onRemove:t[11]}}),{c(){e=i("span"),e.textContent="현재 :",n=g(),M(s.$$.fragment),l(e,"class","ml-1 mt-1")},m(t,i){a(t,e,i),a(t,n,i),_(s,t,i),r=!0},p(t,e){const n={};16&e[0]&&(n.tag=t[4]),s.$set(n)},i(t){r||(C(s.$$.fragment,t),r=!0)},o(t){O(s.$$.fragment,t),r=!1},d(t){t&&f(e),t&&f(n),S(s,t)}}}function Yn(t){let e,n,s=t[7],r=[];for(let e=0;e<s.length;e+=1)r[e]=Xn(Kn(t,s,e));const o=t=>O(r[t],1,1,(()=>{r[t]=null}));return{c(){e=i("ul");for(let t=0;t<r.length;t+=1)r[t].c();l(e,"id","MailItemList"),c(e,"max-width","728px"),l(e,"class","bg-white rounded shadow-xl mb-3")},m(t,s){a(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(226&n[0]){let i;for(s=t[7],i=0;i<s.length;i+=1){const o=Kn(t,s,i);r[i]?(r[i].p(o,n),C(r[i],1)):(r[i]=Xn(o),r[i].c(),C(r[i],1),r[i].m(e,null))}for(A(),i=s.length;i<r.length;i+=1)o(i);z()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)C(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)O(r[t]);n=!1},d(t){t&&f(e),j(r,t)}}}function Gn(t){let e,n,s=t[7],r=[];for(let e=0;e<s.length;e+=1)r[e]=ts(qn(t,s,e));const o=t=>O(r[t],1,1,(()=>{r[t]=null}));return{c(){e=i("div");for(let t=0;t<r.length;t+=1)r[t].c();l(e,"id","MailCardView"),l(e,"class","\r\n        mb-3 flex flex-wrap")},m(t,s){a(t,e,s);for(let t=0;t<r.length;t+=1)r[t].m(e,null);n=!0},p(t,n){if(128&n[0]){let i;for(s=t[7],i=0;i<s.length;i+=1){const o=qn(t,s,i);r[i]?(r[i].p(o,n),C(r[i],1)):(r[i]=ts(o),r[i].c(),C(r[i],1),r[i].m(e,null))}for(A(),i=s.length;i<r.length;i+=1)o(i);z()}},i(t){if(!n){for(let t=0;t<s.length;t+=1)C(r[t]);n=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)O(r[t]);n=!1},d(t){t&&f(e),j(r,t)}}}function Xn(t){let e,n;return e=new Fe({props:{index:t[45],pm:t[43],hidden:t[5]&&(t[1]<400||t[6])&&t[45]>0}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};128&n[0]&&(s.pm=t[43]),98&n[0]&&(s.hidden=t[5]&&(t[1]<400||t[6])&&t[45]>0),e.$set(s)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function ts(t){let e,n;return e=new qe({props:{pm:t[43],index:t[45]}}),{c(){M(e.$$.fragment)},m(t,s){_(e,t,s),n=!0},p(t,n){const s={};128&n[0]&&(s.pm=t[43]),e.$set(s)},i(t){n||(C(e.$$.fragment,t),n=!0)},o(t){O(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function es(t){let e,n,s,r,o,d,h,p,m,$,y,w,x,b,v,k,j,L,I,N,R;const F=[Qn,Zn],D=[];function T(t,e){return t[5]?0:1}s=T(t),r=D[s]=F[s](t);p=new ae({});const J=[Gn,Yn],V=[];function H(t,e){return!t[2]&&t[10]?0:1}return $=H(t),y=V[$]=J[$](t),x=new Le({props:{maxPage:t[8]}}),j=new Hn({props:{search_length:t[3].length}}),{c(){e=i("section"),n=i("div"),r.c(),o=g(),d=g(),h=i("div"),M(p.$$.fragment),m=g(),y.c(),w=g(),M(x.$$.fragment),b=g(),v=i("br"),k=g(),M(j.$$.fragment),l(n,"class","mb-1 flex flex-row"),l(h,"class","\r\n    h-36 p-2 mb-3\r\n    bg-white shadow-2xl rounded-md\r\n    overflow-y-auto"),W(h,"hidden",!(t[5]&&t[6])),l(e,"id","MailListSection"),c(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),l(e,"class",L="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2"),E((()=>t[29].call(e))),W(e,"hidden",t[5]&&!t[9])},m(r,i){a(r,e,i),u(e,n),D[s].m(n,null),u(e,o),u(e,d),u(e,h),_(p,h,null),u(e,m),V[$].m(e,null),u(e,w),_(x,e,null),u(e,b),u(e,v),u(e,k),_(j,e,null),I=B(e,t[29].bind(e)),R=!0},p(t,i){let o=s;s=T(t),s===o?D[s].p(t,i):(A(),O(D[o],1,1,(()=>{D[o]=null})),z(),r=D[s],r?r.p(t,i):(r=D[s]=F[s](t),r.c()),C(r,1),r.m(n,null)),96&i[0]&&W(h,"hidden",!(t[5]&&t[6]));let a=$;$=H(t),$===a?V[$].p(t,i):(A(),O(V[a],1,1,(()=>{V[a]=null})),z(),y=V[$],y?y.p(t,i):(y=V[$]=J[$](t),y.c()),C(y,1),y.m(e,w));const u={};256&i[0]&&(u.maxPage=t[8]),x.$set(u);const d={};8&i[0]&&(d.search_length=t[3].length),j.$set(d),(!R||100&i[0])&&c(e,"min-height",(t[2]||t[5]?t[6]?520:360:490)+"px"),(!R||1024&i[0]&&L!==(L="h-full\r\n"+(t[10]?"w-8/12":"h-full w-full")+"\r\nrelative pl-4 pr-4 pt-2"))&&l(e,"class",L),1568&i[0]&&W(e,"hidden",t[5]&&!t[9])},i(t){R||(C(r),C(false),C(p.$$.fragment,t),C(y),C(x.$$.fragment,t),C(j.$$.fragment,t),E((()=>{N||(N=P(e,Ut,{x:200,duration:200},!0)),N.run(1)})),R=!0)},o(t){O(r),O(false),O(p.$$.fragment,t),O(y),O(x.$$.fragment,t),O(j.$$.fragment,t),N||(N=P(e,Ut,{x:200,duration:200},!1)),N.run(0),R=!1},d(t){t&&f(e),D[s].d(),S(p),V[$].d(),S(x),S(j),I(),t&&N&&N.end()}}}function ns(t,e){fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((t=>{console.log(e)})).catch((e=>{console.error(t+" 백업에 실패했습니다."),console.error(e)}))}function ss(t,e,n){let s,r,i,o,c,l,a,u,d,h,f,g,p,m,b,v,k,M,_,C,O,S,j,L,I,E;$(t,$e,(t=>n(14,p=t))),$(t,ut,(t=>n(16,m=t))),$(t,D,(t=>n(35,b=t))),$(t,w,(t=>n(36,v=t))),$(t,rt,(t=>n(18,k=t))),$(t,st,(t=>n(4,M=t))),$(t,Rn,(t=>n(21,_=t))),$(t,Dn,(t=>n(22,C=t))),$(t,ft,(t=>n(5,O=t))),$(t,y,(t=>n(37,S=t))),$(t,Y,(t=>n(38,j=t))),$(t,G,(t=>n(39,L=t))),$(t,dt,(t=>n(9,I=t))),$(t,ht,(t=>n(10,E=t)));var P=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};let B,A,z=1,W=3;T((()=>{const t=g[0];if(W!=u||z==m&&B==$e||(A=t),W!=u&&A){let t=0;return c.forEach(((t,e)=>{})),x(ut,m=Math.ceil((t+1)/u),m),z=m,W=u,b("./",Object.assign(Object.assign({},v),{nowPage:m})),null}if(s>new Date)return x($e,p=ye(new Date),p),alert("미래로 갈 수는 없습니다."),b("./",Object.assign(Object.assign({},v),{dateString:p})),null;if(0==g.length||!t&&1!=v.nowPage)return b("./",Object.assign(Object.assign({},v),{nowPage:1})),null;if(z!=m){z=m;const e=xe(t.time);x($e,p=e,p),B=e,b("./",Object.assign(Object.assign({},v),{nowPage:m,dateString:p}),{static:!0})}if(B!=p){let t=!1;if(c.forEach(((e,n)=>{if(t||!e)return null;const r=xe(e.time);we(r)<=s&&(x(ut,m=Math.ceil((n+1)/u),m),x($e,p=r,p),t=!0)})),0==t&&c.length>0){x(ut,m=d,m);const t=c[c.length-1];x($e,p=xe(t.time),p)}return B=p,b("./",Object.assign(Object.assign({},v),{nowPage:m,dateString:p})),null}}));const N=t=>{const e=t.time.split(" ")[0];"string"!=typeof e&&console.log(e);try{return e.replace(/\//g,"-")==p}catch(t){console.error(t),console.log(e)}return!0},R=t=>!0;let F,J,V=!1,H=!1;return t.$$.update=()=>{16384&t.$$.dirty[0]&&(s=we(p)),262160&t.$$.dirty[0]&&n(17,r=k.get(M)),131072&t.$$.dirty[0]&&n(19,i=t=>r.has(t.id)),2637840&t.$$.dirty[0]&&n(20,o=M.value&&i||_&&R||p&&N||R),5242880&t.$$.dirty[0]&&n(3,c=C.filter(o)),1&t.$$.dirty[0]&&n(23,l=Math.floor((F-33)/280)),2&t.$$.dirty[0]&&n(24,a=Math.floor((J-220)/164)),25165862&t.$$.dirty[0]&&n(15,u=O?5:V?Math.floor((J-200)/62):l*a),32776&t.$$.dirty[0]&&n(8,d=Math.ceil(c.length/u)),98304&t.$$.dirty[0]&&n(25,h=(m-1)*u),33587208&t.$$.dirty[0]&&n(26,f=()=>{const t=c.slice(h,h+u);return t.length<u?t.concat(Array(u-t.length).fill({id:"",member:"",time:"",subject:"",preview:""})):t}),67108872&t.$$.dirty[0]&&n(7,g=c&&f())},[F,J,V,c,M,O,H,g,d,I,E,()=>{x(st,M=q,M),x(ut,m=1,m),S("./",Object.assign(Object.assign({},v),{tag:""}))},()=>{ns("/all-tag-dict/",{tag_list:[...j].map((t=>t[1]))}),ns("/mail-tag-dict/",{mail_to_tag_dict:X(L),tag_to_mail_dict:it(k)})},()=>P(void 0,void 0,void 0,(function*(){const t=yield fetch("/all-tag-dict/").then((t=>t.json())).then((t=>t.tag_list)),e=yield fetch("/mail-tag-dict/").then((t=>t.json())),n=e.tag_to_mail_dict,s=e.mail_to_tag_dict;x(st,M=q,M),x(Y,j=t.reduce(((t,e)=>(t.set(e.value,e),t)),new Map([["💖",Z]])),j),console.log("all_tag_dict 백업 다운로드 완료"),x(rt,k=tt(n),k),x(G,L=U(s),L),console.log("mail_tag_dict 백업 다운로드 완료")})),p,u,m,r,k,i,o,_,C,l,a,h,f,function(){H=this.checked,n(6,H)},function(){V=this.checked,n(2,V)},function(){F=this.clientWidth,J=this.clientHeight,n(0,F),n(1,J)}]}class rs extends n{constructor(t){super(),s(this,t,ss,es,r,{},[-1,-1])}}function is(t){let e,n,s,r,o,c,p,m,$,y,w,x=t[0].closeButton&&os(t);var b=t[1];return b&&(c=new b({})),{c(){e=i("div"),n=i("div"),s=i("div"),x&&x.c(),r=g(),o=i("div"),c&&M(c.$$.fragment),l(o,"class","content svelte-1jadkpy"),l(o,"style",t[12]),l(s,"class","window svelte-1jadkpy"),l(s,"role","dialog"),l(s,"aria-modal","true"),l(s,"style",t[11]),l(n,"class","window-wrap svelte-1jadkpy"),l(n,"style",t[10]),l(e,"class","bg svelte-1jadkpy"),l(e,"style",t[9])},m(i,l){a(i,e,l),u(e,n),u(n,s),x&&x.m(s,null),u(s,r),u(s,o),c&&_(c,o,null),t[37](s),t[38](n),t[39](e),$=!0,y||(w=[d(s,"introstart",(function(){h(t[5])&&t[5].apply(this,arguments)})),d(s,"outrostart",(function(){h(t[6])&&t[6].apply(this,arguments)})),d(s,"introend",(function(){h(t[7])&&t[7].apply(this,arguments)})),d(s,"outroend",(function(){h(t[8])&&t[8].apply(this,arguments)})),d(e,"click",t[19])],y=!0)},p(i,a){if((t=i)[0].closeButton?x?(x.p(t,a),1&a[0]&&C(x,1)):(x=os(t),x.c(),C(x,1),x.m(s,r)):x&&(A(),O(x,1,1,(()=>{x=null})),z()),b!==(b=t[1])){if(c){A();const t=c;O(t.$$.fragment,1,0,(()=>{S(t,1)})),z()}b?(c=new b({}),M(c.$$.fragment),C(c.$$.fragment,1),_(c,o,null)):c=null}(!$||4096&a[0])&&l(o,"style",t[12]),(!$||2048&a[0])&&l(s,"style",t[11]),(!$||1024&a[0])&&l(n,"style",t[10]),(!$||512&a[0])&&l(e,"style",t[9])},i(n){$||(C(x),c&&C(c.$$.fragment,n),E((()=>{p||(p=P(s,t[15],t[0].transitionWindowProps,!0)),p.run(1)})),E((()=>{m||(m=P(e,t[14],t[0].transitionBgProps,!0)),m.run(1)})),$=!0)},o(n){O(x),c&&O(c.$$.fragment,n),p||(p=P(s,t[15],t[0].transitionWindowProps,!1)),p.run(0),m||(m=P(e,t[14],t[0].transitionBgProps,!1)),m.run(0),$=!1},d(n){n&&f(e),x&&x.d(),c&&S(c),t[37](null),n&&p&&p.end(),t[38](null),t[39](null),n&&m&&m.end(),y=!1,k(w)}}}function os(t){let e,n,s,r,i;const o=[ls,cs],c=[];function l(t,n){return 1&n[0]&&(e=!!t[16](t[0].closeButton)),e?0:1}return n=l(t,[-1]),s=c[n]=o[n](t),{c(){s.c(),r=p()},m(t,e){c[n].m(t,e),a(t,r,e),i=!0},p(t,e){let i=n;n=l(t,e),n===i?c[n].p(t,e):(A(),O(c[i],1,1,(()=>{c[i]=null})),z(),s=c[n],s?s.p(t,e):(s=c[n]=o[n](t),s.c()),C(s,1),s.m(r.parentNode,r))},i(t){i||(C(s),i=!0)},o(t){O(s),i=!1},d(t){c[n].d(t),t&&f(r)}}}function cs(t){let e,n,s;return{c(){e=i("button"),l(e,"class","close svelte-1jadkpy"),l(e,"style",t[13])},m(r,i){a(r,e,i),n||(s=d(e,"click",t[17]),n=!0)},p(t,n){8192&n[0]&&l(e,"style",t[13])},i:m,o:m,d(t){t&&f(e),n=!1,s()}}}function ls(t){let e,n,s;var r=t[0].closeButton;function i(t){return{props:{onClose:t[17]}}}return r&&(e=new r(i(t))),{c(){e&&M(e.$$.fragment),n=p()},m(t,r){e&&_(e,t,r),a(t,n,r),s=!0},p(t,s){if(r!==(r=t[0].closeButton)){if(e){A();const t=e;O(t.$$.fragment,1,0,(()=>{S(t,1)})),z()}r?(e=new r(i(t)),M(e.$$.fragment),C(e.$$.fragment,1),_(e,n.parentNode,n)):e=null}},i(t){s||(e&&C(e.$$.fragment,t),s=!0)},o(t){e&&O(e.$$.fragment,t),s=!1},d(t){t&&f(n),e&&S(e,t)}}}function as(t){let e,n,s,r,i=t[1]&&is(t);const o=t[36].default,c=N(o,t,t[35],null);return{c(){i&&i.c(),e=g(),c&&c.c()},m(o,l){i&&i.m(o,l),a(o,e,l),c&&c.m(o,l),n=!0,s||(r=d(window,"keydown",t[18]),s=!0)},p(t,n){t[1]?i?(i.p(t,n),2&n[0]&&C(i,1)):(i=is(t),i.c(),C(i,1),i.m(e.parentNode,e)):i&&(A(),O(i,1,1,(()=>{i=null})),z()),c&&c.p&&16&n[1]&&R(c,o,t,t[35],n,null,null)},i(t){n||(C(i),C(c,t),n=!0)},o(t){O(i),O(c,t),n=!1},d(t){i&&i.d(t),t&&f(e),c&&c.d(t),s=!1,r()}}}function us(t,e,n){let s,r,i,o,c,l,a,{$$slots:u={},$$scope:d}=e;const h=J(),f=H;let{show:g=null}=e,{key:p="simple-modal"}=e,{closeButton:m=!0}=e,{closeOnEsc:$=!0}=e,{closeOnOuterClick:y=!0}=e,{styleBg:w={top:0,left:0}}=e,{styleWindowWrap:x={}}=e,{styleWindow:b={}}=e,{styleContent:v={}}=e,{styleCloseButton:k={}}=e,{setContext:M=f}=e,{transitionBg:_=Qt}=e,{transitionBgProps:C={duration:250}}=e,{transitionWindow:O=_}=e,{transitionWindowProps:S=C}=e;const j={closeButton:m,closeOnEsc:$,closeOnOuterClick:y,styleBg:w,styleWindowWrap:x,styleWindow:b,styleContent:v,styleCloseButton:k,transitionBg:_,transitionBgProps:C,transitionWindow:O,transitionWindowProps:S};let L,I,E,P={...j},B=null;const A=t=>Object.keys(t).reduce(((e,n)=>`${e}; ${(t=>t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase())(n)}: ${t[n]}`),""),z=t=>!!(t&&t.constructor&&t.call&&t.apply),W=()=>{};let N=W,R=W,F=W,D=W;const T=(t,e={},s={},r={})=>{n(1,B=function(t,e={}){return function(n){return new t({...n,props:{...e,...n.props}})}}(t,e)),n(0,P={...j,...s}),n(5,N=t=>{r.onOpen&&r.onOpen(t),h("opening")}),n(6,R=t=>{r.onClose&&r.onClose(t),h("closing")}),n(7,F=t=>{r.onOpened&&r.onOpened(t),h("opened")}),n(8,D=t=>{r.onClosed&&r.onClosed(t),h("closed")})},K=(t={})=>{n(6,R=t.onClose||R),n(8,D=t.onClosed||D),n(1,B=null)};return M(p,{open:T,close:K}),t.$$set=t=>{"show"in t&&n(20,g=t.show),"key"in t&&n(21,p=t.key),"closeButton"in t&&n(22,m=t.closeButton),"closeOnEsc"in t&&n(23,$=t.closeOnEsc),"closeOnOuterClick"in t&&n(24,y=t.closeOnOuterClick),"styleBg"in t&&n(25,w=t.styleBg),"styleWindowWrap"in t&&n(26,x=t.styleWindowWrap),"styleWindow"in t&&n(27,b=t.styleWindow),"styleContent"in t&&n(28,v=t.styleContent),"styleCloseButton"in t&&n(29,k=t.styleCloseButton),"setContext"in t&&n(30,M=t.setContext),"transitionBg"in t&&n(31,_=t.transitionBg),"transitionBgProps"in t&&n(32,C=t.transitionBgProps),"transitionWindow"in t&&n(33,O=t.transitionWindow),"transitionWindowProps"in t&&n(34,S=t.transitionWindowProps),"$$scope"in t&&n(35,d=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty[0]&&n(9,s=A(P.styleBg)),1&t.$$.dirty[0]&&n(10,r=A(P.styleWindowWrap)),1&t.$$.dirty[0]&&n(11,i=A(P.styleWindow)),1&t.$$.dirty[0]&&n(12,o=A(P.styleContent)),1&t.$$.dirty[0]&&n(13,c=A(P.styleCloseButton)),1&t.$$.dirty[0]&&n(14,l=P.transitionBg),1&t.$$.dirty[0]&&n(15,a=P.transitionWindow),1048576&t.$$.dirty[0]&&(z(g)?T(g):K())},[P,B,L,I,E,N,R,F,D,s,r,i,o,c,l,a,z,K,t=>{if(P.closeOnEsc&&B&&"Escape"===t.key&&(t.preventDefault(),K()),B&&"Tab"===t.key){const e=E.querySelectorAll("*"),n=Array.from(e).filter((t=>t.tabIndex>=0));let s=n.indexOf(document.activeElement);-1===s&&t.shiftKey&&(s=0),s+=n.length+(t.shiftKey?-1:1),s%=n.length,n[s].focus(),t.preventDefault()}},t=>{!P.closeOnOuterClick||t.target!==L&&t.target!==I||(t.preventDefault(),K())},g,p,m,$,y,w,x,b,v,k,M,_,C,O,S,d,u,function(t){V[t?"unshift":"push"]((()=>{E=t,n(4,E)}))},function(t){V[t?"unshift":"push"]((()=>{I=t,n(3,I)}))},function(t){V[t?"unshift":"push"]((()=>{L=t,n(2,L)}))}]}class ds extends n{constructor(t){super(),s(this,t,us,as,r,{show:20,key:21,closeButton:22,closeOnEsc:23,closeOnOuterClick:24,styleBg:25,styleWindowWrap:26,styleWindow:27,styleContent:28,styleCloseButton:29,setContext:30,transitionBg:31,transitionBgProps:32,transitionWindow:33,transitionWindowProps:34},[-1,-1])}}function hs(t){let e,n,s,r;return e=new pe({}),s=new rs({}),{c(){M(e.$$.fragment),n=g(),M(s.$$.fragment)},m(t,i){_(e,t,i),a(t,n,i),_(s,t,i),r=!0},i(t){r||(C(e.$$.fragment,t),C(s.$$.fragment,t),r=!0)},o(t){O(e.$$.fragment,t),O(s.$$.fragment,t),r=!1},d(t){S(e,t),t&&f(n),S(s,t)}}}function fs(t){let e,n,s=t[1]&&hs();return{c(){s&&s.c(),e=p()},m(t,r){s&&s.m(t,r),a(t,e,r),n=!0},p(t,n){t[1]?s?2&n&&C(s,1):(s=hs(),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(A(),O(s,1,1,(()=>{s=null})),z())},i(t){n||(C(s),n=!0)},o(t){O(s),n=!1},d(t){s&&s.d(t),t&&f(e)}}}function gs(t){let e,n,s,r;return n=new ds({props:{show:ps,$$slots:{default:[fs]},$$scope:{ctx:t}}}),{c(){e=i("div"),M(n.$$.fragment),l(e,"class","flex w-screen h-screen relative"),E((()=>t[4].call(e)))},m(i,o){a(i,e,o),_(n,e,null),s=B(e,t[4].bind(e)),r=!0},p(t,[e]){const s={};131074&e&&(s.$$scope={dirty:e,ctx:t}),n.$set(s)},i(t){r||(C(n.$$.fragment,t),r=!0)},o(t){O(n.$$.fragment,t),r=!1},d(t){t&&f(e),S(n),s()}}}let ps=null;function ms(t,e,n){let s,r,i,o,c,l,a,u,d;$(t,rt,(t=>n(2,r=t))),$(t,G,(t=>n(3,i=t))),$(t,Mt,(t=>n(7,o=t))),$(t,ot,(t=>n(8,c=t))),$(t,ct,(t=>n(9,l=t))),$(t,Y,(t=>n(10,a=t))),$(t,y,(t=>n(11,u=t))),$(t,dt,(t=>n(12,d=t)));var h=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))((function(r,i){function o(t){try{l(s.next(t))}catch(t){i(t)}}function c(t){try{l(s.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,c)}l((s=s.apply(t,e||[])).next())}))};K.title="IZ*ONE Private Mail Viewer";let f=!1;const g=(t,e)=>{try{console.log(`${e}차 시도`),console.log(t.slice(0,10));const n=[];for(let e=0;e<t.length;e+=2)n.push(t[e]);return JSON.parse(n.join(""))}catch(n){if(e<4)return t=t.slice(1),g(t,e+1);throw n}},p=t=>h(void 0,void 0,void 0,(function*(){try{const e=yield fetch(t);return yield e.json()}catch(e){console.log("json 로드 실패");const n=yield fetch(t),s=yield n.text();return g(s,0)}}));let m;return function(){return h(this,void 0,void 0,(function*(){console.log("메일 리스트 로딩 시작");const t=yield p("./pm_list.json");console.log("메일 리스트 로딩 완료"),console.log("이름 dict 로딩 시작"),x(Mt,o=yield p("./member_name.json"),o),console.log("이름 dict 로딩 끝"),console.log(o);const e=yield fetch("./mail_to_num_dict.json"),n=yield e.json();x(ot,c=t.map(((t,e)=>{"m20731"==t.id&&x(ct,l=t,l),t.nick=t.member;const s=o[t.nick];if(t.member=_t[s],!t.member&&e<5700){const e=n[t.id];x(Mt,o[t.nick]=e,o),t.member=_t[e],console.log(t.nick,t.member)}return t})),c),console.log("all_tag_dict",a);let d=0;const h=a.get("혼다 히토미");if(r.has(h)&&(c.forEach((t=>{const e=a.get(t.member),n=r.get(e);n?n.add(t.id):(console.log(t.id,t.nick),d+=1)})),rt.set(r)),console.log("누락",d),!a.has("생일")){const t={value:"생일",color:"LightPink"};a.set(t.value,t),Y.set(a),r.set(t,new Set),c.map((e=>{"b"==e.id.slice(0,1)&&s(t,e)})),rt.set(r),G.set(i)}u("./",{dateString:me,nowPage:1,tag:"",search:"",showList:!0})}))}().then((()=>{n(1,f=!0)})),w.subscribe((t=>{const e="true"==t.showList;e!=d&&x(dt,d=e,d)})),t.$$.update=()=>{12&t.$$.dirty&&(s=(t,e)=>{r.get(t).add(e.id),i.has(e.id)?i.get(e.id).add(t):i.set(e.id,new Set([t]))}),1&t.$$.dirty&&ht.set(m>800)},[m,f,r,i,function(){m=this.clientWidth,n(0,m)}]}export default class extends n{constructor(t){super(),s(this,t,ms,gs,r,{})}}
//# sourceMappingURL=index-756d6944.js.map
